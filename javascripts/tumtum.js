(function(){$(function(){var e,t,a,r,i,n,o,s,d,u,c,h,D,l,g,w,b,p,B,x,y,C,S,f,m,A,v;if(D=$("canvas#tumtum")[0]){for(t=2,C=40,y=80,p=!1,l=!1,m=new createjs.Stage(D),a=new createjs.Container,B=new createjs.Container,m.addChild(a),h=[],u=Box2D.Common.Math.b2Vec2,i=Box2D.Dynamics.b2BodyDef,r=Box2D.Dynamics.b2Body,s=Box2D.Dynamics.b2FixtureDef,c=Box2D.Dynamics.b2World,d=Box2D.Collision.Shapes.b2PolygonShape,n=Box2D.Collision.Shapes.b2CircleShape,o=Box2D.Dynamics.b2DebugDraw,v=new c(new u(0,-10),!0),e=40,A=D.width/e,w=D.height/e,g=new s,g.density=1,function(){var e,t;return e=new i,e.type=r.b2_staticBody,g.shape=new d,t=.1,e.position.Set(A/2,0),g.shape.SetAsBox(A/2,t),v.CreateBody(e).CreateFixture(g),e.position.Set(t,w/2),g.shape.SetAsBox(0,w/2),v.CreateBody(e).CreateFixture(g),e.position.Set(A,w/2),g.shape.SetAsBox(t,w/2),v.CreateBody(e).CreateFixture(g)}(),D.addActors=function(e){var t,r;return r=h.slice().sort(function(e,t){return-(e.radius-t.radius)}),t=r.indexOf(e),a.addChildAt(e.actors[0],t),B.addChildAt(e.actors[1],t)},D.addArt=function(){var t,a,o;return o=Math.floor(Math.random()*(y-C)+C),a=new i,a.type=r.b2_dynamicBody,g.shape=new n(.8*o/e),a.position.Set(A*(.1+.8*Math.random()),w+Math.random()),t=v.CreateBody(a),t.CreateFixture(g),h.push(t),t.radius=o,t.actors=[new Baumkuchen(o),new ArtImage(o)],D.addActors(t)},D.toggleImages=function(){return p=!p,p?(a.remove(),m.addChildAt(B,0)):(m.addChildAt(a,0),B.remove()),p},D.toggleDebug=function(){return l=!l,l&&!this.debugDraw&&(this.debugDraw=new o,this.debugDraw.SetSprite(D.getContext("2d")),this.debugDraw.SetDrawScale(e),this.debugDraw.SetFillAlpha(.3),this.debugDraw.SetLineThickness(1),this.debugDraw.SetFlags(o.e_shapeBit|o.e_jointBit),v.SetDebugDraw(this.debugDraw)),l},createjs.Ticker.timingMode=createjs.Ticker.RAF,createjs.Ticker.addEventListener("tick",function(t){var a,r,i,n,o,s,d,u;if(v.Step(1/60,3,3),v.ClearForces(),l)return v.DrawDebugData();for(i=0,o=h.length;o>i;i++)if(r=h[i],d=r.GetPosition(),d&&null!=d.x&&null!=d.y)for(u=r.actors,n=0,s=u.length;s>n;n++)a=u[n],a.x=d.x*e,a.y=d.y*e;return m.update(t)}),f=[],b=x=0,S=t;S>=0?S>x:x>S;b=S>=0?++x:--x)f.push(D.addArt());return f}})}).call(this);