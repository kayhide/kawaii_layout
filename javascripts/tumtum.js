(function(){$(function(){var e,t,a,r,i,n,o,s,d,u,h,c,D,l,g,w,b,p,B,y,C,S,x,m,f,A,F;if(D=$("canvas#tumtum")[0]){for(t=2,S=40,C=80,p=!1,l=!1,f=new createjs.Stage(D),a=new createjs.Container,B=new createjs.Container,f.addChild(a),c=[],u=Box2D.Common.Math.b2Vec2,i=Box2D.Dynamics.b2BodyDef,r=Box2D.Dynamics.b2Body,s=Box2D.Dynamics.b2FixtureDef,h=Box2D.Dynamics.b2World,d=Box2D.Collision.Shapes.b2PolygonShape,n=Box2D.Collision.Shapes.b2CircleShape,o=Box2D.Dynamics.b2DebugDraw,F=new h(new u(0,-10),!0),e=40,A=D.width/e,w=D.height/e,g=new s,g.density=1,function(){var e,t;return e=new i,e.type=r.b2_staticBody,g.shape=new d,t=.1,e.position.Set(A/2,0),g.shape.SetAsBox(A/2,t),F.CreateBody(e).CreateFixture(g),e.position.Set(t,w/2),g.shape.SetAsBox(0,w/2),F.CreateBody(e).CreateFixture(g),e.position.Set(A,w/2),g.shape.SetAsBox(t,w/2),F.CreateBody(e).CreateFixture(g)}(),D.addArt=function(){var t,o,s;return s=Math.floor(Math.random()*(C-S)+S),o=new i,o.type=r.b2_dynamicBody,g.shape=new n(.8*s/e),o.position.Set(A*(.1+.8*Math.random()),w+Math.random()),t=F.CreateBody(o),t.CreateFixture(g),c.push(t),t.actors=[new Baumkuchen(s),new ArtImage(s)],a.addChild(t.actors[0]),B.addChild(t.actors[1])},D.toggleImages=function(){return p=!p,p?(a.remove(),f.addChildAt(B,0)):(f.addChildAt(a,0),B.remove()),p},D.toggleDebug=function(){return l=!l,l&&!this.debugDraw&&(this.debugDraw=new o,this.debugDraw.SetSprite(D.getContext("2d")),this.debugDraw.SetDrawScale(e),this.debugDraw.SetFillAlpha(.3),this.debugDraw.SetLineThickness(1),this.debugDraw.SetFlags(o.e_shapeBit|o.e_jointBit),F.SetDebugDraw(this.debugDraw)),l},createjs.Ticker.timingMode=createjs.Ticker.RAF,createjs.Ticker.addEventListener("tick",function(t){var a,r,i,n,o,s,d,u;if(F.Step(1/60,3,3),F.ClearForces(),l)return F.DrawDebugData();for(i=0,o=c.length;o>i;i++)if(r=c[i],d=r.GetPosition(),d&&null!=d.x&&null!=d.y)for(u=r.actors,n=0,s=u.length;s>n;n++)a=u[n],a.x=d.x*e,a.y=d.y*e;return f.update(t)}),m=[],b=y=0,x=t;x>=0?x>y:y>x;b=x>=0?++y:--y)m.push(D.addArt());return m}})}).call(this);