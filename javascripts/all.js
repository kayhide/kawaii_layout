/*!
 * jQuery JavaScript Library v1.11.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-17T15:27Z
 */
/*!
 * Bootstrap v3.3.6 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under the MIT license
 */
if(function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=t.length,i=ot.type(t);return"function"===i||ot.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t}function n(t,e,i){if(ot.isFunction(e))return ot.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return ot.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(mt.test(e))return ot.filter(e,t,i);e=ot.filter(e,t)}return ot.grep(t,function(t){return ot.inArray(t,e)>=0!==i})}function o(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function s(t){var e=vt[t]={};return ot.each(t.match(gt)||[],function(t,i){e[i]=!0}),e}function r(){_t.addEventListener?(_t.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1)):(_t.detachEvent("onreadystatechange",a),t.detachEvent("onload",a))}function a(){(_t.addEventListener||"load"===event.type||"complete"===_t.readyState)&&(r(),ot.ready())}function l(t,e,i){if(void 0===i&&1===t.nodeType){var n="data-"+e.replace(St,"-$1").toLowerCase();if(i=t.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Dt.test(i)?ot.parseJSON(i):i}catch(o){}ot.data(t,e,i)}else i=void 0}return i}function c(t){var e;for(e in t)if(("data"!==e||!ot.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function h(t,e,i,n){if(ot.acceptData(t)){var o,s,r=ot.expando,a=t.nodeType,l=a?ot.cache:t,c=a?t[r]:t[r]&&r;if(c&&l[c]&&(n||l[c].data)||void 0!==i||"string"!=typeof e)return c||(c=a?t[r]=H.pop()||ot.guid++:r),l[c]||(l[c]=a?{}:{toJSON:ot.noop}),("object"==typeof e||"function"==typeof e)&&(n?l[c]=ot.extend(l[c],e):l[c].data=ot.extend(l[c].data,e)),s=l[c],n||(s.data||(s.data={}),s=s.data),void 0!==i&&(s[ot.camelCase(e)]=i),"string"==typeof e?(o=s[e],null==o&&(o=s[ot.camelCase(e)])):o=s,o}}function u(t,e,i){if(ot.acceptData(t)){var n,o,s=t.nodeType,r=s?ot.cache:t,a=s?t[ot.expando]:ot.expando;if(r[a]){if(e&&(n=i?r[a]:r[a].data)){ot.isArray(e)?e=e.concat(ot.map(e,ot.camelCase)):e in n?e=[e]:(e=ot.camelCase(e),e=e in n?[e]:e.split(" ")),o=e.length;for(;o--;)delete n[e[o]];if(i?!c(n):!ot.isEmptyObject(n))return}(i||(delete r[a].data,c(r[a])))&&(s?ot.cleanData([t],!0):it.deleteExpando||r!=r.window?delete r[a]:r[a]=null)}}}function m(){return!0}function p(){return!1}function _(){try{return _t.activeElement}catch(t){}}function d(t){var e=Ft.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function f(t,e){var i,n,o=0,s=typeof t.getElementsByTagName!==Ct?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==Ct?t.querySelectorAll(e||"*"):void 0;if(!s)for(s=[],i=t.childNodes||t;null!=(n=i[o]);o++)!e||ot.nodeName(n,e)?s.push(n):ot.merge(s,f(n,e));return void 0===e||e&&ot.nodeName(t,e)?ot.merge([t],s):s}function y(t){It.test(t.type)&&(t.defaultChecked=t.checked)}function x(t,e){return ot.nodeName(t,"table")&&ot.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function g(t){return t.type=(null!==ot.find.attr(t,"type"))+"/"+t.type,t}function v(t){var e=Ut.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function b(t,e){for(var i,n=0;null!=(i=t[n]);n++)ot._data(i,"globalEval",!e||ot._data(e[n],"globalEval"))}function w(t,e){if(1===e.nodeType&&ot.hasData(t)){var i,n,o,s=ot._data(t),r=ot._data(e,s),a=s.events;if(a){delete r.handle,r.events={};for(i in a)for(n=0,o=a[i].length;o>n;n++)ot.event.add(e,i,a[i][n])}r.data&&(r.data=ot.extend({},r.data))}}function C(t,e){var i,n,o;if(1===e.nodeType){if(i=e.nodeName.toLowerCase(),!it.noCloneEvent&&e[ot.expando]){o=ot._data(e);for(n in o.events)ot.removeEvent(e,n,o.handle);e.removeAttribute(ot.expando)}"script"===i&&e.text!==t.text?(g(e).text=t.text,v(e)):"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),it.html5Clone&&t.innerHTML&&!ot.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&It.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.defaultSelected=e.selected=t.defaultSelected:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}}function D(e,i){var n,o=ot(i.createElement(e)).appendTo(i.body),s=t.getDefaultComputedStyle&&(n=t.getDefaultComputedStyle(o[0]))?n.display:ot.css(o[0],"display");return o.detach(),s}function S(t){var e=_t,i=Qt[t];return i||(i=D(t,e),"none"!==i&&i||(Zt=(Zt||ot("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Zt[0].contentWindow||Zt[0].contentDocument).document,e.write(),e.close(),i=D(t,e),Zt.detach()),Qt[t]=i),i}function B(t,e){return{get:function(){var i=t();if(null!=i)return i?void delete this.get:(this.get=e).apply(this,arguments)}}}function A(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,o=me.length;o--;)if(e=me[o]+i,e in t)return e;return n}function M(t,e){for(var i,n,o,s=[],r=0,a=t.length;a>r;r++)n=t[r],n.style&&(s[r]=ot._data(n,"olddisplay"),i=n.style.display,e?(s[r]||"none"!==i||(n.style.display=""),""===n.style.display&&Mt(n)&&(s[r]=ot._data(n,"olddisplay",S(n.nodeName)))):(o=Mt(n),(i&&"none"!==i||!o)&&ot._data(n,"olddisplay",o?i:ot.css(n,"display"))));for(r=0;a>r;r++)n=t[r],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?s[r]||"":"none"));return t}function T(t,e,i){var n=le.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function I(t,e,i,n,o){for(var s=i===(n?"border":"content")?4:"width"===e?1:0,r=0;4>s;s+=2)"margin"===i&&(r+=ot.css(t,i+At[s],!0,o)),n?("content"===i&&(r-=ot.css(t,"padding"+At[s],!0,o)),"margin"!==i&&(r-=ot.css(t,"border"+At[s]+"Width",!0,o))):(r+=ot.css(t,"padding"+At[s],!0,o),"padding"!==i&&(r+=ot.css(t,"border"+At[s]+"Width",!0,o)));return r}function V(t,e,i){var n=!0,o="width"===e?t.offsetWidth:t.offsetHeight,s=te(t),r=it.boxSizing&&"border-box"===ot.css(t,"boxSizing",!1,s);if(0>=o||null==o){if(o=ee(t,e,s),(0>o||null==o)&&(o=t.style[e]),ne.test(o))return o;n=r&&(it.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+I(t,e,i||(r?"border":"content"),n,s)+"px"}function L(t,e,i,n,o){return new L.prototype.init(t,e,i,n,o)}function E(){return setTimeout(function(){pe=void 0}),pe=ot.now()}function P(t,e){var i,n={height:t},o=0;for(e=e?1:0;4>o;o+=2-e)i=At[o],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function k(t,e,i){for(var n,o=(ge[e]||[]).concat(ge["*"]),s=0,r=o.length;r>s;s++)if(n=o[s].call(i,e,t))return n}function F(t,e,i){var n,o,s,r,a,l,c,h,u=this,m={},p=t.style,_=t.nodeType&&Mt(t),d=ot._data(t,"fxshow");i.queue||(a=ot._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,ot.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],c=ot.css(t,"display"),h="none"===c?ot._data(t,"olddisplay")||S(t.nodeName):c,"inline"===h&&"none"===ot.css(t,"float")&&(it.inlineBlockNeedsLayout&&"inline"!==S(t.nodeName)?p.zoom=1:p.display="inline-block")),i.overflow&&(p.overflow="hidden",it.shrinkWrapBlocks()||u.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in e)if(o=e[n],de.exec(o)){if(delete e[n],s=s||"toggle"===o,o===(_?"hide":"show")){if("show"!==o||!d||void 0===d[n])continue;_=!0}m[n]=d&&d[n]||ot.style(t,n)}else c=void 0;if(ot.isEmptyObject(m))"inline"===("none"===c?S(t.nodeName):c)&&(p.display=c);else{d?"hidden"in d&&(_=d.hidden):d=ot._data(t,"fxshow",{}),s&&(d.hidden=!_),_?ot(t).show():u.done(function(){ot(t).hide()}),u.done(function(){var e;ot._removeData(t,"fxshow");for(e in m)ot.style(t,e,m[e])});for(n in m)r=k(_?d[n]:0,n,u),n in d||(d[n]=r.start,_&&(r.end=r.start,r.start="width"===n||"height"===n?1:0))}}function j(t,e){var i,n,o,s,r;for(i in t)if(n=ot.camelCase(i),o=e[n],s=t[i],ot.isArray(s)&&(o=s[1],s=t[i]=s[0]),i!==n&&(t[n]=s,delete t[i]),r=ot.cssHooks[n],r&&"expand"in r){s=r.expand(s),delete t[n];for(i in s)i in t||(t[i]=s[i],e[i]=o)}else e[n]=o}function R(t,e,i){var n,o,s=0,r=xe.length,a=ot.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=pe||E(),i=Math.max(0,c.startTime+c.duration-e),n=i/c.duration||0,s=1-n,r=0,l=c.tweens.length;l>r;r++)c.tweens[r].run(s);return a.notifyWith(t,[c,s,i]),1>s&&l?i:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:ot.extend({},e),opts:ot.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:pe||E(),duration:i.duration,tweens:[],createTween:function(e,i){var n=ot.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(o)return this;for(o=!0;n>i;i++)c.tweens[i].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),h=c.props;for(j(h,c.opts.specialEasing);r>s;s++)if(n=xe[s].call(c,t,h,c.opts))return n;return ot.map(h,k,c),ot.isFunction(c.opts.start)&&c.opts.start.call(t,c),ot.fx.timer(ot.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function G(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,o=0,s=e.toLowerCase().match(gt)||[];if(ot.isFunction(i))for(;n=s[o++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function N(t,e,i,n){function o(a){var l;return s[a]=!0,ot.each(t[a]||[],function(t,a){var c=a(e,i,n);return"string"!=typeof c||r||s[c]?r?!(l=c):void 0:(e.dataTypes.unshift(c),o(c),!1)}),l}var s={},r=t===ze;return o(e.dataTypes[0])||!s["*"]&&o("*")}function O(t,e){var i,n,o=ot.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((o[n]?t:i||(i={}))[n]=e[n]);return i&&ot.extend(!0,t,i),t}function J(t,e,i){for(var n,o,s,r,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=t.mimeType||e.getResponseHeader("Content-Type"));if(o)for(r in a)if(a[r]&&a[r].test(o)){l.unshift(r);break}if(l[0]in i)s=l[0];else{for(r in i){if(!l[0]||t.converters[r+" "+l[0]]){s=r;break}n||(n=r)}s=s||n}return s?(s!==l[0]&&l.unshift(s),i[s]):void 0}function z(t,e,i,n){var o,s,r,a,l,c={},h=t.dataTypes.slice();if(h[1])for(r in t.converters)c[r.toLowerCase()]=t.converters[r];for(s=h.shift();s;)if(t.responseFields[s]&&(i[t.responseFields[s]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=h.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(r=c[l+" "+s]||c["* "+s],!r)for(o in c)if(a=o.split(" "),a[1]===s&&(r=c[l+" "+a[0]]||c["* "+a[0]])){r===!0?r=c[o]:c[o]!==!0&&(s=a[0],h.unshift(a[1]));break}if(r!==!0)if(r&&t["throws"])e=r(e);else try{e=r(e)}catch(u){return{state:"parsererror",error:r?u:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}function $(t,e,i,n){var o;if(ot.isArray(e))ot.each(e,function(e,o){i||Ue.test(t)?n(t,o):$(t+"["+("object"==typeof o?e:"")+"]",o,i,n)});else if(i||"object"!==ot.type(e))n(t,e);else for(o in e)$(t+"["+o+"]",e[o],i,n)}function q(){try{return new t.XMLHttpRequest}catch(e){}}function W(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function U(t){return ot.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var H=[],X=H.slice,K=H.concat,Y=H.push,Z=H.indexOf,Q={},tt=Q.toString,et=Q.hasOwnProperty,it={},nt="1.11.2",ot=function(t,e){return new ot.fn.init(t,e)},st=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rt=/^-ms-/,at=/-([\da-z])/gi,lt=function(t,e){return e.toUpperCase()};ot.fn=ot.prototype={jquery:nt,constructor:ot,selector:"",length:0,toArray:function(){return X.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:X.call(this)},pushStack:function(t){var e=ot.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return ot.each(this,t,e)},map:function(t){return this.pushStack(ot.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Y,sort:H.sort,splice:H.splice},ot.extend=ot.fn.extend=function(){var t,e,i,n,o,s,r=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[a]||{},a++),"object"==typeof r||ot.isFunction(r)||(r={}),a===l&&(r=this,a--);l>a;a++)if(null!=(o=arguments[a]))for(n in o)t=r[n],i=o[n],r!==i&&(c&&i&&(ot.isPlainObject(i)||(e=ot.isArray(i)))?(e?(e=!1,s=t&&ot.isArray(t)?t:[]):s=t&&ot.isPlainObject(t)?t:{},r[n]=ot.extend(c,s,i)):void 0!==i&&(r[n]=i));return r},ot.extend({expando:"jQuery"+(nt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===ot.type(t)},isArray:Array.isArray||function(t){return"array"===ot.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!ot.isArray(t)&&t-parseFloat(t)+1>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==ot.type(t)||t.nodeType||ot.isWindow(t))return!1;try{if(t.constructor&&!et.call(t,"constructor")&&!et.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(it.ownLast)for(e in t)return et.call(t,e);for(e in t);return void 0===e||et.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Q[tt.call(t)]||"object":typeof t},globalEval:function(e){e&&ot.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(rt,"ms-").replace(at,lt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var o,s=0,r=t.length,a=i(t);if(n){if(a)for(;r>s&&(o=e.apply(t[s],n),o!==!1);s++);else for(s in t)if(o=e.apply(t[s],n),o===!1)break}else if(a)for(;r>s&&(o=e.call(t[s],s,t[s]),o!==!1);s++);else for(s in t)if(o=e.call(t[s],s,t[s]),o===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(st,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?ot.merge(n,"string"==typeof t?[t]:t):Y.call(n,t)),n},inArray:function(t,e,i){var n;if(e){if(Z)return Z.call(e,t,i);for(n=e.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,e){for(var i=+e.length,n=0,o=t.length;i>n;)t[o++]=e[n++];if(i!==i)for(;void 0!==e[n];)t[o++]=e[n++];return t.length=o,t},grep:function(t,e,i){for(var n,o=[],s=0,r=t.length,a=!i;r>s;s++)n=!e(t[s],s),n!==a&&o.push(t[s]);return o},map:function(t,e,n){var o,s=0,r=t.length,a=i(t),l=[];if(a)for(;r>s;s++)o=e(t[s],s,n),null!=o&&l.push(o);else for(s in t)o=e(t[s],s,n),null!=o&&l.push(o);return K.apply([],l)},guid:1,proxy:function(t,e){var i,n,o;return"string"==typeof e&&(o=t[e],e=t,t=o),ot.isFunction(t)?(i=X.call(arguments,2),n=function(){return t.apply(e||this,i.concat(X.call(arguments)))},n.guid=t.guid=t.guid||ot.guid++,n):void 0},now:function(){return+new Date},support:it}),ot.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Q["[object "+e+"]"]=e.toLowerCase()});var ct=/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */
function(t){function e(t,e,i,n){var o,s,r,a,l,c,u,p,_,d;if((e?e.ownerDocument||e:N)!==L&&V(e),e=e||L,i=i||[],a=e.nodeType,"string"!=typeof t||!t||1!==a&&9!==a&&11!==a)return i;if(!n&&P){if(11!==a&&(o=xt.exec(t)))if(r=o[1]){if(9===a){if(s=e.getElementById(r),!s||!s.parentNode)return i;if(s.id===r)return i.push(s),i}else if(e.ownerDocument&&(s=e.ownerDocument.getElementById(r))&&R(e,s)&&s.id===r)return i.push(s),i}else{if(o[2])return Z.apply(i,e.getElementsByTagName(t)),i;if((r=o[3])&&b.getElementsByClassName)return Z.apply(i,e.getElementsByClassName(r)),i}if(b.qsa&&(!k||!k.test(t))){if(p=u=G,_=e,d=1!==a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=S(t),(u=e.getAttribute("id"))?p=u.replace(vt,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+m(c[l]);_=gt.test(t)&&h(e.parentNode)||e,d=c.join(",")}if(d)try{return Z.apply(i,_.querySelectorAll(d)),i}catch(f){}finally{u||e.removeAttribute("id")}}}return A(t.replace(lt,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>w.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[G]=!0,t}function o(t){var e=L.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e){for(var i=t.split("|"),n=t.length;n--;)w.attrHandle[i[n]]=e}function r(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||U)-(~t.sourceIndex||U);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function l(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function c(t){return n(function(e){return e=+e,n(function(i,n){for(var o,s=t([],i.length,e),r=s.length;r--;)i[o=s[r]]&&(i[o]=!(n[o]=i[o]))})})}function h(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function u(){}function m(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function p(t,e,i){var n=e.dir,o=i&&"parentNode"===n,s=J++;return e.first?function(e,i,s){for(;e=e[n];)if(1===e.nodeType||o)return t(e,i,s)}:function(e,i,r){var a,l,c=[O,s];if(r){for(;e=e[n];)if((1===e.nodeType||o)&&t(e,i,r))return!0}else for(;e=e[n];)if(1===e.nodeType||o){if(l=e[G]||(e[G]={}),(a=l[n])&&a[0]===O&&a[1]===s)return c[2]=a[2];if(l[n]=c,c[2]=t(e,i,r))return!0}}}function _(t){return t.length>1?function(e,i,n){for(var o=t.length;o--;)if(!t[o](e,i,n))return!1;return!0}:t[0]}function d(t,i,n){for(var o=0,s=i.length;s>o;o++)e(t,i[o],n);return n}function f(t,e,i,n,o){for(var s,r=[],a=0,l=t.length,c=null!=e;l>a;a++)(s=t[a])&&(!i||i(s,n,o))&&(r.push(s),c&&e.push(a));return r}function y(t,e,i,o,s,r){return o&&!o[G]&&(o=y(o)),s&&!s[G]&&(s=y(s,r)),n(function(n,r,a,l){var c,h,u,m=[],p=[],_=r.length,y=n||d(e||"*",a.nodeType?[a]:a,[]),x=!t||!n&&e?y:f(y,m,t,a,l),g=i?s||(n?t:_||o)?[]:r:x;if(i&&i(x,g,a,l),o)for(c=f(g,p),o(c,[],a,l),h=c.length;h--;)(u=c[h])&&(g[p[h]]=!(x[p[h]]=u));if(n){if(s||t){if(s){for(c=[],h=g.length;h--;)(u=g[h])&&c.push(x[h]=u);s(null,g=[],c,l)}for(h=g.length;h--;)(u=g[h])&&(c=s?tt(n,u):m[h])>-1&&(n[c]=!(r[c]=u))}}else g=f(g===r?g.splice(_,g.length):g),s?s(null,r,g,l):Z.apply(r,g)})}function x(t){for(var e,i,n,o=t.length,s=w.relative[t[0].type],r=s||w.relative[" "],a=s?1:0,l=p(function(t){return t===e},r,!0),c=p(function(t){return tt(e,t)>-1},r,!0),h=[function(t,i,n){var o=!s&&(n||i!==M)||((e=i).nodeType?l(t,i,n):c(t,i,n));return e=null,o}];o>a;a++)if(i=w.relative[t[a].type])h=[p(_(h),i)];else{if(i=w.filter[t[a].type].apply(null,t[a].matches),i[G]){for(n=++a;o>n&&!w.relative[t[n].type];n++);return y(a>1&&_(h),a>1&&m(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(lt,"$1"),i,n>a&&x(t.slice(a,n)),o>n&&x(t=t.slice(n)),o>n&&m(t))}h.push(i)}return _(h)}function g(t,i){var o=i.length>0,s=t.length>0,r=function(n,r,a,l,c){var h,u,m,p=0,_="0",d=n&&[],y=[],x=M,g=n||s&&w.find.TAG("*",c),v=O+=null==x?1:Math.random()||.1,b=g.length;for(c&&(M=r!==L&&r);_!==b&&null!=(h=g[_]);_++){if(s&&h){for(u=0;m=t[u++];)if(m(h,r,a)){l.push(h);break}c&&(O=v)}o&&((h=!m&&h)&&p--,n&&d.push(h))}if(p+=_,o&&_!==p){for(u=0;m=i[u++];)m(d,y,r,a);if(n){if(p>0)for(;_--;)d[_]||y[_]||(y[_]=K.call(l));y=f(y)}Z.apply(l,y),c&&!n&&y.length>0&&p+i.length>1&&e.uniqueSort(l)}return c&&(O=v,M=x),d};return o?n(r):r}var v,b,w,C,D,S,B,A,M,T,I,V,L,E,P,k,F,j,R,G="sizzle"+1*new Date,N=t.document,O=0,J=0,z=i(),$=i(),q=i(),W=function(t,e){return t===e&&(I=!0),0},U=1<<31,H={}.hasOwnProperty,X=[],K=X.pop,Y=X.push,Z=X.push,Q=X.slice,tt=function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",nt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ot=nt.replace("w","w#"),st="\\["+it+"*("+nt+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ot+"))|)"+it+"*\\]",rt=":("+nt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+st+")*)|.*)\\)|)",at=new RegExp(it+"+","g"),lt=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),ct=new RegExp("^"+it+"*,"+it+"*"),ht=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ut=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),mt=new RegExp(rt),pt=new RegExp("^"+ot+"$"),_t={ID:new RegExp("^#("+nt+")"),CLASS:new RegExp("^\\.("+nt+")"),TAG:new RegExp("^("+nt.replace("w","w*")+")"),ATTR:new RegExp("^"+st),PSEUDO:new RegExp("^"+rt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},dt=/^(?:input|select|textarea|button)$/i,ft=/^h\d$/i,yt=/^[^{]+\{\s*\[native \w/,xt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gt=/[+~]/,vt=/'|\\/g,bt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),wt=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},Ct=function(){V()};try{Z.apply(X=Q.call(N.childNodes),N.childNodes),X[N.childNodes.length].nodeType}catch(Dt){Z={apply:X.length?function(t,e){Y.apply(t,Q.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}b=e.support={},D=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},V=e.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:N;return n!==L&&9===n.nodeType&&n.documentElement?(L=n,E=n.documentElement,i=n.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",Ct,!1):i.attachEvent&&i.attachEvent("onunload",Ct)),P=!D(n),b.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),b.getElementsByTagName=o(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),b.getElementsByClassName=yt.test(n.getElementsByClassName),b.getById=o(function(t){return E.appendChild(t).id=G,!n.getElementsByName||!n.getElementsByName(G).length}),b.getById?(w.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&P){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},w.filter.ID=function(t){var e=t.replace(bt,wt);return function(t){return t.getAttribute("id")===e}}):(delete w.find.ID,w.filter.ID=function(t){var e=t.replace(bt,wt);return function(t){var i="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}}),w.find.TAG=b.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):b.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],o=0,s=e.getElementsByTagName(t);if("*"===t){for(;i=s[o++];)1===i.nodeType&&n.push(i);return n}return s},w.find.CLASS=b.getElementsByClassName&&function(t,e){return P?e.getElementsByClassName(t):void 0},F=[],k=[],(b.qsa=yt.test(n.querySelectorAll))&&(o(function(t){E.appendChild(t).innerHTML="<a id='"+G+"'></a><select id='"+G+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&k.push("[*^$]="+it+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||k.push("\\["+it+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+G+"-]").length||k.push("~="),t.querySelectorAll(":checked").length||k.push(":checked"),t.querySelectorAll("a#"+G+"+*").length||k.push(".#.+[+~]")}),o(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&k.push("name"+it+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||k.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),k.push(",.*:")})),(b.matchesSelector=yt.test(j=E.matches||E.webkitMatchesSelector||E.mozMatchesSelector||E.oMatchesSelector||E.msMatchesSelector))&&o(function(t){b.disconnectedMatch=j.call(t,"div"),j.call(t,"[s!='']:x"),F.push("!=",rt)}),k=k.length&&new RegExp(k.join("|")),F=F.length&&new RegExp(F.join("|")),e=yt.test(E.compareDocumentPosition),R=e||yt.test(E.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},W=e?function(t,e){if(t===e)return I=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!b.sortDetached&&e.compareDocumentPosition(t)===i?t===n||t.ownerDocument===N&&R(N,t)?-1:e===n||e.ownerDocument===N&&R(N,e)?1:T?tt(T,t)-tt(T,e):0:4&i?-1:1)}:function(t,e){if(t===e)return I=!0,0;var i,o=0,s=t.parentNode,a=e.parentNode,l=[t],c=[e];if(!s||!a)return t===n?-1:e===n?1:s?-1:a?1:T?tt(T,t)-tt(T,e):0;if(s===a)return r(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)c.unshift(i);for(;l[o]===c[o];)o++;return o?r(l[o],c[o]):l[o]===N?-1:c[o]===N?1:0},n):L},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==L&&V(t),i=i.replace(ut,"='$1']"),b.matchesSelector&&P&&(!F||!F.test(i))&&(!k||!k.test(i)))try{var n=j.call(t,i);if(n||b.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(o){}return e(i,L,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==L&&V(t),R(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==L&&V(t);var i=w.attrHandle[e.toLowerCase()],n=i&&H.call(w.attrHandle,e.toLowerCase())?i(t,e,!P):void 0;return void 0!==n?n:b.attributes||!P?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,o=0;if(I=!b.detectDuplicates,T=!b.sortStable&&t.slice(0),t.sort(W),I){for(;e=t[o++];)e===t[o]&&(n=i.push(o));for(;n--;)t.splice(i[n],1)}return T=null,t},C=e.getText=function(t){var e,i="",n=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=C(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[n++];)i+=C(e);return i},w=e.selectors={cacheLength:50,createPseudo:n,match:_t,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(bt,wt),t[3]=(t[3]||t[4]||t[5]||"").replace(bt,wt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return _t.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&mt.test(i)&&(e=S(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(bt,wt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+it+")"+t+"("+it+"|$)"))&&z(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(o){var s=e.attr(o,t);return null==s?"!="===i:i?(s+="","="===i?s===n:"!="===i?s!==n:"^="===i?n&&0===s.indexOf(n):"*="===i?n&&s.indexOf(n)>-1:"$="===i?n&&s.slice(-n.length)===n:"~="===i?(" "+s.replace(at," ")+" ").indexOf(n)>-1:"|="===i?s===n||s.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,i,n,o){var s="nth"!==t.slice(0,3),r="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===o?function(t){return!!t.parentNode}:function(e,i,l){var c,h,u,m,p,_,d=s!==r?"nextSibling":"previousSibling",f=e.parentNode,y=a&&e.nodeName.toLowerCase(),x=!l&&!a;if(f){if(s){for(;d;){for(u=e;u=u[d];)if(a?u.nodeName.toLowerCase()===y:1===u.nodeType)return!1;_=d="only"===t&&!_&&"nextSibling"}return!0}if(_=[r?f.firstChild:f.lastChild],r&&x){for(h=f[G]||(f[G]={}),c=h[t]||[],p=c[0]===O&&c[1],m=c[0]===O&&c[2],u=p&&f.childNodes[p];u=++p&&u&&u[d]||(m=p=0)||_.pop();)if(1===u.nodeType&&++m&&u===e){h[t]=[O,p,m];break}}else if(x&&(c=(e[G]||(e[G]={}))[t])&&c[0]===O)m=c[1];else for(;(u=++p&&u&&u[d]||(m=p=0)||_.pop())&&((a?u.nodeName.toLowerCase()!==y:1!==u.nodeType)||!++m||(x&&((u[G]||(u[G]={}))[t]=[O,m]),u!==e)););return m-=o,m===n||m%n===0&&m/n>=0}}},PSEUDO:function(t,i){var o,s=w.pseudos[t]||w.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return s[G]?s(i):s.length>1?(o=[t,t,"",i],w.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,o=s(t,i),r=o.length;r--;)n=tt(t,o[r]),t[n]=!(e[n]=o[r])}):function(t){return s(t,0,o)}):s}},pseudos:{not:n(function(t){var e=[],i=[],o=B(t.replace(lt,"$1"));return o[G]?n(function(t,e,i,n){for(var s,r=o(t,null,n,[]),a=t.length;a--;)(s=r[a])&&(t[a]=!(e[a]=s))}):function(t,n,s){return e[0]=t,o(e,null,s,i),e[0]=null,!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return t=t.replace(bt,wt),function(e){return(e.textContent||e.innerText||C(e)).indexOf(t)>-1}}),lang:n(function(t){return pt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(bt,wt).toLowerCase(),function(e){var i;do if(i=P?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===E},focus:function(t){return t===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return ft.test(t.nodeName)},input:function(t){return dt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,i){return[0>i?i+e:i]}),even:c(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:c(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:c(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:c(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}},w.pseudos.nth=w.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[v]=a(v);for(v in{submit:!0,reset:!0})w.pseudos[v]=l(v);return u.prototype=w.filters=w.pseudos,w.setFilters=new u,S=e.tokenize=function(t,i){var n,o,s,r,a,l,c,h=$[t+" "];if(h)return i?0:h.slice(0);for(a=t,l=[],c=w.preFilter;a;){(!n||(o=ct.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),l.push(s=[])),n=!1,(o=ht.exec(a))&&(n=o.shift(),s.push({value:n,type:o[0].replace(lt," ")}),a=a.slice(n.length));for(r in w.filter)!(o=_t[r].exec(a))||c[r]&&!(o=c[r](o))||(n=o.shift(),s.push({value:n,type:r,matches:o}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):$(t,l).slice(0)},B=e.compile=function(t,e){var i,n=[],o=[],s=q[t+" "];if(!s){for(e||(e=S(t)),i=e.length;i--;)s=x(e[i]),s[G]?n.push(s):o.push(s);s=q(t,g(o,n)),s.selector=t}return s},A=e.select=function(t,e,i,n){var o,s,r,a,l,c="function"==typeof t&&t,u=!n&&S(t=c.selector||t);if(i=i||[],1===u.length){if(s=u[0]=u[0].slice(0),s.length>2&&"ID"===(r=s[0]).type&&b.getById&&9===e.nodeType&&P&&w.relative[s[1].type]){if(e=(w.find.ID(r.matches[0].replace(bt,wt),e)||[])[0],!e)return i;c&&(e=e.parentNode),t=t.slice(s.shift().value.length)}for(o=_t.needsContext.test(t)?0:s.length;o--&&(r=s[o],!w.relative[a=r.type]);)if((l=w.find[a])&&(n=l(r.matches[0].replace(bt,wt),gt.test(s[0].type)&&h(e.parentNode)||e))){if(s.splice(o,1),t=n.length&&m(s),!t)return Z.apply(i,n),i;break}}return(c||B(t,u))(n,e,!P,i,gt.test(t)&&h(e.parentNode)||e),i},b.sortStable=G.split("").sort(W).join("")===G,b.detectDuplicates=!!I,V(),b.sortDetached=o(function(t){return 1&t.compareDocumentPosition(L.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||s("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),b.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||s("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||s(et,function(t,e,i){var n;return i?void 0:t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);ot.find=ct,ot.expr=ct.selectors,ot.expr[":"]=ot.expr.pseudos,ot.unique=ct.uniqueSort,ot.text=ct.getText,ot.isXMLDoc=ct.isXML,ot.contains=ct.contains;var ht=ot.expr.match.needsContext,ut=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,mt=/^.[^:#\[\.,]*$/;ot.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?ot.find.matchesSelector(n,t)?[n]:[]:ot.find.matches(t,ot.grep(e,function(t){return 1===t.nodeType}))},ot.fn.extend({find:function(t){var e,i=[],n=this,o=n.length;if("string"!=typeof t)return this.pushStack(ot(t).filter(function(){for(e=0;o>e;e++)if(ot.contains(n[e],this))return!0}));for(e=0;o>e;e++)ot.find(t,n[e],i);return i=this.pushStack(o>1?ot.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&ht.test(t)?ot(t):t||[],!1).length}});var pt,_t=t.document,dt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ft=ot.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:dt.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||pt).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof ot?e[0]:e,ot.merge(this,ot.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:_t,!0)),ut.test(i[1])&&ot.isPlainObject(e))for(i in e)ot.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if(n=_t.getElementById(i[2]),n&&n.parentNode){if(n.id!==i[2])return pt.find(t);this.length=1,this[0]=n}return this.context=_t,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):ot.isFunction(t)?"undefined"!=typeof pt.ready?pt.ready(t):t(ot):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),ot.makeArray(t,this))};ft.prototype=ot.fn,pt=ot(_t);var yt=/^(?:parents|prev(?:Until|All))/,xt={children:!0,contents:!0,next:!0,prev:!0};ot.extend({dir:function(t,e,i){for(var n=[],o=t[e];o&&9!==o.nodeType&&(void 0===i||1!==o.nodeType||!ot(o).is(i));)1===o.nodeType&&n.push(o),o=o[e];return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),ot.fn.extend({has:function(t){var e,i=ot(t,this),n=i.length;return this.filter(function(){for(e=0;n>e;e++)if(ot.contains(this,i[e]))return!0})},closest:function(t,e){for(var i,n=0,o=this.length,s=[],r=ht.test(t)||"string"!=typeof t?ot(t,e||this.context):0;o>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&ot.find.matchesSelector(i,t))){s.push(i);break}return this.pushStack(s.length>1?ot.unique(s):s)},index:function(t){return t?"string"==typeof t?ot.inArray(this[0],ot(t)):ot.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(ot.unique(ot.merge(this.get(),ot(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ot.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ot.dir(t,"parentNode")},parentsUntil:function(t,e,i){return ot.dir(t,"parentNode",i)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")},nextAll:function(t){return ot.dir(t,"nextSibling")},prevAll:function(t){return ot.dir(t,"previousSibling")},nextUntil:function(t,e,i){return ot.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return ot.dir(t,"previousSibling",i)},siblings:function(t){return ot.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return ot.sibling(t.firstChild)},contents:function(t){return ot.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:ot.merge([],t.childNodes)}},function(t,e){ot.fn[t]=function(i,n){var o=ot.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=ot.filter(n,o)),this.length>1&&(xt[t]||(o=ot.unique(o)),yt.test(t)&&(o=o.reverse())),this.pushStack(o)}});var gt=/\S+/g,vt={};ot.Callbacks=function(t){t="string"==typeof t?vt[t]||s(t):ot.extend({},t);var e,i,n,o,r,a,l=[],c=!t.once&&[],h=function(s){for(i=t.memory&&s,n=!0,r=a||0,a=0,o=l.length,e=!0;l&&o>r;r++)if(l[r].apply(s[0],s[1])===!1&&t.stopOnFalse){i=!1;break}e=!1,l&&(c?c.length&&h(c.shift()):i?l=[]:u.disable())},u={add:function(){if(l){var n=l.length;!function s(e){ot.each(e,function(e,i){var n=ot.type(i);"function"===n?t.unique&&u.has(i)||l.push(i):i&&i.length&&"string"!==n&&s(i)})}(arguments),e?o=l.length:i&&(a=n,h(i))}return this},remove:function(){return l&&ot.each(arguments,function(t,i){for(var n;(n=ot.inArray(i,l,n))>-1;)l.splice(n,1),e&&(o>=n&&o--,r>=n&&r--)}),this},has:function(t){return t?ot.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=c=i=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,i||u.disable(),this},locked:function(){return!c},fireWith:function(t,i){return!l||n&&!c||(i=i||[],i=[t,i.slice?i.slice():i],e?c.push(i):h(i)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},ot.extend({Deferred:function(t){var e=[["resolve","done",ot.Callbacks("once memory"),"resolved"],["reject","fail",ot.Callbacks("once memory"),"rejected"],["notify","progress",ot.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return ot.Deferred(function(i){ot.each(e,function(e,s){var r=ot.isFunction(t[e])&&t[e];o[s[1]](function(){var t=r&&r.apply(this,arguments);t&&ot.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[s[0]+"With"](this===n?i.promise():this,r?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?ot.extend(t,n):n}},o={};return n.pipe=n.then,ot.each(e,function(t,s){var r=s[2],a=s[3];n[s[1]]=r.add,a&&r.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),o[s[0]]=function(){return o[s[0]+"With"](this===o?n:this,arguments),this},o[s[0]+"With"]=r.fireWith}),n.promise(o),t&&t.call(o,o),o},when:function(t){var e,i,n,o=0,s=X.call(arguments),r=s.length,a=1!==r||t&&ot.isFunction(t.promise)?r:0,l=1===a?t:ot.Deferred(),c=function(t,i,n){return function(o){i[t]=this,n[t]=arguments.length>1?X.call(arguments):o,n===e?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(r>1)for(e=new Array(r),i=new Array(r),n=new Array(r);r>o;o++)s[o]&&ot.isFunction(s[o].promise)?s[o].promise().done(c(o,n,s)).fail(l.reject).progress(c(o,i,e)):--a;return a||l.resolveWith(n,s),l.promise()}});var bt;ot.fn.ready=function(t){return ot.ready.promise().done(t),this},ot.extend({isReady:!1,readyWait:1,holdReady:function(t){t?ot.readyWait++:ot.ready(!0)},ready:function(t){if(t===!0?!--ot.readyWait:!ot.isReady){if(!_t.body)return setTimeout(ot.ready);ot.isReady=!0,t!==!0&&--ot.readyWait>0||(bt.resolveWith(_t,[ot]),ot.fn.triggerHandler&&(ot(_t).triggerHandler("ready"),ot(_t).off("ready")))}}}),ot.ready.promise=function(e){if(!bt)if(bt=ot.Deferred(),"complete"===_t.readyState)setTimeout(ot.ready);else if(_t.addEventListener)_t.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1);else{_t.attachEvent("onreadystatechange",a),t.attachEvent("onload",a);var i=!1;try{i=null==t.frameElement&&_t.documentElement}catch(n){}i&&i.doScroll&&!function o(){if(!ot.isReady){try{i.doScroll("left")}catch(t){return setTimeout(o,50)}r(),ot.ready()}}()}return bt.promise(e)};var wt,Ct="undefined";for(wt in ot(it))break;it.ownLast="0"!==wt,it.inlineBlockNeedsLayout=!1,ot(function(){var t,e,i,n;i=_t.getElementsByTagName("body")[0],i&&i.style&&(e=_t.createElement("div"),n=_t.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),typeof e.style.zoom!==Ct&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",it.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(i.style.zoom=1)),i.removeChild(n))}),function(){var t=_t.createElement("div");if(null==it.deleteExpando){it.deleteExpando=!0;try{delete t.test}catch(e){it.deleteExpando=!1}}t=null}(),ot.acceptData=function(t){var e=ot.noData[(t.nodeName+" ").toLowerCase()],i=+t.nodeType||1;return 1!==i&&9!==i?!1:!e||e!==!0&&t.getAttribute("classid")===e};var Dt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,St=/([A-Z])/g;ot.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?ot.cache[t[ot.expando]]:t[ot.expando],!!t&&!c(t)},data:function(t,e,i){return h(t,e,i)},removeData:function(t,e){return u(t,e)},_data:function(t,e,i){return h(t,e,i,!0)},_removeData:function(t,e){return u(t,e,!0)}}),ot.fn.extend({data:function(t,e){var i,n,o,s=this[0],r=s&&s.attributes;if(void 0===t){if(this.length&&(o=ot.data(s),1===s.nodeType&&!ot._data(s,"parsedAttrs"))){for(i=r.length;i--;)r[i]&&(n=r[i].name,0===n.indexOf("data-")&&(n=ot.camelCase(n.slice(5)),l(s,n,o[n])));ot._data(s,"parsedAttrs",!0)}return o}return"object"==typeof t?this.each(function(){ot.data(this,t)}):arguments.length>1?this.each(function(){ot.data(this,t,e)}):s?l(s,t,ot.data(s,t)):void 0},removeData:function(t){return this.each(function(){ot.removeData(this,t)})}}),ot.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=ot._data(t,e),i&&(!n||ot.isArray(i)?n=ot._data(t,e,ot.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=ot.queue(t,e),n=i.length,o=i.shift(),s=ot._queueHooks(t,e),r=function(){ot.dequeue(t,e)};"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===e&&i.unshift("inprogress"),delete s.stop,o.call(t,r,s)),!n&&s&&s.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return ot._data(t,i)||ot._data(t,i,{empty:ot.Callbacks("once memory").add(function(){ot._removeData(t,e+"queue"),ot._removeData(t,i)})})}}),ot.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?ot.queue(this[0],t):void 0===e?this:this.each(function(){var i=ot.queue(this,t,e);ot._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&ot.dequeue(this,t)})},dequeue:function(t){return this.each(function(){ot.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,o=ot.Deferred(),s=this,r=this.length,a=function(){--n||o.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)i=ot._data(s[r],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),o.promise(e)}});var Bt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,At=["Top","Right","Bottom","Left"],Mt=function(t,e){return t=e||t,"none"===ot.css(t,"display")||!ot.contains(t.ownerDocument,t)},Tt=ot.access=function(t,e,i,n,o,s,r){var a=0,l=t.length,c=null==i;if("object"===ot.type(i)){o=!0;for(a in i)ot.access(t,e,a,i[a],!0,s,r)}else if(void 0!==n&&(o=!0,ot.isFunction(n)||(r=!0),c&&(r?(e.call(t,n),e=null):(c=e,e=function(t,e,i){return c.call(ot(t),i)})),e))for(;l>a;a++)e(t[a],i,r?n:n.call(t[a],a,e(t[a],i)));return o?t:c?e.call(t):l?e(t[0],i):s},It=/^(?:checkbox|radio)$/i;!function(){var t=_t.createElement("input"),e=_t.createElement("div"),i=_t.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",it.leadingWhitespace=3===e.firstChild.nodeType,it.tbody=!e.getElementsByTagName("tbody").length,it.htmlSerialize=!!e.getElementsByTagName("link").length,it.html5Clone="<:nav></:nav>"!==_t.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,i.appendChild(t),it.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",it.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,i.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",it.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,it.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){it.noCloneEvent=!1}),e.cloneNode(!0).click()),null==it.deleteExpando){it.deleteExpando=!0;try{delete e.test}catch(n){it.deleteExpando=!1}}}(),function(){var e,i,n=_t.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})i="on"+e,(it[e+"Bubbles"]=i in t)||(n.setAttribute(i,"t"),it[e+"Bubbles"]=n.attributes[i].expando===!1);n=null}();var Vt=/^(?:input|select|textarea)$/i,Lt=/^key/,Et=/^(?:mouse|pointer|contextmenu)|click/,Pt=/^(?:focusinfocus|focusoutblur)$/,kt=/^([^.]*)(?:\.(.+)|)$/;ot.event={global:{},add:function(t,e,i,n,o){var s,r,a,l,c,h,u,m,p,_,d,f=ot._data(t);if(f){for(i.handler&&(l=i,i=l.handler,o=l.selector),i.guid||(i.guid=ot.guid++),(r=f.events)||(r=f.events={}),(h=f.handle)||(h=f.handle=function(t){return typeof ot===Ct||t&&ot.event.triggered===t.type?void 0:ot.event.dispatch.apply(h.elem,arguments)},h.elem=t),e=(e||"").match(gt)||[""],a=e.length;a--;)s=kt.exec(e[a])||[],p=d=s[1],_=(s[2]||"").split(".").sort(),p&&(c=ot.event.special[p]||{},p=(o?c.delegateType:c.bindType)||p,c=ot.event.special[p]||{},u=ot.extend({type:p,origType:d,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&ot.expr.match.needsContext.test(o),namespace:_.join(".")},l),(m=r[p])||(m=r[p]=[],m.delegateCount=0,c.setup&&c.setup.call(t,n,_,h)!==!1||(t.addEventListener?t.addEventListener(p,h,!1):t.attachEvent&&t.attachEvent("on"+p,h))),c.add&&(c.add.call(t,u),u.handler.guid||(u.handler.guid=i.guid)),o?m.splice(m.delegateCount++,0,u):m.push(u),ot.event.global[p]=!0);t=null}},remove:function(t,e,i,n,o){var s,r,a,l,c,h,u,m,p,_,d,f=ot.hasData(t)&&ot._data(t);if(f&&(h=f.events)){for(e=(e||"").match(gt)||[""],c=e.length;c--;)if(a=kt.exec(e[c])||[],p=d=a[1],_=(a[2]||"").split(".").sort(),p){for(u=ot.event.special[p]||{},p=(n?u.delegateType:u.bindType)||p,m=h[p]||[],a=a[2]&&new RegExp("(^|\\.)"+_.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=s=m.length;s--;)r=m[s],!o&&d!==r.origType||i&&i.guid!==r.guid||a&&!a.test(r.namespace)||n&&n!==r.selector&&("**"!==n||!r.selector)||(m.splice(s,1),r.selector&&m.delegateCount--,u.remove&&u.remove.call(t,r));l&&!m.length&&(u.teardown&&u.teardown.call(t,_,f.handle)!==!1||ot.removeEvent(t,p,f.handle),delete h[p])}else for(p in h)ot.event.remove(t,p+e[c],i,n,!0);ot.isEmptyObject(h)&&(delete f.handle,ot._removeData(t,"events"))}},trigger:function(e,i,n,o){var s,r,a,l,c,h,u,m=[n||_t],p=et.call(e,"type")?e.type:e,_=et.call(e,"namespace")?e.namespace.split("."):[];if(a=h=n=n||_t,3!==n.nodeType&&8!==n.nodeType&&!Pt.test(p+ot.event.triggered)&&(p.indexOf(".")>=0&&(_=p.split("."),p=_.shift(),_.sort()),r=p.indexOf(":")<0&&"on"+p,e=e[ot.expando]?e:new ot.Event(p,"object"==typeof e&&e),
e.isTrigger=o?2:3,e.namespace=_.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+_.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:ot.makeArray(i,[e]),c=ot.event.special[p]||{},o||!c.trigger||c.trigger.apply(n,i)!==!1)){if(!o&&!c.noBubble&&!ot.isWindow(n)){for(l=c.delegateType||p,Pt.test(l+p)||(a=a.parentNode);a;a=a.parentNode)m.push(a),h=a;h===(n.ownerDocument||_t)&&m.push(h.defaultView||h.parentWindow||t)}for(u=0;(a=m[u++])&&!e.isPropagationStopped();)e.type=u>1?l:c.bindType||p,s=(ot._data(a,"events")||{})[e.type]&&ot._data(a,"handle"),s&&s.apply(a,i),s=r&&a[r],s&&s.apply&&ot.acceptData(a)&&(e.result=s.apply(a,i),e.result===!1&&e.preventDefault());if(e.type=p,!o&&!e.isDefaultPrevented()&&(!c._default||c._default.apply(m.pop(),i)===!1)&&ot.acceptData(n)&&r&&n[p]&&!ot.isWindow(n)){h=n[r],h&&(n[r]=null),ot.event.triggered=p;try{n[p]()}catch(d){}ot.event.triggered=void 0,h&&(n[r]=h)}return e.result}},dispatch:function(t){t=ot.event.fix(t);var e,i,n,o,s,r=[],a=X.call(arguments),l=(ot._data(this,"events")||{})[t.type]||[],c=ot.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(r=ot.event.handlers.call(this,t,l),e=0;(o=r[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,s=0;(n=o.handlers[s++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(n.namespace))&&(t.handleObj=n,t.data=n.data,i=((ot.event.special[n.origType]||{}).handle||n.handler).apply(o.elem,a),void 0!==i&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,o,s,r=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(o=[],s=0;a>s;s++)n=e[s],i=n.selector+" ",void 0===o[i]&&(o[i]=n.needsContext?ot(i,this).index(l)>=0:ot.find(i,this,null,[l]).length),o[i]&&o.push(n);o.length&&r.push({elem:l,handlers:o})}return a<e.length&&r.push({elem:this,handlers:e.slice(a)}),r},fix:function(t){if(t[ot.expando])return t;var e,i,n,o=t.type,s=t,r=this.fixHooks[o];for(r||(this.fixHooks[o]=r=Et.test(o)?this.mouseHooks:Lt.test(o)?this.keyHooks:{}),n=r.props?this.props.concat(r.props):this.props,t=new ot.Event(s),e=n.length;e--;)i=n[e],t[i]=s[i];return t.target||(t.target=s.srcElement||_t),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,r.filter?r.filter(t,s):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,o,s=e.button,r=e.fromElement;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||_t,o=n.documentElement,i=n.body,t.pageX=e.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&r&&(t.relatedTarget=r===t.target?e.toElement:r),t.which||void 0===s||(t.which=1&s?1:2&s?3:4&s?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==_()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ot.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return ot.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var o=ot.extend(new ot.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?ot.event.trigger(o,null,e):ot.event.dispatch.call(e,o),o.isDefaultPrevented()&&i.preventDefault()}},ot.removeEvent=_t.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){var n="on"+e;t.detachEvent&&(typeof t[n]===Ct&&(t[n]=null),t.detachEvent(n,i))},ot.Event=function(t,e){return this instanceof ot.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?m:p):this.type=t,e&&ot.extend(this,e),this.timeStamp=t&&t.timeStamp||ot.now(),void(this[ot.expando]=!0)):new ot.Event(t,e)},ot.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=m,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=m,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=m,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},ot.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){ot.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,o=t.relatedTarget,s=t.handleObj;return(!o||o!==n&&!ot.contains(n,o))&&(t.type=s.origType,i=s.handler.apply(this,arguments),t.type=e),i}}}),it.submitBubbles||(ot.event.special.submit={setup:function(){return ot.nodeName(this,"form")?!1:void ot.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,i=ot.nodeName(e,"input")||ot.nodeName(e,"button")?e.form:void 0;i&&!ot._data(i,"submitBubbles")&&(ot.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),ot._data(i,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&ot.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return ot.nodeName(this,"form")?!1:void ot.event.remove(this,"._submit")}}),it.changeBubbles||(ot.event.special.change={setup:function(){return Vt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ot.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),ot.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),ot.event.simulate("change",this,t,!0)})),!1):void ot.event.add(this,"beforeactivate._change",function(t){var e=t.target;Vt.test(e.nodeName)&&!ot._data(e,"changeBubbles")&&(ot.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||ot.event.simulate("change",this.parentNode,t,!0)}),ot._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ot.event.remove(this,"._change"),!Vt.test(this.nodeName)}}),it.focusinBubbles||ot.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){ot.event.simulate(e,t.target,ot.event.fix(t),!0)};ot.event.special[e]={setup:function(){var n=this.ownerDocument||this,o=ot._data(n,e);o||n.addEventListener(t,i,!0),ot._data(n,e,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=ot._data(n,e)-1;o?ot._data(n,e,o):(n.removeEventListener(t,i,!0),ot._removeData(n,e))}}}),ot.fn.extend({on:function(t,e,i,n,o){var s,r;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(s in t)this.on(s,e,i,t[s],o);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),n===!1)n=p;else if(!n)return this;return 1===o&&(r=n,n=function(t){return ot().off(t),r.apply(this,arguments)},n.guid=r.guid||(r.guid=ot.guid++)),this.each(function(){ot.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,o;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,ot(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return(e===!1||"function"==typeof e)&&(i=e,e=void 0),i===!1&&(i=p),this.each(function(){ot.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){ot.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?ot.event.trigger(t,e,i,!0):void 0}});var Ft="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",jt=/ jQuery\d+="(?:null|\d+)"/g,Rt=new RegExp("<(?:"+Ft+")[\\s/>]","i"),Gt=/^\s+/,Nt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ot=/<([\w:]+)/,Jt=/<tbody/i,zt=/<|&#?\w+;/,$t=/<(?:script|style|link)/i,qt=/checked\s*(?:[^=]|=\s*.checked.)/i,Wt=/^$|\/(?:java|ecma)script/i,Ut=/^true\/(.*)/,Ht=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Xt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:it.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Kt=d(_t),Yt=Kt.appendChild(_t.createElement("div"));Xt.optgroup=Xt.option,Xt.tbody=Xt.tfoot=Xt.colgroup=Xt.caption=Xt.thead,Xt.th=Xt.td,ot.extend({clone:function(t,e,i){var n,o,s,r,a,l=ot.contains(t.ownerDocument,t);if(it.html5Clone||ot.isXMLDoc(t)||!Rt.test("<"+t.nodeName+">")?s=t.cloneNode(!0):(Yt.innerHTML=t.outerHTML,Yt.removeChild(s=Yt.firstChild)),!(it.noCloneEvent&&it.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ot.isXMLDoc(t)))for(n=f(s),a=f(t),r=0;null!=(o=a[r]);++r)n[r]&&C(o,n[r]);if(e)if(i)for(a=a||f(t),n=n||f(s),r=0;null!=(o=a[r]);r++)w(o,n[r]);else w(t,s);return n=f(s,"script"),n.length>0&&b(n,!l&&f(t,"script")),n=a=o=null,s},buildFragment:function(t,e,i,n){for(var o,s,r,a,l,c,h,u=t.length,m=d(e),p=[],_=0;u>_;_++)if(s=t[_],s||0===s)if("object"===ot.type(s))ot.merge(p,s.nodeType?[s]:s);else if(zt.test(s)){for(a=a||m.appendChild(e.createElement("div")),l=(Ot.exec(s)||["",""])[1].toLowerCase(),h=Xt[l]||Xt._default,a.innerHTML=h[1]+s.replace(Nt,"<$1></$2>")+h[2],o=h[0];o--;)a=a.lastChild;if(!it.leadingWhitespace&&Gt.test(s)&&p.push(e.createTextNode(Gt.exec(s)[0])),!it.tbody)for(s="table"!==l||Jt.test(s)?"<table>"!==h[1]||Jt.test(s)?0:a:a.firstChild,o=s&&s.childNodes.length;o--;)ot.nodeName(c=s.childNodes[o],"tbody")&&!c.childNodes.length&&s.removeChild(c);for(ot.merge(p,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=m.lastChild}else p.push(e.createTextNode(s));for(a&&m.removeChild(a),it.appendChecked||ot.grep(f(p,"input"),y),_=0;s=p[_++];)if((!n||-1===ot.inArray(s,n))&&(r=ot.contains(s.ownerDocument,s),a=f(m.appendChild(s),"script"),r&&b(a),i))for(o=0;s=a[o++];)Wt.test(s.type||"")&&i.push(s);return a=null,m},cleanData:function(t,e){for(var i,n,o,s,r=0,a=ot.expando,l=ot.cache,c=it.deleteExpando,h=ot.event.special;null!=(i=t[r]);r++)if((e||ot.acceptData(i))&&(o=i[a],s=o&&l[o])){if(s.events)for(n in s.events)h[n]?ot.event.remove(i,n):ot.removeEvent(i,n,s.handle);l[o]&&(delete l[o],c?delete i[a]:typeof i.removeAttribute!==Ct?i.removeAttribute(a):i[a]=null,H.push(o))}}}),ot.fn.extend({text:function(t){return Tt(this,function(t){return void 0===t?ot.text(this):this.empty().append((this[0]&&this[0].ownerDocument||_t).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=x(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=x(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?ot.filter(t,this):this,o=0;null!=(i=n[o]);o++)e||1!==i.nodeType||ot.cleanData(f(i)),i.parentNode&&(e&&ot.contains(i.ownerDocument,i)&&b(f(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&ot.cleanData(f(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&ot.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return ot.clone(this,t,e)})},html:function(t){return Tt(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(jt,""):void 0;if("string"==typeof t&&!$t.test(t)&&(it.htmlSerialize||!Rt.test(t))&&(it.leadingWhitespace||!Gt.test(t))&&!Xt[(Ot.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Nt,"<$1></$2>");try{for(;n>i;i++)e=this[i]||{},1===e.nodeType&&(ot.cleanData(f(e,!1)),e.innerHTML=t);e=0}catch(o){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,ot.cleanData(f(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=K.apply([],t);var i,n,o,s,r,a,l=0,c=this.length,h=this,u=c-1,m=t[0],p=ot.isFunction(m);if(p||c>1&&"string"==typeof m&&!it.checkClone&&qt.test(m))return this.each(function(i){var n=h.eq(i);p&&(t[0]=m.call(this,i,n.html())),n.domManip(t,e)});if(c&&(a=ot.buildFragment(t,this[0].ownerDocument,!1,this),i=a.firstChild,1===a.childNodes.length&&(a=i),i)){for(s=ot.map(f(a,"script"),g),o=s.length;c>l;l++)n=a,l!==u&&(n=ot.clone(n,!0,!0),o&&ot.merge(s,f(n,"script"))),e.call(this[l],n,l);if(o)for(r=s[s.length-1].ownerDocument,ot.map(s,v),l=0;o>l;l++)n=s[l],Wt.test(n.type||"")&&!ot._data(n,"globalEval")&&ot.contains(r,n)&&(n.src?ot._evalUrl&&ot._evalUrl(n.src):ot.globalEval((n.text||n.textContent||n.innerHTML||"").replace(Ht,"")));a=i=null}return this}}),ot.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){ot.fn[t]=function(t){for(var i,n=0,o=[],s=ot(t),r=s.length-1;r>=n;n++)i=n===r?this:this.clone(!0),ot(s[n])[e](i),Y.apply(o,i.get());return this.pushStack(o)}});var Zt,Qt={};!function(){var t;it.shrinkWrapBlocks=function(){if(null!=t)return t;t=!1;var e,i,n;return i=_t.getElementsByTagName("body")[0],i&&i.style?(e=_t.createElement("div"),n=_t.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),typeof e.style.zoom!==Ct&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(_t.createElement("div")).style.width="5px",t=3!==e.offsetWidth),i.removeChild(n),t):void 0}}();var te,ee,ie=/^margin/,ne=new RegExp("^("+Bt+")(?!px)[a-z%]+$","i"),oe=/^(top|right|bottom|left)$/;t.getComputedStyle?(te=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)},ee=function(t,e,i){var n,o,s,r,a=t.style;return i=i||te(t),r=i?i.getPropertyValue(e)||i[e]:void 0,i&&(""!==r||ot.contains(t.ownerDocument,t)||(r=ot.style(t,e)),ne.test(r)&&ie.test(e)&&(n=a.width,o=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=i.width,a.width=n,a.minWidth=o,a.maxWidth=s)),void 0===r?r:r+""}):_t.documentElement.currentStyle&&(te=function(t){return t.currentStyle},ee=function(t,e,i){var n,o,s,r,a=t.style;return i=i||te(t),r=i?i[e]:void 0,null==r&&a&&a[e]&&(r=a[e]),ne.test(r)&&!oe.test(e)&&(n=a.left,o=t.runtimeStyle,s=o&&o.left,s&&(o.left=t.currentStyle.left),a.left="fontSize"===e?"1em":r,r=a.pixelLeft+"px",a.left=n,s&&(o.left=s)),void 0===r?r:r+""||"auto"}),function(){function e(){var e,i,n,o;i=_t.getElementsByTagName("body")[0],i&&i.style&&(e=_t.createElement("div"),n=_t.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s=r=!1,l=!0,t.getComputedStyle&&(s="1%"!==(t.getComputedStyle(e,null)||{}).top,r="4px"===(t.getComputedStyle(e,null)||{width:"4px"}).width,o=e.appendChild(_t.createElement("div")),o.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",o.style.marginRight=o.style.width="0",e.style.width="1px",l=!parseFloat((t.getComputedStyle(o,null)||{}).marginRight),e.removeChild(o)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=e.getElementsByTagName("td"),o[0].style.cssText="margin:0;border:0;padding:0;display:none",a=0===o[0].offsetHeight,a&&(o[0].style.display="",o[1].style.display="none",a=0===o[0].offsetHeight),i.removeChild(n))}var i,n,o,s,r,a,l;i=_t.createElement("div"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",o=i.getElementsByTagName("a")[0],n=o&&o.style,n&&(n.cssText="float:left;opacity:.5",it.opacity="0.5"===n.opacity,it.cssFloat=!!n.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",it.clearCloneStyle="content-box"===i.style.backgroundClip,it.boxSizing=""===n.boxSizing||""===n.MozBoxSizing||""===n.WebkitBoxSizing,ot.extend(it,{reliableHiddenOffsets:function(){return null==a&&e(),a},boxSizingReliable:function(){return null==r&&e(),r},pixelPosition:function(){return null==s&&e(),s},reliableMarginRight:function(){return null==l&&e(),l}}))}(),ot.swap=function(t,e,i,n){var o,s,r={};for(s in e)r[s]=t.style[s],t.style[s]=e[s];o=i.apply(t,n||[]);for(s in e)t.style[s]=r[s];return o};var se=/alpha\([^)]*\)/i,re=/opacity\s*=\s*([^)]*)/,ae=/^(none|table(?!-c[ea]).+)/,le=new RegExp("^("+Bt+")(.*)$","i"),ce=new RegExp("^([+-])=("+Bt+")","i"),he={position:"absolute",visibility:"hidden",display:"block"},ue={letterSpacing:"0",fontWeight:"400"},me=["Webkit","O","Moz","ms"];ot.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=ee(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":it.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,s,r,a=ot.camelCase(e),l=t.style;if(e=ot.cssProps[a]||(ot.cssProps[a]=A(l,a)),r=ot.cssHooks[e]||ot.cssHooks[a],void 0===i)return r&&"get"in r&&void 0!==(o=r.get(t,!1,n))?o:l[e];if(s=typeof i,"string"===s&&(o=ce.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(ot.css(t,e)),s="number"),null!=i&&i===i&&("number"!==s||ot.cssNumber[a]||(i+="px"),it.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),!(r&&"set"in r&&void 0===(i=r.set(t,i,n)))))try{l[e]=i}catch(c){}}},css:function(t,e,i,n){var o,s,r,a=ot.camelCase(e);return e=ot.cssProps[a]||(ot.cssProps[a]=A(t.style,a)),r=ot.cssHooks[e]||ot.cssHooks[a],r&&"get"in r&&(s=r.get(t,!0,i)),void 0===s&&(s=ee(t,e,n)),"normal"===s&&e in ue&&(s=ue[e]),""===i||i?(o=parseFloat(s),i===!0||ot.isNumeric(o)?o||0:s):s}}),ot.each(["height","width"],function(t,e){ot.cssHooks[e]={get:function(t,i,n){return i?ae.test(ot.css(t,"display"))&&0===t.offsetWidth?ot.swap(t,he,function(){return V(t,e,n)}):V(t,e,n):void 0},set:function(t,i,n){var o=n&&te(t);return T(t,i,n?I(t,e,n,it.boxSizing&&"border-box"===ot.css(t,"boxSizing",!1,o),o):0)}}}),it.opacity||(ot.cssHooks.opacity={get:function(t,e){return re.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,o=ot.isNumeric(e)?"alpha(opacity="+100*e+")":"",s=n&&n.filter||i.filter||"";i.zoom=1,(e>=1||""===e)&&""===ot.trim(s.replace(se,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===e||n&&!n.filter)||(i.filter=se.test(s)?s.replace(se,o):s+" "+o)}}),ot.cssHooks.marginRight=B(it.reliableMarginRight,function(t,e){return e?ot.swap(t,{display:"inline-block"},ee,[t,"marginRight"]):void 0}),ot.each({margin:"",padding:"",border:"Width"},function(t,e){ot.cssHooks[t+e]={expand:function(i){for(var n=0,o={},s="string"==typeof i?i.split(" "):[i];4>n;n++)o[t+At[n]+e]=s[n]||s[n-2]||s[0];return o}},ie.test(t)||(ot.cssHooks[t+e].set=T)}),ot.fn.extend({css:function(t,e){return Tt(this,function(t,e,i){var n,o,s={},r=0;if(ot.isArray(e)){for(n=te(t),o=e.length;o>r;r++)s[e[r]]=ot.css(t,e[r],!1,n);return s}return void 0!==i?ot.style(t,e,i):ot.css(t,e)},t,e,arguments.length>1)},show:function(){return M(this,!0)},hide:function(){return M(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Mt(this)?ot(this).show():ot(this).hide()})}}),ot.Tween=L,L.prototype={constructor:L,init:function(t,e,i,n,o,s){this.elem=t,this.prop=i,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=s||(ot.cssNumber[i]?"":"px")},cur:function(){var t=L.propHooks[this.prop];return t&&t.get?t.get(this):L.propHooks._default.get(this)},run:function(t){var e,i=L.propHooks[this.prop];return this.options.duration?this.pos=e=ot.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=ot.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){ot.fx.step[t.prop]?ot.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[ot.cssProps[t.prop]]||ot.cssHooks[t.prop])?ot.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ot.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},ot.fx=L.prototype.init,ot.fx.step={};var pe,_e,de=/^(?:toggle|show|hide)$/,fe=new RegExp("^(?:([+-])=|)("+Bt+")([a-z%]*)$","i"),ye=/queueHooks$/,xe=[F],ge={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),o=fe.exec(e),s=o&&o[3]||(ot.cssNumber[t]?"":"px"),r=(ot.cssNumber[t]||"px"!==s&&+n)&&fe.exec(ot.css(i.elem,t)),a=1,l=20;if(r&&r[3]!==s){s=s||r[3],o=o||[],r=+n||1;do a=a||".5",r/=a,ot.style(i.elem,t,r+s);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return o&&(r=i.start=+r||+n||0,i.unit=s,i.end=o[1]?r+(o[1]+1)*o[2]:+o[2]),i}]};ot.Animation=ot.extend(R,{tweener:function(t,e){ot.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,o=t.length;o>n;n++)i=t[n],ge[i]=ge[i]||[],ge[i].unshift(e)},prefilter:function(t,e){e?xe.unshift(t):xe.push(t)}}),ot.speed=function(t,e,i){var n=t&&"object"==typeof t?ot.extend({},t):{complete:i||!i&&e||ot.isFunction(t)&&t,duration:t,easing:i&&e||e&&!ot.isFunction(e)&&e};return n.duration=ot.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in ot.fx.speeds?ot.fx.speeds[n.duration]:ot.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){ot.isFunction(n.old)&&n.old.call(this),n.queue&&ot.dequeue(this,n.queue)},n},ot.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Mt).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var o=ot.isEmptyObject(t),s=ot.speed(e,i,n),r=function(){var e=R(this,ot.extend({},t),s);(o||ot._data(this,"finish"))&&e.stop(!0)};return r.finish=r,o||s.queue===!1?this.each(r):this.queue(s.queue,r)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",s=ot.timers,r=ot._data(this);if(o)r[o]&&r[o].stop&&n(r[o]);else for(o in r)r[o]&&r[o].stop&&ye.test(o)&&n(r[o]);for(o=s.length;o--;)s[o].elem!==this||null!=t&&s[o].queue!==t||(s[o].anim.stop(i),e=!1,s.splice(o,1));(e||!i)&&ot.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=ot._data(this),n=i[t+"queue"],o=i[t+"queueHooks"],s=ot.timers,r=n?n.length:0;for(i.finish=!0,ot.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;r>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),ot.each(["toggle","show","hide"],function(t,e){var i=ot.fn[e];ot.fn[e]=function(t,n,o){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(P(e,!0),t,n,o)}}),ot.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){ot.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),ot.timers=[],ot.fx.tick=function(){var t,e=ot.timers,i=0;for(pe=ot.now();i<e.length;i++)t=e[i],t()||e[i]!==t||e.splice(i--,1);e.length||ot.fx.stop(),pe=void 0},ot.fx.timer=function(t){ot.timers.push(t),t()?ot.fx.start():ot.timers.pop()},ot.fx.interval=13,ot.fx.start=function(){_e||(_e=setInterval(ot.fx.tick,ot.fx.interval))},ot.fx.stop=function(){clearInterval(_e),_e=null},ot.fx.speeds={slow:600,fast:200,_default:400},ot.fn.delay=function(t,e){return t=ot.fx?ot.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t,e,i,n,o;e=_t.createElement("div"),e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=e.getElementsByTagName("a")[0],i=_t.createElement("select"),o=i.appendChild(_t.createElement("option")),t=e.getElementsByTagName("input")[0],n.style.cssText="top:1px",it.getSetAttribute="t"!==e.className,it.style=/top/.test(n.getAttribute("style")),it.hrefNormalized="/a"===n.getAttribute("href"),it.checkOn=!!t.value,it.optSelected=o.selected,it.enctype=!!_t.createElement("form").enctype,i.disabled=!0,it.optDisabled=!o.disabled,t=_t.createElement("input"),t.setAttribute("value",""),it.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),it.radioValue="t"===t.value}();var ve=/\r/g;ot.fn.extend({val:function(t){var e,i,n,o=this[0];{if(arguments.length)return n=ot.isFunction(t),this.each(function(i){var o;1===this.nodeType&&(o=n?t.call(this,i,ot(this).val()):t,null==o?o="":"number"==typeof o?o+="":ot.isArray(o)&&(o=ot.map(o,function(t){return null==t?"":t+""})),e=ot.valHooks[this.type]||ot.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))});if(o)return e=ot.valHooks[o.type]||ot.valHooks[o.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(o,"value"))?i:(i=o.value,"string"==typeof i?i.replace(ve,""):null==i?"":i)}}}),ot.extend({valHooks:{option:{get:function(t){var e=ot.find.attr(t,"value");return null!=e?e:ot.trim(ot.text(t))}},select:{get:function(t){for(var e,i,n=t.options,o=t.selectedIndex,s="select-one"===t.type||0>o,r=s?null:[],a=s?o+1:n.length,l=0>o?a:s?o:0;a>l;l++)if(i=n[l],(i.selected||l===o)&&(it.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!ot.nodeName(i.parentNode,"optgroup"))){if(e=ot(i).val(),s)return e;r.push(e)}return r},set:function(t,e){for(var i,n,o=t.options,s=ot.makeArray(e),r=o.length;r--;)if(n=o[r],ot.inArray(ot.valHooks.option.get(n),s)>=0)try{n.selected=i=!0}catch(a){n.scrollHeight}else n.selected=!1;return i||(t.selectedIndex=-1),o}}}}),ot.each(["radio","checkbox"],function(){ot.valHooks[this]={set:function(t,e){return ot.isArray(e)?t.checked=ot.inArray(ot(t).val(),e)>=0:void 0}},it.checkOn||(ot.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var be,we,Ce=ot.expr.attrHandle,De=/^(?:checked|selected)$/i,Se=it.getSetAttribute,Be=it.input;ot.fn.extend({attr:function(t,e){return Tt(this,ot.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){ot.removeAttr(this,t)})}}),ot.extend({attr:function(t,e,i){var n,o,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return typeof t.getAttribute===Ct?ot.prop(t,e,i):(1===s&&ot.isXMLDoc(t)||(e=e.toLowerCase(),n=ot.attrHooks[e]||(ot.expr.match.bool.test(e)?we:be)),void 0===i?n&&"get"in n&&null!==(o=n.get(t,e))?o:(o=ot.find.attr(t,e),null==o?void 0:o):null!==i?n&&"set"in n&&void 0!==(o=n.set(t,i,e))?o:(t.setAttribute(e,i+""),i):void ot.removeAttr(t,e))},removeAttr:function(t,e){var i,n,o=0,s=e&&e.match(gt);if(s&&1===t.nodeType)for(;i=s[o++];)n=ot.propFix[i]||i,ot.expr.match.bool.test(i)?Be&&Se||!De.test(i)?t[n]=!1:t[ot.camelCase("default-"+i)]=t[n]=!1:ot.attr(t,i,""),t.removeAttribute(Se?i:n)},attrHooks:{type:{set:function(t,e){if(!it.radioValue&&"radio"===e&&ot.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),we={set:function(t,e,i){return e===!1?ot.removeAttr(t,i):Be&&Se||!De.test(i)?t.setAttribute(!Se&&ot.propFix[i]||i,i):t[ot.camelCase("default-"+i)]=t[i]=!0,i}},ot.each(ot.expr.match.bool.source.match(/\w+/g),function(t,e){var i=Ce[e]||ot.find.attr;Ce[e]=Be&&Se||!De.test(e)?function(t,e,n){var o,s;return n||(s=Ce[e],Ce[e]=o,o=null!=i(t,e,n)?e.toLowerCase():null,Ce[e]=s),o}:function(t,e,i){return i?void 0:t[ot.camelCase("default-"+e)]?e.toLowerCase():null}}),Be&&Se||(ot.attrHooks.value={set:function(t,e,i){return ot.nodeName(t,"input")?void(t.defaultValue=e):be&&be.set(t,e,i)}}),Se||(be={set:function(t,e,i){var n=t.getAttributeNode(i);return n||t.setAttributeNode(n=t.ownerDocument.createAttribute(i)),n.value=e+="","value"===i||e===t.getAttribute(i)?e:void 0}},Ce.id=Ce.name=Ce.coords=function(t,e,i){var n;return i?void 0:(n=t.getAttributeNode(e))&&""!==n.value?n.value:null},ot.valHooks.button={get:function(t,e){var i=t.getAttributeNode(e);return i&&i.specified?i.value:void 0},set:be.set},ot.attrHooks.contenteditable={set:function(t,e,i){be.set(t,""===e?!1:e,i)}},ot.each(["width","height"],function(t,e){ot.attrHooks[e]={set:function(t,i){return""===i?(t.setAttribute(e,"auto"),i):void 0}}})),it.style||(ot.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var Ae=/^(?:input|select|textarea|button|object)$/i,Me=/^(?:a|area)$/i;ot.fn.extend({prop:function(t,e){return Tt(this,ot.prop,t,e,arguments.length>1)},removeProp:function(t){return t=ot.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),ot.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,i){var n,o,s,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return s=1!==r||!ot.isXMLDoc(t),s&&(e=ot.propFix[e]||e,o=ot.propHooks[e]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(t,i,e))?n:t[e]=i:o&&"get"in o&&null!==(n=o.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=ot.find.attr(t,"tabindex");return e?parseInt(e,10):Ae.test(t.nodeName)||Me.test(t.nodeName)&&t.href?0:-1}}}}),it.hrefNormalized||ot.each(["href","src"],function(t,e){ot.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),it.optSelected||(ot.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),ot.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ot.propFix[this.toLowerCase()]=this}),it.enctype||(ot.propFix.enctype="encoding");var Te=/[\t\r\n\f]/g;ot.fn.extend({addClass:function(t){var e,i,n,o,s,r,a=0,l=this.length,c="string"==typeof t&&t;if(ot.isFunction(t))return this.each(function(e){ot(this).addClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(gt)||[];l>a;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Te," "):" ")){for(s=0;o=e[s++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");r=ot.trim(n),i.className!==r&&(i.className=r)}return this},removeClass:function(t){var e,i,n,o,s,r,a=0,l=this.length,c=0===arguments.length||"string"==typeof t&&t;if(ot.isFunction(t))return this.each(function(e){ot(this).removeClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(gt)||[];l>a;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Te," "):"")){
for(s=0;o=e[s++];)for(;n.indexOf(" "+o+" ")>=0;)n=n.replace(" "+o+" "," ");r=t?ot.trim(n):"",i.className!==r&&(i.className=r)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):ot.isFunction(t)?this.each(function(i){ot(this).toggleClass(t.call(this,i,this.className,e),e)}):this.each(function(){if("string"===i)for(var e,n=0,o=ot(this),s=t.match(gt)||[];e=s[n++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else(i===Ct||"boolean"===i)&&(this.className&&ot._data(this,"__className__",this.className),this.className=this.className||t===!1?"":ot._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Te," ").indexOf(e)>=0)return!0;return!1}}),ot.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){ot.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),ot.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var Ie=ot.now(),Ve=/\?/,Le=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ot.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var i,n=null,o=ot.trim(e+"");return o&&!ot.trim(o.replace(Le,function(t,e,o,s){return i&&e&&(n=0),0===n?t:(i=o||e,n+=!s-!o,"")}))?Function("return "+o)():ot.error("Invalid JSON: "+e)},ot.parseXML=function(e){var i,n;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(n=new DOMParser,i=n.parseFromString(e,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(e))}catch(o){i=void 0}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||ot.error("Invalid XML: "+e),i};var Ee,Pe,ke=/#.*$/,Fe=/([?&])_=[^&]*/,je=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Re=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ge=/^(?:GET|HEAD)$/,Ne=/^\/\//,Oe=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Je={},ze={},$e="*/".concat("*");try{Pe=location.href}catch(qe){Pe=_t.createElement("a"),Pe.href="",Pe=Pe.href}Ee=Oe.exec(Pe.toLowerCase())||[],ot.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Pe,type:"GET",isLocal:Re.test(Ee[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$e,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ot.parseJSON,"text xml":ot.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?O(O(t,ot.ajaxSettings),e):O(ot.ajaxSettings,t)},ajaxPrefilter:G(Je),ajaxTransport:G(ze),ajax:function(t,e){function i(t,e,i,n){var o,h,y,x,v,w=e;2!==g&&(g=2,a&&clearTimeout(a),c=void 0,r=n||"",b.readyState=t>0?4:0,o=t>=200&&300>t||304===t,i&&(x=J(u,b,i)),x=z(u,x,b,o),o?(u.ifModified&&(v=b.getResponseHeader("Last-Modified"),v&&(ot.lastModified[s]=v),v=b.getResponseHeader("etag"),v&&(ot.etag[s]=v)),204===t||"HEAD"===u.type?w="nocontent":304===t?w="notmodified":(w=x.state,h=x.data,y=x.error,o=!y)):(y=w,(t||!w)&&(w="error",0>t&&(t=0))),b.status=t,b.statusText=(e||w)+"",o?_.resolveWith(m,[h,w,b]):_.rejectWith(m,[b,w,y]),b.statusCode(f),f=void 0,l&&p.trigger(o?"ajaxSuccess":"ajaxError",[b,u,o?h:y]),d.fireWith(m,[b,w]),l&&(p.trigger("ajaxComplete",[b,u]),--ot.active||ot.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,o,s,r,a,l,c,h,u=ot.ajaxSetup({},e),m=u.context||u,p=u.context&&(m.nodeType||m.jquery)?ot(m):ot.event,_=ot.Deferred(),d=ot.Callbacks("once memory"),f=u.statusCode||{},y={},x={},g=0,v="canceled",b={readyState:0,getResponseHeader:function(t){var e;if(2===g){if(!h)for(h={};e=je.exec(r);)h[e[1].toLowerCase()]=e[2];e=h[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===g?r:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return g||(t=x[i]=x[i]||t,y[t]=e),this},overrideMimeType:function(t){return g||(u.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>g)for(e in t)f[e]=[f[e],t[e]];else b.always(t[b.status]);return this},abort:function(t){var e=t||v;return c&&c.abort(e),i(0,e),this}};if(_.promise(b).complete=d.add,b.success=b.done,b.error=b.fail,u.url=((t||u.url||Pe)+"").replace(ke,"").replace(Ne,Ee[1]+"//"),u.type=e.method||e.type||u.method||u.type,u.dataTypes=ot.trim(u.dataType||"*").toLowerCase().match(gt)||[""],null==u.crossDomain&&(n=Oe.exec(u.url.toLowerCase()),u.crossDomain=!(!n||n[1]===Ee[1]&&n[2]===Ee[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Ee[3]||("http:"===Ee[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=ot.param(u.data,u.traditional)),N(Je,u,e,b),2===g)return b;l=ot.event&&u.global,l&&0===ot.active++&&ot.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!Ge.test(u.type),s=u.url,u.hasContent||(u.data&&(s=u.url+=(Ve.test(s)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=Fe.test(s)?s.replace(Fe,"$1_="+Ie++):s+(Ve.test(s)?"&":"?")+"_="+Ie++)),u.ifModified&&(ot.lastModified[s]&&b.setRequestHeader("If-Modified-Since",ot.lastModified[s]),ot.etag[s]&&b.setRequestHeader("If-None-Match",ot.etag[s])),(u.data&&u.hasContent&&u.contentType!==!1||e.contentType)&&b.setRequestHeader("Content-Type",u.contentType),b.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+$e+"; q=0.01":""):u.accepts["*"]);for(o in u.headers)b.setRequestHeader(o,u.headers[o]);if(u.beforeSend&&(u.beforeSend.call(m,b,u)===!1||2===g))return b.abort();v="abort";for(o in{success:1,error:1,complete:1})b[o](u[o]);if(c=N(ze,u,e,b)){b.readyState=1,l&&p.trigger("ajaxSend",[b,u]),u.async&&u.timeout>0&&(a=setTimeout(function(){b.abort("timeout")},u.timeout));try{g=1,c.send(y,i)}catch(w){if(!(2>g))throw w;i(-1,w)}}else i(-1,"No Transport");return b},getJSON:function(t,e,i){return ot.get(t,e,i,"json")},getScript:function(t,e){return ot.get(t,void 0,e,"script")}}),ot.each(["get","post"],function(t,e){ot[e]=function(t,i,n,o){return ot.isFunction(i)&&(o=o||n,n=i,i=void 0),ot.ajax({url:t,type:e,dataType:o,data:i,success:n})}}),ot._evalUrl=function(t){return ot.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ot.fn.extend({wrapAll:function(t){if(ot.isFunction(t))return this.each(function(e){ot(this).wrapAll(t.call(this,e))});if(this[0]){var e=ot(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return ot.isFunction(t)?this.each(function(e){ot(this).wrapInner(t.call(this,e))}):this.each(function(){var e=ot(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=ot.isFunction(t);return this.each(function(i){ot(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){ot.nodeName(this,"body")||ot(this).replaceWith(this.childNodes)}).end()}}),ot.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!it.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||ot.css(t,"display"))},ot.expr.filters.visible=function(t){return!ot.expr.filters.hidden(t)};var We=/%20/g,Ue=/\[\]$/,He=/\r?\n/g,Xe=/^(?:submit|button|image|reset|file)$/i,Ke=/^(?:input|select|textarea|keygen)/i;ot.param=function(t,e){var i,n=[],o=function(t,e){e=ot.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=ot.ajaxSettings&&ot.ajaxSettings.traditional),ot.isArray(t)||t.jquery&&!ot.isPlainObject(t))ot.each(t,function(){o(this.name,this.value)});else for(i in t)$(i,t[i],e,o);return n.join("&").replace(We,"+")},ot.fn.extend({serialize:function(){return ot.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ot.prop(this,"elements");return t?ot.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ot(this).is(":disabled")&&Ke.test(this.nodeName)&&!Xe.test(t)&&(this.checked||!It.test(t))}).map(function(t,e){var i=ot(this).val();return null==i?null:ot.isArray(i)?ot.map(i,function(t){return{name:e.name,value:t.replace(He,"\r\n")}}):{name:e.name,value:i.replace(He,"\r\n")}}).get()}}),ot.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&q()||W()}:q;var Ye=0,Ze={},Qe=ot.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in Ze)Ze[t](void 0,!0)}),it.cors=!!Qe&&"withCredentials"in Qe,Qe=it.ajax=!!Qe,Qe&&ot.ajaxTransport(function(t){if(!t.crossDomain||it.cors){var e;return{send:function(i,n){var o,s=t.xhr(),r=++Ye;if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(o in i)void 0!==i[o]&&s.setRequestHeader(o,i[o]+"");s.send(t.hasContent&&t.data||null),e=function(i,o){var a,l,c;if(e&&(o||4===s.readyState))if(delete Ze[r],e=void 0,s.onreadystatechange=ot.noop,o)4!==s.readyState&&s.abort();else{c={},a=s.status,"string"==typeof s.responseText&&(c.text=s.responseText);try{l=s.statusText}catch(h){l=""}a||!t.isLocal||t.crossDomain?1223===a&&(a=204):a=c.text?200:404}c&&n(a,l,c,s.getAllResponseHeaders())},t.async?4===s.readyState?setTimeout(e):s.onreadystatechange=Ze[r]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),ot.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return ot.globalEval(t),t}}}),ot.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),ot.ajaxTransport("script",function(t){if(t.crossDomain){var e,i=_t.head||ot("head")[0]||_t.documentElement;return{send:function(n,o){e=_t.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,i){(i||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,i||o(200,"success"))},i.insertBefore(e,i.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var ti=[],ei=/(=)\?(?=&|$)|\?\?/;ot.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ti.pop()||ot.expando+"_"+Ie++;return this[t]=!0,t}}),ot.ajaxPrefilter("json jsonp",function(e,i,n){var o,s,r,a=e.jsonp!==!1&&(ei.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ei.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(o=e.jsonpCallback=ot.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(ei,"$1"+o):e.jsonp!==!1&&(e.url+=(Ve.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return r||ot.error(o+" was not called"),r[0]},e.dataTypes[0]="json",s=t[o],t[o]=function(){r=arguments},n.always(function(){t[o]=s,e[o]&&(e.jsonpCallback=i.jsonpCallback,ti.push(o)),r&&ot.isFunction(s)&&s(r[0]),r=s=void 0}),"script"):void 0}),ot.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||_t;var n=ut.exec(t),o=!i&&[];return n?[e.createElement(n[1])]:(n=ot.buildFragment([t],e,o),o&&o.length&&ot(o).remove(),ot.merge([],n.childNodes))};var ii=ot.fn.load;ot.fn.load=function(t,e,i){if("string"!=typeof t&&ii)return ii.apply(this,arguments);var n,o,s,r=this,a=t.indexOf(" ");return a>=0&&(n=ot.trim(t.slice(a,t.length)),t=t.slice(0,a)),ot.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(s="POST"),r.length>0&&ot.ajax({url:t,type:s,dataType:"html",data:e}).done(function(t){o=arguments,r.html(n?ot("<div>").append(ot.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){r.each(i,o||[t.responseText,e,t])}),this},ot.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){ot.fn[e]=function(t){return this.on(e,t)}}),ot.expr.filters.animated=function(t){return ot.grep(ot.timers,function(e){return t===e.elem}).length};var ni=t.document.documentElement;ot.offset={setOffset:function(t,e,i){var n,o,s,r,a,l,c,h=ot.css(t,"position"),u=ot(t),m={};"static"===h&&(t.style.position="relative"),a=u.offset(),s=ot.css(t,"top"),l=ot.css(t,"left"),c=("absolute"===h||"fixed"===h)&&ot.inArray("auto",[s,l])>-1,c?(n=u.position(),r=n.top,o=n.left):(r=parseFloat(s)||0,o=parseFloat(l)||0),ot.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(m.top=e.top-a.top+r),null!=e.left&&(m.left=e.left-a.left+o),"using"in e?e.using.call(t,m):u.css(m)}},ot.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ot.offset.setOffset(this,t,e)});var e,i,n={top:0,left:0},o=this[0],s=o&&o.ownerDocument;if(s)return e=s.documentElement,ot.contains(e,o)?(typeof o.getBoundingClientRect!==Ct&&(n=o.getBoundingClientRect()),i=U(s),{top:n.top+(i.pageYOffset||e.scrollTop)-(e.clientTop||0),left:n.left+(i.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):n},position:function(){if(this[0]){var t,e,i={top:0,left:0},n=this[0];return"fixed"===ot.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),ot.nodeName(t[0],"html")||(i=t.offset()),i.top+=ot.css(t[0],"borderTopWidth",!0),i.left+=ot.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-ot.css(n,"marginTop",!0),left:e.left-i.left-ot.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||ni;t&&!ot.nodeName(t,"html")&&"static"===ot.css(t,"position");)t=t.offsetParent;return t||ni})}}),ot.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i=/Y/.test(e);ot.fn[t]=function(n){return Tt(this,function(t,n,o){var s=U(t);return void 0===o?s?e in s?s[e]:s.document.documentElement[n]:t[n]:void(s?s.scrollTo(i?ot(s).scrollLeft():o,i?o:ot(s).scrollTop()):t[n]=o)},t,n,arguments.length,null)}}),ot.each(["top","left"],function(t,e){ot.cssHooks[e]=B(it.pixelPosition,function(t,i){return i?(i=ee(t,e),ne.test(i)?ot(t).position()[e]+"px":i):void 0})}),ot.each({Height:"height",Width:"width"},function(t,e){ot.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){ot.fn[n]=function(n,o){var s=arguments.length&&(i||"boolean"!=typeof n),r=i||(n===!0||o===!0?"margin":"border");return Tt(this,function(e,i,n){var o;return ot.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===n?ot.css(e,i,r):ot.style(e,i,n,r)},e,s?n:void 0,s,null)}})}),ot.fn.size=function(){return this.length},ot.fn.andSelf=ot.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ot});var oi=t.jQuery,si=t.$;return ot.noConflict=function(e){return t.$===ot&&(t.$=si),e&&t.jQuery===ot&&(t.jQuery=oi),ot},typeof e===Ct&&(t.jQuery=t.$=ot),ot}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>2)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(jQuery),/* ========================================================================
 * Bootstrap: transition.js v3.3.6
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var o=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),/* ========================================================================
 * Bootstrap: alert.js v3.3.6
 * http://getbootstrap.com/javascript/#alerts
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.alert");o||i.data("bs.alert",o=new n(this)),"string"==typeof e&&o[e].call(i)})}var i='[data-dismiss="alert"]',n=function(e){t(e).on("click",i,this.close)};n.VERSION="3.3.6",n.TRANSITION_DURATION=150,n.prototype.close=function(e){function i(){r.detach().trigger("closed.bs.alert").remove()}var o=t(this),s=o.attr("data-target");s||(s=o.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var r=t(s);e&&e.preventDefault(),r.length||(r=o.closest(".alert")),r.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var o=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=o,this},t(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),/* ========================================================================
 * Bootstrap: button.js v3.3.6
 * http://getbootstrap.com/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.button"),s="object"==typeof e&&e;o||n.data("bs.button",o=new i(this,s)),"toggle"==e?o.toggle():e&&o.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.6",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,o=n.is("input")?"val":"html",s=n.data();e+="Text",null==s.resetText&&n.data("resetText",n[o]()),setTimeout(t.proxy(function(){n[o](null==s[e]?this.options[e]:s[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target);n.hasClass("btn")||(n=n.closest(".btn")),e.call(n,"toggle"),t(i.target).is('input[type="radio"]')||t(i.target).is('input[type="checkbox"]')||i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),/* ========================================================================
 * Bootstrap: carousel.js v3.3.6
 * http://getbootstrap.com/javascript/#carousel
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.carousel"),s=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),r="string"==typeof e?e:s.slide;o||n.data("bs.carousel",o=new i(this,s)),"number"==typeof e?o.to(e):r?o[r]():s.interval&&o.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.6",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e),n="prev"==t&&0===i||"next"==t&&i==this.$items.length-1;if(n&&!this.options.wrap)return e;var o="prev"==t?-1:1,s=(i+o)%this.$items.length;return this.$items.eq(s)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,n){var o=this.$element.find(".item.active"),s=n||this.getItemForDirection(e,o),r=this.interval,a="next"==e?"left":"right",l=this;if(s.hasClass("active"))return this.sliding=!1;var c=s[0],h=t.Event("slide.bs.carousel",{relatedTarget:c,direction:a});if(this.$element.trigger(h),!h.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=t(this.$indicators.children()[this.getItemIndex(s)]);u&&u.addClass("active")}var m=t.Event("slid.bs.carousel",{relatedTarget:c,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(e),s[0].offsetWidth,o.addClass(a),s.addClass(a),o.one("bsTransitionEnd",function(){s.removeClass([e,a].join(" ")).addClass("active"),o.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(m)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(o.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(m)),r&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this};var o=function(i){var n,o=t(this),s=t(o.attr("data-target")||(n=o.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var r=t.extend({},s.data(),o.data()),a=o.attr("data-slide-to");a&&(r.interval=!1),e.call(s,r),a&&s.data("bs.carousel").to(a),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),/* ========================================================================
 * Bootstrap: collapse.js v3.3.6
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(n)}function i(e){return this.each(function(){var i=t(this),o=i.data("bs.collapse"),s=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);!o&&s.toggle&&/show|hide/.test(e)&&(s.toggle=!1),o||i.data("bs.collapse",o=new n(this,s)),"string"==typeof e&&o[e]()})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.6",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(e=o.data("bs.collapse"),e&&e.transitioning))){var s=t.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){o&&o.length&&(i.call(o,"hide"),e||o.data("bs.collapse",null));var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var l=t.camelCase(["scroll",r].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[r](this.$element[0][l])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(n.TRANSITION_DURATION):o.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,n){var o=t(n);this.addAriaAndCollapsedClass(e(o),o)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var o=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=n,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var o=t(this);o.attr("data-target")||n.preventDefault();var s=e(o),r=s.data("bs.collapse"),a=r?"toggle":o.data();i.call(s,a)})}(jQuery),/* ========================================================================
 * Bootstrap: dropdown.js v3.3.6
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function i(i){i&&3===i.which||(t(o).remove(),t(s).each(function(){var n=t(this),o=e(n),s={relatedTarget:this};o.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(o[0],i.target)||(o.trigger(i=t.Event("hide.bs.dropdown",s)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),o.removeClass("open").trigger(t.Event("hidden.bs.dropdown",s)))))}))}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new r(this)),"string"==typeof e&&n[e].call(i)})}var o=".dropdown-backdrop",s='[data-toggle="dropdown"]',r=function(e){t(e).on("click.bs.dropdown",this.toggle)};r.VERSION="3.3.6",r.prototype.toggle=function(n){var o=t(this);if(!o.is(".disabled, :disabled")){var s=e(o),r=s.hasClass("open");if(i(),!r){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var a={relatedTarget:this};if(s.trigger(n=t.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger(t.Event("shown.bs.dropdown",a))}return!1}},r.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=t(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var o=e(n),r=o.hasClass("open");if(!r&&27!=i.which||r&&27==i.which)return 27==i.which&&o.find(s).trigger("focus"),n.trigger("click");var a=" li:not(.disabled):visible a",l=o.find(".dropdown-menu"+a);if(l.length){var c=l.index(i.target);38==i.which&&c>0&&c--,40==i.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,r.prototype.toggle).on("keydown.bs.dropdown.data-api",s,r.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",r.prototype.keydown)}(jQuery),/* ========================================================================
 * Bootstrap: modal.js v3.3.6
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e,n){return this.each(function(){var o=t(this),s=o.data("bs.modal"),r=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e);s||o.data("bs.modal",s=new i(this,r)),"string"==typeof e?s[e](n):r.show&&s.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.6",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),o&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});o?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(s)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&o;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):r()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),o=n.attr("href"),s=t(n.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),r=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},s.data(),n.data());n.is("a")&&i.preventDefault(),s.one("show.bs.modal",function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(s,r,this)})}(jQuery),/* ========================================================================
 * Bootstrap: tooltip.js v3.3.6
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.tooltip"),s="object"==typeof e&&e;(o||!/destroy|hide/.test(e))&&(o||n.data("bs.tooltip",o=new i(this,s)),"string"==typeof e&&o[e]())})}var i=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};i.VERSION="3.3.6",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),s=o.length;s--;){var r=o[s];if("click"==r)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=r){var a="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide())},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var o=this,s=this.tip(),r=this.getUID(this.type);this.setContent(),s.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&s.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(a);c&&(a=a.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var h=this.getPosition(),u=s[0].offsetWidth,m=s[0].offsetHeight;if(c){var p=a,_=this.getPosition(this.$viewport);a="bottom"==a&&h.bottom+m>_.bottom?"top":"top"==a&&h.top-m<_.top?"bottom":"right"==a&&h.right+u>_.width?"left":"left"==a&&h.left-u<_.left?"right":a,s.removeClass(p).addClass(a)}var d=this.getCalculatedOffset(a,h,u,m);this.applyPlacement(d,a);var f=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",f).emulateTransitionEnd(i.TRANSITION_DURATION):f()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),o=n[0].offsetWidth,s=n[0].offsetHeight,r=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(a)&&(a=0),e.top+=r,e.left+=a,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=s&&(e.top=e.top+s-c);var h=this.getViewportAdjustedDelta(i,e,l,c);h.left?e.left+=h.left:e.top+=h.top;var u=/top|bottom/.test(i),m=u?2*h.left-o+l:2*h.top-s+c,p=u?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(m,n[0][p],u)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function n(){"in"!=o.hoverState&&s.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),e&&e()}var o=this,s=t(this.$tip),r=t.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName,o=i.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var s=n?{top:0,left:0}:e.offset(),r={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},a=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,r,a,s)},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var o={top:0,left:0};if(!this.$viewport)return o;var s=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-s-r.scroll,l=e.top+s-r.scroll+n;a<r.top?o.top=r.top-a:l>r.top+r.height&&(o.top=r.top+r.height-l)}else{var c=e.left-s,h=e.left+s+i;c<r.left?o.left=r.left-c:h>r.right&&(o.left=r.left+r.width-h)}return o},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null})};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),/* ========================================================================
 * Bootstrap: popover.js v3.3.6
 * http://getbootstrap.com/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.popover"),s="object"==typeof e&&e;(o||!/destroy|hide/.test(e))&&(o||n.data("bs.popover",o=new i(this,s)),"string"==typeof e&&o[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.6",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),/* ========================================================================
 * Bootstrap: scrollspy.js v3.3.6
 * http://getbootstrap.com/javascript/#scrollspy
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(i,n){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),o=n.data("bs.scrollspy"),s="object"==typeof i&&i;o||n.data("bs.scrollspy",o=new e(this,s)),"string"==typeof i&&o[i]()})}e.VERSION="3.3.6",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),o=e.data("target")||e.attr("href"),s=/^#./.test(o)&&t(o);return s&&s.length&&s.is(":visible")&&[[s[i]().top+n,o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),o=this.offsets,s=this.targets,r=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return r!=(t=s[s.length-1])&&this.activate(t);if(r&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)r!=s[t]&&e>=o[t]&&(void 0===o[t+1]||e<o[t+1])&&this.activate(s[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),/* ========================================================================
 * Bootstrap: tab.js v3.3.6
 * http://getbootstrap.com/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.tab");o||n.data("bs.tab",o=new i(this)),"string"==typeof e&&o[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.6",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=i.find(".active:last a"),s=t.Event("hide.bs.tab",{relatedTarget:e[0]}),r=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(s),e.trigger(r),!r.isDefaultPrevented()&&!s.isDefaultPrevented()){var a=t(n);this.activate(e.closest("li"),i),this.activate(a,a.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},i.prototype.activate=function(e,n,o){function s(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var r=n.find("> .active"),a=o&&t.support.transition&&(r.length&&r.hasClass("fade")||!!n.find("> .fade").length);r.length&&a?r.one("bsTransitionEnd",s).emulateTransitionEnd(i.TRANSITION_DURATION):s(),r.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var o=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),/* ========================================================================
 * Bootstrap: affix.js v3.3.6
 * http://getbootstrap.com/javascript/#affix
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.affix"),s="object"==typeof e&&e;o||n.data("bs.affix",o=new i(this,s)),"string"==typeof e&&o[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.6",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,n){var o=this.$target.scrollTop(),s=this.$element.offset(),r=this.$target.height();if(null!=i&&"top"==this.affixed)return i>o?"top":!1;if("bottom"==this.affixed)return null!=i?o+this.unpin<=s.top?!1:"bottom":t-n>=o+r?!1:"bottom";var a=null==this.affixed,l=a?o:s.top,c=a?r:e;return null!=i&&i>=o?"top":null!=n&&l+c>=t-n?"bottom":!1},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),n=this.options.offset,o=n.top,s=n.bottom,r=Math.max(t(document).height(),t(document.body).height());"object"!=typeof n&&(s=o=n),"function"==typeof o&&(o=n.top(this.$element)),"function"==typeof s&&(s=n.bottom(this.$element));var a=this.getState(r,e,o,s);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var l="affix"+(a?"-"+a:""),c=t.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:r-e-s})}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery);var Box2D={};!function(t,e){function i(){}!(Object.prototype.defineProperty instanceof Function)&&Object.prototype.__defineGetter__ instanceof Function&&Object.prototype.__defineSetter__ instanceof Function&&(Object.defineProperty=function(t,e,i){i.get instanceof Function&&t.__defineGetter__(e,i.get),i.set instanceof Function&&t.__defineSetter__(e,i.set)}),t.inherit=function(t,e){i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t},t.generateCallback=function(t,e){return function(){e.apply(t,arguments)}},t.NVector=function(t){t===e&&(t=0);for(var i=Array(t||0),n=0;t>n;++n)i[n]=0;return i},t.is=function(t,i){return null===t?!1:i instanceof Function&&t instanceof i?!0:t.constructor.__implements!=e&&t.constructor.__implements[i]?!0:!1},t.parseUInt=function(t){return Math.abs(parseInt(t))}}(Box2D);var Vector=Array,Vector_a2j_Number=Box2D.NVector;"undefined"==typeof Box2D&&(Box2D={}),"undefined"==typeof Box2D.Collision&&(Box2D.Collision={}),"undefined"==typeof Box2D.Collision.Shapes&&(Box2D.Collision.Shapes={}),"undefined"==typeof Box2D.Common&&(Box2D.Common={}),"undefined"==typeof Box2D.Common.Math&&(Box2D.Common.Math={}),"undefined"==typeof Box2D.Dynamics&&(Box2D.Dynamics={}),"undefined"==typeof Box2D.Dynamics.Contacts&&(Box2D.Dynamics.Contacts={}),"undefined"==typeof Box2D.Dynamics.Controllers&&(Box2D.Dynamics.Controllers={}),"undefined"==typeof Box2D.Dynamics.Joints&&(Box2D.Dynamics.Joints={}),function(){function t(){t.b2AABB.apply(this,arguments)}function e(){e.b2Bound.apply(this,arguments)}function i(){i.b2BoundValues.apply(this,arguments),this.constructor===i&&this.b2BoundValues.apply(this,arguments)}function n(){n.b2Collision.apply(this,arguments)}function o(){o.b2ContactID.apply(this,arguments),this.constructor===o&&this.b2ContactID.apply(this,arguments)}function s(){s.b2ContactPoint.apply(this,arguments)}function r(){r.b2Distance.apply(this,arguments)}function a(){a.b2DistanceInput.apply(this,arguments)}function l(){l.b2DistanceOutput.apply(this,arguments)}function c(){c.b2DistanceProxy.apply(this,arguments)}function h(){h.b2DynamicTree.apply(this,arguments),this.constructor===h&&this.b2DynamicTree.apply(this,arguments)}function u(){u.b2DynamicTreeBroadPhase.apply(this,arguments)}function m(){m.b2DynamicTreeNode.apply(this,arguments)}function p(){p.b2DynamicTreePair.apply(this,arguments)}function _(){_.b2Manifold.apply(this,arguments),this.constructor===_&&this.b2Manifold.apply(this,arguments)}function d(){d.b2ManifoldPoint.apply(this,arguments),this.constructor===d&&this.b2ManifoldPoint.apply(this,arguments)}function f(){f.b2Point.apply(this,arguments)}function y(){y.b2RayCastInput.apply(this,arguments),this.constructor===y&&this.b2RayCastInput.apply(this,arguments)}function x(){x.b2RayCastOutput.apply(this,arguments)}function g(){g.b2Segment.apply(this,arguments)}function v(){v.b2SeparationFunction.apply(this,arguments)}function b(){b.b2Simplex.apply(this,arguments),this.constructor===b&&this.b2Simplex.apply(this,arguments)}function w(){w.b2SimplexCache.apply(this,arguments)}function C(){C.b2SimplexVertex.apply(this,arguments)}function D(){D.b2TimeOfImpact.apply(this,arguments)}function S(){S.b2TOIInput.apply(this,arguments)}function B(){B.b2WorldManifold.apply(this,arguments),this.constructor===B&&this.b2WorldManifold.apply(this,arguments)}function A(){A.ClipVertex.apply(this,arguments)}function M(){M.Features.apply(this,arguments)}function T(){T.b2CircleShape.apply(this,arguments),this.constructor===T&&this.b2CircleShape.apply(this,arguments)}function I(){I.b2EdgeChainDef.apply(this,arguments),this.constructor===I&&this.b2EdgeChainDef.apply(this,arguments)}function V(){V.b2EdgeShape.apply(this,arguments),this.constructor===V&&this.b2EdgeShape.apply(this,arguments)}function L(){L.b2MassData.apply(this,arguments)}function E(){E.b2PolygonShape.apply(this,arguments),this.constructor===E&&this.b2PolygonShape.apply(this,arguments)}function P(){P.b2Shape.apply(this,arguments),this.constructor===P&&this.b2Shape.apply(this,arguments)}function k(){k.b2Color.apply(this,arguments),this.constructor===k&&this.b2Color.apply(this,arguments)}function F(){F.b2Settings.apply(this,arguments)}function j(){j.b2Mat22.apply(this,arguments),this.constructor===j&&this.b2Mat22.apply(this,arguments)}function R(){R.b2Mat33.apply(this,arguments),this.constructor===R&&this.b2Mat33.apply(this,arguments)}function G(){G.b2Math.apply(this,arguments)}function N(){N.b2Sweep.apply(this,arguments)}function O(){O.b2Transform.apply(this,arguments),this.constructor===O&&this.b2Transform.apply(this,arguments)}function J(){J.b2Vec2.apply(this,arguments),this.constructor===J&&this.b2Vec2.apply(this,arguments)}function z(){z.b2Vec3.apply(this,arguments),this.constructor===z&&this.b2Vec3.apply(this,arguments)}function $(){$.b2Body.apply(this,arguments),this.constructor===$&&this.b2Body.apply(this,arguments)}function q(){q.b2BodyDef.apply(this,arguments),this.constructor===q&&this.b2BodyDef.apply(this,arguments)}function W(){W.b2ContactFilter.apply(this,arguments)}function U(){U.b2ContactImpulse.apply(this,arguments)}function H(){H.b2ContactListener.apply(this,arguments)}function X(){X.b2ContactManager.apply(this,arguments),this.constructor===X&&this.b2ContactManager.apply(this,arguments)}function K(){K.b2DebugDraw.apply(this,arguments),this.constructor===K&&this.b2DebugDraw.apply(this,arguments)}function Y(){Y.b2DestructionListener.apply(this,arguments)}function Z(){Z.b2FilterData.apply(this,arguments)}function Q(){Q.b2Fixture.apply(this,arguments),this.constructor===Q&&this.b2Fixture.apply(this,arguments)}function tt(){tt.b2FixtureDef.apply(this,arguments),this.constructor===tt&&this.b2FixtureDef.apply(this,arguments)}function et(){et.b2Island.apply(this,arguments),this.constructor===et&&this.b2Island.apply(this,arguments)}function it(){it.b2TimeStep.apply(this,arguments)}function nt(){nt.b2World.apply(this,arguments),this.constructor===nt&&this.b2World.apply(this,arguments)}function ot(){ot.b2CircleContact.apply(this,arguments)}function st(){st.b2Contact.apply(this,arguments),this.constructor===st&&this.b2Contact.apply(this,arguments)}function rt(){rt.b2ContactConstraint.apply(this,arguments),this.constructor===rt&&this.b2ContactConstraint.apply(this,arguments)}function at(){at.b2ContactConstraintPoint.apply(this,arguments)}function lt(){lt.b2ContactEdge.apply(this,arguments)}function ct(){ct.b2ContactFactory.apply(this,arguments),this.constructor===ct&&this.b2ContactFactory.apply(this,arguments)}function ht(){ht.b2ContactRegister.apply(this,arguments)}function ut(){ut.b2ContactResult.apply(this,arguments)}function mt(){mt.b2ContactSolver.apply(this,arguments),this.constructor===mt&&this.b2ContactSolver.apply(this,arguments)}function pt(){pt.b2EdgeAndCircleContact.apply(this,arguments)}function _t(){_t.b2NullContact.apply(this,arguments),this.constructor===_t&&this.b2NullContact.apply(this,arguments)}function dt(){dt.b2PolyAndCircleContact.apply(this,arguments)}function ft(){ft.b2PolyAndEdgeContact.apply(this,arguments)}function yt(){yt.b2PolygonContact.apply(this,arguments)}function xt(){xt.b2PositionSolverManifold.apply(this,arguments),this.constructor===xt&&this.b2PositionSolverManifold.apply(this,arguments)}function gt(){gt.b2BuoyancyController.apply(this,arguments)}function vt(){vt.b2ConstantAccelController.apply(this,arguments)}function bt(){bt.b2ConstantForceController.apply(this,arguments)}function wt(){wt.b2Controller.apply(this,arguments)}function Ct(){Ct.b2ControllerEdge.apply(this,arguments)}function Dt(){Dt.b2GravityController.apply(this,arguments)}function St(){St.b2TensorDampingController.apply(this,arguments)}function Bt(){Bt.b2DistanceJoint.apply(this,arguments),this.constructor===Bt&&this.b2DistanceJoint.apply(this,arguments)}function At(){At.b2DistanceJointDef.apply(this,arguments),this.constructor===At&&this.b2DistanceJointDef.apply(this,arguments)}function Mt(){Mt.b2FrictionJoint.apply(this,arguments),this.constructor===Mt&&this.b2FrictionJoint.apply(this,arguments)}function Tt(){Tt.b2FrictionJointDef.apply(this,arguments),this.constructor===Tt&&this.b2FrictionJointDef.apply(this,arguments)}function It(){It.b2GearJoint.apply(this,arguments),this.constructor===It&&this.b2GearJoint.apply(this,arguments)}function Vt(){Vt.b2GearJointDef.apply(this,arguments),this.constructor===Vt&&this.b2GearJointDef.apply(this,arguments)}function Lt(){Lt.b2Jacobian.apply(this,arguments)}function Et(){Et.b2Joint.apply(this,arguments),this.constructor===Et&&this.b2Joint.apply(this,arguments)}function Pt(){Pt.b2JointDef.apply(this,arguments),this.constructor===Pt&&this.b2JointDef.apply(this,arguments)}function kt(){kt.b2JointEdge.apply(this,arguments)}function Ft(){Ft.b2LineJoint.apply(this,arguments),this.constructor===Ft&&this.b2LineJoint.apply(this,arguments)}function jt(){jt.b2LineJointDef.apply(this,arguments),this.constructor===jt&&this.b2LineJointDef.apply(this,arguments)}function Rt(){Rt.b2MouseJoint.apply(this,arguments),this.constructor===Rt&&this.b2MouseJoint.apply(this,arguments)}function Gt(){Gt.b2MouseJointDef.apply(this,arguments),this.constructor===Gt&&this.b2MouseJointDef.apply(this,arguments)}function Nt(){Nt.b2PrismaticJoint.apply(this,arguments),this.constructor===Nt&&this.b2PrismaticJoint.apply(this,arguments)}function Ot(){Ot.b2PrismaticJointDef.apply(this,arguments),this.constructor===Ot&&this.b2PrismaticJointDef.apply(this,arguments)}function Jt(){Jt.b2PulleyJoint.apply(this,arguments),this.constructor===Jt&&this.b2PulleyJoint.apply(this,arguments)}function zt(){zt.b2PulleyJointDef.apply(this,arguments),this.constructor===zt&&this.b2PulleyJointDef.apply(this,arguments)}function $t(){$t.b2RevoluteJoint.apply(this,arguments),this.constructor===$t&&this.b2RevoluteJoint.apply(this,arguments)}function qt(){qt.b2RevoluteJointDef.apply(this,arguments),this.constructor===qt&&this.b2RevoluteJointDef.apply(this,arguments)}function Wt(){Wt.b2WeldJoint.apply(this,arguments),this.constructor===Wt&&this.b2WeldJoint.apply(this,arguments)}function Ut(){Ut.b2WeldJointDef.apply(this,arguments),this.constructor===Ut&&this.b2WeldJointDef.apply(this,arguments)}Box2D.Collision.IBroadPhase="Box2D.Collision.IBroadPhase",Box2D.Collision.b2AABB=t,Box2D.Collision.b2Bound=e,Box2D.Collision.b2BoundValues=i,Box2D.Collision.b2Collision=n,Box2D.Collision.b2ContactID=o,Box2D.Collision.b2ContactPoint=s,Box2D.Collision.b2Distance=r,Box2D.Collision.b2DistanceInput=a,Box2D.Collision.b2DistanceOutput=l,Box2D.Collision.b2DistanceProxy=c,Box2D.Collision.b2DynamicTree=h,Box2D.Collision.b2DynamicTreeBroadPhase=u,Box2D.Collision.b2DynamicTreeNode=m,Box2D.Collision.b2DynamicTreePair=p,Box2D.Collision.b2Manifold=_,Box2D.Collision.b2ManifoldPoint=d,Box2D.Collision.b2Point=f,Box2D.Collision.b2RayCastInput=y,Box2D.Collision.b2RayCastOutput=x,Box2D.Collision.b2Segment=g,Box2D.Collision.b2SeparationFunction=v,Box2D.Collision.b2Simplex=b,Box2D.Collision.b2SimplexCache=w,Box2D.Collision.b2SimplexVertex=C,Box2D.Collision.b2TimeOfImpact=D,Box2D.Collision.b2TOIInput=S,Box2D.Collision.b2WorldManifold=B,Box2D.Collision.ClipVertex=A,Box2D.Collision.Features=M,Box2D.Collision.Shapes.b2CircleShape=T,Box2D.Collision.Shapes.b2EdgeChainDef=I,Box2D.Collision.Shapes.b2EdgeShape=V,Box2D.Collision.Shapes.b2MassData=L,Box2D.Collision.Shapes.b2PolygonShape=E,Box2D.Collision.Shapes.b2Shape=P,Box2D.Common.b2internal="Box2D.Common.b2internal",Box2D.Common.b2Color=k,Box2D.Common.b2Settings=F,Box2D.Common.Math.b2Mat22=j,Box2D.Common.Math.b2Mat33=R,Box2D.Common.Math.b2Math=G,Box2D.Common.Math.b2Sweep=N,Box2D.Common.Math.b2Transform=O,Box2D.Common.Math.b2Vec2=J,Box2D.Common.Math.b2Vec3=z,Box2D.Dynamics.b2Body=$,Box2D.Dynamics.b2BodyDef=q,Box2D.Dynamics.b2ContactFilter=W,Box2D.Dynamics.b2ContactImpulse=U,Box2D.Dynamics.b2ContactListener=H,Box2D.Dynamics.b2ContactManager=X,Box2D.Dynamics.b2DebugDraw=K,Box2D.Dynamics.b2DestructionListener=Y,Box2D.Dynamics.b2FilterData=Z,Box2D.Dynamics.b2Fixture=Q,Box2D.Dynamics.b2FixtureDef=tt,Box2D.Dynamics.b2Island=et,Box2D.Dynamics.b2TimeStep=it,Box2D.Dynamics.b2World=nt,Box2D.Dynamics.Contacts.b2CircleContact=ot,Box2D.Dynamics.Contacts.b2Contact=st,Box2D.Dynamics.Contacts.b2ContactConstraint=rt,Box2D.Dynamics.Contacts.b2ContactConstraintPoint=at,Box2D.Dynamics.Contacts.b2ContactEdge=lt,Box2D.Dynamics.Contacts.b2ContactFactory=ct,Box2D.Dynamics.Contacts.b2ContactRegister=ht,Box2D.Dynamics.Contacts.b2ContactResult=ut,Box2D.Dynamics.Contacts.b2ContactSolver=mt,Box2D.Dynamics.Contacts.b2EdgeAndCircleContact=pt,Box2D.Dynamics.Contacts.b2NullContact=_t,Box2D.Dynamics.Contacts.b2PolyAndCircleContact=dt,Box2D.Dynamics.Contacts.b2PolyAndEdgeContact=ft,Box2D.Dynamics.Contacts.b2PolygonContact=yt,Box2D.Dynamics.Contacts.b2PositionSolverManifold=xt,Box2D.Dynamics.Controllers.b2BuoyancyController=gt,Box2D.Dynamics.Controllers.b2ConstantAccelController=vt,Box2D.Dynamics.Controllers.b2ConstantForceController=bt,Box2D.Dynamics.Controllers.b2Controller=wt,Box2D.Dynamics.Controllers.b2ControllerEdge=Ct,Box2D.Dynamics.Controllers.b2GravityController=Dt,Box2D.Dynamics.Controllers.b2TensorDampingController=St,Box2D.Dynamics.Joints.b2DistanceJoint=Bt,Box2D.Dynamics.Joints.b2DistanceJointDef=At,Box2D.Dynamics.Joints.b2FrictionJoint=Mt,Box2D.Dynamics.Joints.b2FrictionJointDef=Tt,Box2D.Dynamics.Joints.b2GearJoint=It,Box2D.Dynamics.Joints.b2GearJointDef=Vt,Box2D.Dynamics.Joints.b2Jacobian=Lt,Box2D.Dynamics.Joints.b2Joint=Et,Box2D.Dynamics.Joints.b2JointDef=Pt,Box2D.Dynamics.Joints.b2JointEdge=kt,Box2D.Dynamics.Joints.b2LineJoint=Ft,Box2D.Dynamics.Joints.b2LineJointDef=jt,Box2D.Dynamics.Joints.b2MouseJoint=Rt,Box2D.Dynamics.Joints.b2MouseJointDef=Gt,Box2D.Dynamics.Joints.b2PrismaticJoint=Nt,Box2D.Dynamics.Joints.b2PrismaticJointDef=Ot,Box2D.Dynamics.Joints.b2PulleyJoint=Jt,Box2D.Dynamics.Joints.b2PulleyJointDef=zt,Box2D.Dynamics.Joints.b2RevoluteJoint=$t,Box2D.Dynamics.Joints.b2RevoluteJointDef=qt,Box2D.Dynamics.Joints.b2WeldJoint=Wt,Box2D.Dynamics.Joints.b2WeldJointDef=Ut}(),Box2D.postDefs=[],function(){var t=Box2D.Collision.Shapes.b2CircleShape,e=Box2D.Collision.Shapes.b2PolygonShape,i=Box2D.Collision.Shapes.b2Shape,n=Box2D.Common.b2Settings,o=Box2D.Common.Math.b2Math,s=Box2D.Common.Math.b2Sweep,r=Box2D.Common.Math.b2Transform,a=Box2D.Common.Math.b2Vec2,l=Box2D.Collision.b2AABB,c=Box2D.Collision.b2Bound,h=Box2D.Collision.b2BoundValues,u=Box2D.Collision.b2Collision,m=Box2D.Collision.b2ContactID,p=Box2D.Collision.b2ContactPoint,_=Box2D.Collision.b2Distance,d=Box2D.Collision.b2DistanceInput,f=Box2D.Collision.b2DistanceOutput,y=Box2D.Collision.b2DistanceProxy,x=Box2D.Collision.b2DynamicTree,g=Box2D.Collision.b2DynamicTreeBroadPhase,v=Box2D.Collision.b2DynamicTreeNode,b=Box2D.Collision.b2DynamicTreePair,w=Box2D.Collision.b2Manifold,C=Box2D.Collision.b2ManifoldPoint,D=Box2D.Collision.b2Point,S=Box2D.Collision.b2RayCastInput,B=Box2D.Collision.b2RayCastOutput,A=Box2D.Collision.b2Segment,M=Box2D.Collision.b2SeparationFunction,T=Box2D.Collision.b2Simplex,I=Box2D.Collision.b2SimplexCache,V=Box2D.Collision.b2SimplexVertex,L=Box2D.Collision.b2TimeOfImpact,E=Box2D.Collision.b2TOIInput,P=Box2D.Collision.b2WorldManifold,k=Box2D.Collision.ClipVertex,F=Box2D.Collision.Features,j=Box2D.Collision.IBroadPhase;l.b2AABB=function(){this.lowerBound=new a,this.upperBound=new a},l.prototype.IsValid=function(){var t=this.upperBound.y-this.lowerBound.y;return t=(t=this.upperBound.x-this.lowerBound.x>=0&&t>=0)&&this.lowerBound.IsValid()&&this.upperBound.IsValid()},l.prototype.GetCenter=function(){return new a((this.lowerBound.x+this.upperBound.x)/2,(this.lowerBound.y+this.upperBound.y)/2)},l.prototype.GetExtents=function(){return new a((this.upperBound.x-this.lowerBound.x)/2,(this.upperBound.y-this.lowerBound.y)/2)},l.prototype.Contains=function(t){var e=!0;return e=(e=(e=(e=e&&this.lowerBound.x<=t.lowerBound.x)&&this.lowerBound.y<=t.lowerBound.y)&&t.upperBound.x<=this.upperBound.x)&&t.upperBound.y<=this.upperBound.y},l.prototype.RayCast=function(t,e){var i=-Number.MAX_VALUE,n=Number.MAX_VALUE,o=e.p1.x,s=e.p1.y,r=e.p2.x-e.p1.x,a=e.p2.y-e.p1.y,l=Math.abs(a),c=t.normal,h=0,u=0,m=h=0;if(m=0,Math.abs(r)<Number.MIN_VALUE){if(o<this.lowerBound.x||this.upperBound.x<o)return!1}else if(h=1/r,u=(this.lowerBound.x-o)*h,h=(this.upperBound.x-o)*h,m=-1,u>h&&(m=u,u=h,h=m,m=1),u>i&&(c.x=m,c.y=0,i=u),n=Math.min(n,h),i>n)return!1;if(l<Number.MIN_VALUE){if(s<this.lowerBound.y||this.upperBound.y<s)return!1}else if(h=1/a,u=(this.lowerBound.y-s)*h,h=(this.upperBound.y-s)*h,m=-1,u>h&&(m=u,u=h,h=m,m=1),u>i&&(c.y=m,c.x=0,i=u),n=Math.min(n,h),i>n)return!1;return t.fraction=i,!0},l.prototype.TestOverlap=function(t){var e=t.lowerBound.y-this.upperBound.y,i=this.lowerBound.y-t.upperBound.y;return t.lowerBound.x-this.upperBound.x>0||e>0?!1:this.lowerBound.x-t.upperBound.x>0||i>0?!1:!0},l.Combine=function(t,e){var i=new l;return i.Combine(t,e),i},l.prototype.Combine=function(t,e){this.lowerBound.x=Math.min(t.lowerBound.x,e.lowerBound.x),this.lowerBound.y=Math.min(t.lowerBound.y,e.lowerBound.y),this.upperBound.x=Math.max(t.upperBound.x,e.upperBound.x),this.upperBound.y=Math.max(t.upperBound.y,e.upperBound.y)},c.b2Bound=function(){},c.prototype.IsLower=function(){return 0==(1&this.value)},c.prototype.IsUpper=function(){return 1==(1&this.value)},c.prototype.Swap=function(t){var e=this.value,i=this.proxy,n=this.stabbingCount;this.value=t.value,this.proxy=t.proxy,this.stabbingCount=t.stabbingCount,t.value=e,t.proxy=i,t.stabbingCount=n},h.b2BoundValues=function(){},h.prototype.b2BoundValues=function(){this.lowerValues=new Vector_a2j_Number,this.lowerValues[0]=0,this.lowerValues[1]=0,this.upperValues=new Vector_a2j_Number,this.upperValues[0]=0,this.upperValues[1]=0},u.b2Collision=function(){},u.ClipSegmentToLine=function(t,e,i,n){void 0===n&&(n=0);var o,s=0;o=e[0];var r=o.v;o=e[1];var a=o.v,l=i.x*r.x+i.y*r.y-n;return o=i.x*a.x+i.y*a.y-n,0>=l&&t[s++].Set(e[0]),0>=o&&t[s++].Set(e[1]),0>l*o&&(i=l/(l-o),o=t[s],o=o.v,o.x=r.x+i*(a.x-r.x),o.y=r.y+i*(a.y-r.y),o=t[s],o.id=(l>0?e[0]:e[1]).id,++s),s},u.EdgeSeparation=function(t,e,i,n,o){void 0===i&&(i=0),parseInt(t.m_vertexCount);var s=t.m_vertices;t=t.m_normals;var r,a,l=parseInt(n.m_vertexCount),c=n.m_vertices;r=e.R,a=t[i],t=r.col1.x*a.x+r.col2.x*a.y,n=r.col1.y*a.x+r.col2.y*a.y,r=o.R;var h=r.col1.x*t+r.col1.y*n;r=r.col2.x*t+r.col2.y*n;for(var u=0,m=Number.MAX_VALUE,p=0;l>p;++p)a=c[p],a=a.x*h+a.y*r,m>a&&(m=a,u=p);return a=s[i],r=e.R,i=e.position.x+(r.col1.x*a.x+r.col2.x*a.y),e=e.position.y+(r.col1.y*a.x+r.col2.y*a.y),a=c[u],r=o.R,s=o.position.x+(r.col1.x*a.x+r.col2.x*a.y),o=o.position.y+(r.col1.y*a.x+r.col2.y*a.y),s-=i,o-=e,s*t+o*n},u.FindMaxSeparation=function(t,e,i,n,o){var s,r,a=parseInt(e.m_vertexCount),l=e.m_normals;r=o.R,s=n.m_centroid;var c=o.position.x+(r.col1.x*s.x+r.col2.x*s.y),h=o.position.y+(r.col1.y*s.x+r.col2.y*s.y);r=i.R,s=e.m_centroid,c-=i.position.x+(r.col1.x*s.x+r.col2.x*s.y),h-=i.position.y+(r.col1.y*s.x+r.col2.y*s.y),r=c*i.R.col1.x+h*i.R.col1.y,h=c*i.R.col2.x+h*i.R.col2.y,c=0;for(var m=-Number.MAX_VALUE,p=0;a>p;++p)s=l[p],s=s.x*r+s.y*h,s>m&&(m=s,c=p);l=u.EdgeSeparation(e,i,c,n,o),s=parseInt(c-1>=0?c-1:a-1),r=u.EdgeSeparation(e,i,s,n,o),h=parseInt(a>c+1?c+1:0),m=u.EdgeSeparation(e,i,h,n,o);var _=p=0,d=0;if(r>l&&r>m)d=-1,p=s,_=r;else{if(!(m>l))return t[0]=c,l;d=1,p=h,_=m}for(;c=-1==d?p-1>=0?p-1:a-1:a>p+1?p+1:0,l=u.EdgeSeparation(e,i,c,n,o),l>_;)p=c,_=l;return t[0]=p,_},u.FindIncidentEdge=function(t,e,i,n,o,s){void 0===n&&(n=0),parseInt(e.m_vertexCount);var r=e.m_normals,a=parseInt(o.m_vertexCount);e=o.m_vertices,o=o.m_normals;var l;l=i.R,i=r[n],r=l.col1.x*i.x+l.col2.x*i.y;var c=l.col1.y*i.x+l.col2.y*i.y;l=s.R,i=l.col1.x*r+l.col1.y*c,c=l.col2.x*r+l.col2.y*c,r=i,l=0;for(var h=Number.MAX_VALUE,u=0;a>u;++u)i=o[u],i=r*i.x+c*i.y,h>i&&(h=i,l=u);o=parseInt(l),r=parseInt(a>o+1?o+1:0),a=t[0],i=e[o],l=s.R,a.v.x=s.position.x+(l.col1.x*i.x+l.col2.x*i.y),a.v.y=s.position.y+(l.col1.y*i.x+l.col2.y*i.y),a.id.features.referenceEdge=n,a.id.features.incidentEdge=o,a.id.features.incidentVertex=0,a=t[1],i=e[r],l=s.R,a.v.x=s.position.x+(l.col1.x*i.x+l.col2.x*i.y),a.v.y=s.position.y+(l.col1.y*i.x+l.col2.y*i.y),a.id.features.referenceEdge=n,a.id.features.incidentEdge=r,a.id.features.incidentVertex=1},u.MakeClipPointVector=function(){var t=new Vector(2);return t[0]=new k,t[1]=new k,t},u.CollidePolygons=function(t,e,i,o,s){var r;t.m_pointCount=0;var a=e.m_radius+o.m_radius;r=0,u.s_edgeAO[0]=r;var l=u.FindMaxSeparation(u.s_edgeAO,e,i,o,s);if(r=u.s_edgeAO[0],!(l>a)){var c=0;u.s_edgeBO[0]=c;var h=u.FindMaxSeparation(u.s_edgeBO,o,s,e,i);if(c=u.s_edgeBO[0],!(h>a)){var m=0,p=0;h>.98*l+.001?(l=o,o=e,e=s,i=i,m=c,t.m_type=w.e_faceB,p=1):(l=e,o=o,e=i,i=s,m=r,t.m_type=w.e_faceA,p=0),r=u.s_incidentEdge,u.FindIncidentEdge(r,l,e,m,o,i),c=parseInt(l.m_vertexCount),s=l.m_vertices,l=s[m];var _;_=c>m+1?s[parseInt(m+1)]:s[0],m=u.s_localTangent,m.Set(_.x-l.x,_.y-l.y),m.Normalize(),s=u.s_localNormal,s.x=m.y,s.y=-m.x,o=u.s_planePoint,o.Set(.5*(l.x+_.x),.5*(l.y+_.y)),h=u.s_tangent,c=e.R,h.x=c.col1.x*m.x+c.col2.x*m.y,h.y=c.col1.y*m.x+c.col2.y*m.y;var d=u.s_tangent2;d.x=-h.x,d.y=-h.y,m=u.s_normal,m.x=h.y,m.y=-h.x;var f=u.s_v11,y=u.s_v12;if(f.x=e.position.x+(c.col1.x*l.x+c.col2.x*l.y),f.y=e.position.y+(c.col1.y*l.x+c.col2.y*l.y),y.x=e.position.x+(c.col1.x*_.x+c.col2.x*_.y),y.y=e.position.y+(c.col1.y*_.x+c.col2.y*_.y),e=m.x*f.x+m.y*f.y,c=h.x*y.x+h.y*y.y+a,_=u.s_clipPoints1,l=u.s_clipPoints2,y=0,y=u.ClipSegmentToLine(_,r,d,-h.x*f.x-h.y*f.y+a),!(2>y||(y=u.ClipSegmentToLine(l,_,h,c),2>y))){for(t.m_localPlaneNormal.SetV(s),t.m_localPoint.SetV(o),o=s=0;o<n.b2_maxManifoldPoints;++o)r=l[o],m.x*r.v.x+m.y*r.v.y-e<=a&&(h=t.m_points[s],c=i.R,d=r.v.x-i.position.x,f=r.v.y-i.position.y,h.m_localPoint.x=d*c.col1.x+f*c.col1.y,h.m_localPoint.y=d*c.col2.x+f*c.col2.y,h.m_id.Set(r.id),h.m_id.features.flip=p,++s);t.m_pointCount=s}}}},u.CollideCircles=function(t,e,i,n,o){t.m_pointCount=0;var s,r;s=i.R,r=e.m_p;var a=i.position.x+(s.col1.x*r.x+s.col2.x*r.y);i=i.position.y+(s.col1.y*r.x+s.col2.y*r.y),s=o.R,r=n.m_p,a=o.position.x+(s.col1.x*r.x+s.col2.x*r.y)-a,o=o.position.y+(s.col1.y*r.x+s.col2.y*r.y)-i,s=e.m_radius+n.m_radius,a*a+o*o>s*s||(t.m_type=w.e_circles,t.m_localPoint.SetV(e.m_p),t.m_localPlaneNormal.SetZero(),t.m_pointCount=1,t.m_points[0].m_localPoint.SetV(n.m_p),t.m_points[0].m_id.key=0)},u.CollidePolygonAndCircle=function(t,e,i,n,o){var s,r,a=t.m_pointCount=0,l=0;r=o.R,s=n.m_p;var c=o.position.y+(r.col1.y*s.x+r.col2.y*s.y);a=o.position.x+(r.col1.x*s.x+r.col2.x*s.y)-i.position.x,l=c-i.position.y,r=i.R,i=a*r.col1.x+l*r.col1.y,r=a*r.col2.x+l*r.col2.y;var h=0;c=-Number.MAX_VALUE,o=e.m_radius+n.m_radius;var u=parseInt(e.m_vertexCount),m=e.m_vertices;e=e.m_normals;for(var p=0;u>p;++p){if(s=m[p],a=i-s.x,l=r-s.y,s=e[p],a=s.x*a+s.y*l,a>o)return;a>c&&(c=a,h=p)}if(a=parseInt(h),l=parseInt(u>a+1?a+1:0),s=m[a],m=m[l],c<Number.MIN_VALUE)t.m_pointCount=1,t.m_type=w.e_faceA,t.m_localPlaneNormal.SetV(e[h]),t.m_localPoint.x=.5*(s.x+m.x),t.m_localPoint.y=.5*(s.y+m.y);else if(c=(i-m.x)*(s.x-m.x)+(r-m.y)*(s.y-m.y),(i-s.x)*(m.x-s.x)+(r-s.y)*(m.y-s.y)<=0){if((i-s.x)*(i-s.x)+(r-s.y)*(r-s.y)>o*o)return;t.m_pointCount=1,t.m_type=w.e_faceA,t.m_localPlaneNormal.x=i-s.x,t.m_localPlaneNormal.y=r-s.y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.SetV(s)}else if(0>=c){if((i-m.x)*(i-m.x)+(r-m.y)*(r-m.y)>o*o)return;t.m_pointCount=1,t.m_type=w.e_faceA,t.m_localPlaneNormal.x=i-m.x,t.m_localPlaneNormal.y=r-m.y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.SetV(m)}else{if(h=.5*(s.x+m.x),s=.5*(s.y+m.y),c=(i-h)*e[a].x+(r-s)*e[a].y,c>o)return;t.m_pointCount=1,t.m_type=w.e_faceA,t.m_localPlaneNormal.x=e[a].x,t.m_localPlaneNormal.y=e[a].y,t.m_localPlaneNormal.Normalize(),t.m_localPoint.Set(h,s)}t.m_points[0].m_localPoint.SetV(n.m_p),t.m_points[0].m_id.key=0},u.TestOverlap=function(t,e){var i=e.lowerBound,n=t.upperBound,o=i.x-n.x,s=i.y-n.y;i=t.lowerBound,n=e.upperBound;var r=i.y-n.y;return o>0||s>0?!1:i.x-n.x>0||r>0?!1:!0},Box2D.postDefs.push(function(){Box2D.Collision.b2Collision.s_incidentEdge=u.MakeClipPointVector(),Box2D.Collision.b2Collision.s_clipPoints1=u.MakeClipPointVector(),Box2D.Collision.b2Collision.s_clipPoints2=u.MakeClipPointVector(),Box2D.Collision.b2Collision.s_edgeAO=new Vector_a2j_Number(1),Box2D.Collision.b2Collision.s_edgeBO=new Vector_a2j_Number(1),Box2D.Collision.b2Collision.s_localTangent=new a,Box2D.Collision.b2Collision.s_localNormal=new a,Box2D.Collision.b2Collision.s_planePoint=new a,Box2D.Collision.b2Collision.s_normal=new a,Box2D.Collision.b2Collision.s_tangent=new a,Box2D.Collision.b2Collision.s_tangent2=new a,Box2D.Collision.b2Collision.s_v11=new a,Box2D.Collision.b2Collision.s_v12=new a,Box2D.Collision.b2Collision.b2CollidePolyTempVec=new a,Box2D.Collision.b2Collision.b2_nullFeature=255}),m.b2ContactID=function(){this.features=new F},m.prototype.b2ContactID=function(){this.features._m_id=this},m.prototype.Set=function(t){this.key=t._key},m.prototype.Copy=function(){var t=new m;return t.key=this.key,t},Object.defineProperty(m.prototype,"key",{enumerable:!1,configurable:!0,get:function(){return this._key}}),Object.defineProperty(m.prototype,"key",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._key=t,this.features._referenceEdge=255&this._key,this.features._incidentEdge=(65280&this._key)>>8&255,this.features._incidentVertex=(16711680&this._key)>>16&255,this.features._flip=(4278190080&this._key)>>24&255}}),p.b2ContactPoint=function(){this.position=new a,this.velocity=new a,this.normal=new a,this.id=new m},_.b2Distance=function(){},_.Distance=function(t,e,i){++_.b2_gjkCalls;var s=i.proxyA,r=i.proxyB,l=i.transformA,c=i.transformB,h=_.s_simplex;h.ReadCache(e,s,l,r,c);var u=h.m_vertices,m=_.s_saveA,p=_.s_saveB,d=0;h.GetClosestPoint().LengthSquared();for(var f,y=0,x=0;20>x;){for(d=h.m_count,y=0;d>y;y++)m[y]=u[y].indexA,p[y]=u[y].indexB;switch(h.m_count){case 1:break;case 2:h.Solve2();break;case 3:h.Solve3();break;default:n.b2Assert(!1)}if(3==h.m_count)break;if(f=h.GetClosestPoint(),f.LengthSquared(),y=h.GetSearchDirection(),y.LengthSquared()<Number.MIN_VALUE*Number.MIN_VALUE)break;f=u[h.m_count],f.indexA=s.GetSupport(o.MulTMV(l.R,y.GetNegative())),f.wA=o.MulX(l,s.GetVertex(f.indexA)),f.indexB=r.GetSupport(o.MulTMV(c.R,y)),f.wB=o.MulX(c,r.GetVertex(f.indexB)),f.w=o.SubtractVV(f.wB,f.wA),++x,++_.b2_gjkIters;var g=!1;for(y=0;d>y;y++)if(f.indexA==m[y]&&f.indexB==p[y]){g=!0;break}if(g)break;++h.m_count}_.b2_gjkMaxIters=o.Max(_.b2_gjkMaxIters,x),h.GetWitnessPoints(t.pointA,t.pointB),t.distance=o.SubtractVV(t.pointA,t.pointB).Length(),t.iterations=x,h.WriteCache(e),i.useRadii&&(e=s.m_radius,r=r.m_radius,t.distance>e+r&&t.distance>Number.MIN_VALUE?(t.distance-=e+r,i=o.SubtractVV(t.pointB,t.pointA),i.Normalize(),t.pointA.x+=e*i.x,t.pointA.y+=e*i.y,t.pointB.x-=r*i.x,t.pointB.y-=r*i.y):(f=new a,f.x=.5*(t.pointA.x+t.pointB.x),f.y=.5*(t.pointA.y+t.pointB.y),t.pointA.x=t.pointB.x=f.x,t.pointA.y=t.pointB.y=f.y,t.distance=0))},Box2D.postDefs.push(function(){Box2D.Collision.b2Distance.s_simplex=new T,Box2D.Collision.b2Distance.s_saveA=new Vector_a2j_Number(3),Box2D.Collision.b2Distance.s_saveB=new Vector_a2j_Number(3)}),d.b2DistanceInput=function(){},f.b2DistanceOutput=function(){this.pointA=new a,this.pointB=new a},y.b2DistanceProxy=function(){},y.prototype.Set=function(o){switch(o.GetType()){case i.e_circleShape:o=o instanceof t?o:null,this.m_vertices=new Vector(1,!0),this.m_vertices[0]=o.m_p,this.m_count=1,this.m_radius=o.m_radius;break;case i.e_polygonShape:o=o instanceof e?o:null,this.m_vertices=o.m_vertices,this.m_count=o.m_vertexCount,this.m_radius=o.m_radius;break;default:n.b2Assert(!1)}},y.prototype.GetSupport=function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,n=1;n<this.m_count;++n){var o=this.m_vertices[n].x*t.x+this.m_vertices[n].y*t.y;o>i&&(e=n,i=o)}return e},y.prototype.GetSupportVertex=function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,n=1;n<this.m_count;++n){var o=this.m_vertices[n].x*t.x+this.m_vertices[n].y*t.y;o>i&&(e=n,i=o)}return this.m_vertices[e]},y.prototype.GetVertexCount=function(){return this.m_count},y.prototype.GetVertex=function(t){return void 0===t&&(t=0),n.b2Assert(t>=0&&t<this.m_count),this.m_vertices[t]},x.b2DynamicTree=function(){},x.prototype.b2DynamicTree=function(){this.m_freeList=this.m_root=null,this.m_insertionCount=this.m_path=0},x.prototype.CreateProxy=function(t,e){var i=this.AllocateNode(),o=n.b2_aabbExtension,s=n.b2_aabbExtension;return i.aabb.lowerBound.x=t.lowerBound.x-o,i.aabb.lowerBound.y=t.lowerBound.y-s,i.aabb.upperBound.x=t.upperBound.x+o,i.aabb.upperBound.y=t.upperBound.y+s,i.userData=e,this.InsertLeaf(i),i},x.prototype.DestroyProxy=function(t){this.RemoveLeaf(t),this.FreeNode(t)},x.prototype.MoveProxy=function(t,e,i){if(n.b2Assert(t.IsLeaf()),t.aabb.Contains(e))return!1;this.RemoveLeaf(t);var o=n.b2_aabbExtension+n.b2_aabbMultiplier*(i.x>0?i.x:-i.x);return i=n.b2_aabbExtension+n.b2_aabbMultiplier*(i.y>0?i.y:-i.y),t.aabb.lowerBound.x=e.lowerBound.x-o,t.aabb.lowerBound.y=e.lowerBound.y-i,t.aabb.upperBound.x=e.upperBound.x+o,t.aabb.upperBound.y=e.upperBound.y+i,this.InsertLeaf(t),!0},x.prototype.Rebalance=function(t){if(void 0===t&&(t=0),null!=this.m_root)for(var e=0;t>e;e++){for(var i=this.m_root,n=0;0==i.IsLeaf();)i=this.m_path>>n&1?i.child2:i.child1,n=n+1&31;++this.m_path,this.RemoveLeaf(i),this.InsertLeaf(i)}},x.prototype.GetFatAABB=function(t){return t.aabb},x.prototype.GetUserData=function(t){return t.userData},x.prototype.Query=function(t,e){if(null!=this.m_root){var i=new Vector,n=0;for(i[n++]=this.m_root;n>0;){var o=i[--n];if(o.aabb.TestOverlap(e))if(o.IsLeaf()){if(!t(o))break}else i[n++]=o.child1,i[n++]=o.child2}}},x.prototype.RayCast=function(t,e){if(null!=this.m_root){var i=e.p1,n=e.p2,s=o.SubtractVV(i,n);s.Normalize(),s=o.CrossFV(1,s);var r=o.AbsV(s),a=e.maxFraction,c=new l,h=0,u=0;h=i.x+a*(n.x-i.x),u=i.y+a*(n.y-i.y),c.lowerBound.x=Math.min(i.x,h),c.lowerBound.y=Math.min(i.y,u),c.upperBound.x=Math.max(i.x,h),c.upperBound.y=Math.max(i.y,u);var m=new Vector,p=0;for(m[p++]=this.m_root;p>0;)if(a=m[--p],0!=a.aabb.TestOverlap(c)&&(h=a.aabb.GetCenter(),u=a.aabb.GetExtents(),!(Math.abs(s.x*(i.x-h.x)+s.y*(i.y-h.y))-r.x*u.x-r.y*u.y>0)))if(a.IsLeaf()){if(h=new S,h.p1=e.p1,h.p2=e.p2,h.maxFraction=e.maxFraction,a=t(h,a),0==a)break;a>0&&(h=i.x+a*(n.x-i.x),u=i.y+a*(n.y-i.y),c.lowerBound.x=Math.min(i.x,h),c.lowerBound.y=Math.min(i.y,u),
c.upperBound.x=Math.max(i.x,h),c.upperBound.y=Math.max(i.y,u))}else m[p++]=a.child1,m[p++]=a.child2}},x.prototype.AllocateNode=function(){if(this.m_freeList){var t=this.m_freeList;return this.m_freeList=t.parent,t.parent=null,t.child1=null,t.child2=null,t}return new v},x.prototype.FreeNode=function(t){t.parent=this.m_freeList,this.m_freeList=t},x.prototype.InsertLeaf=function(t){if(++this.m_insertionCount,null==this.m_root)this.m_root=t,this.m_root.parent=null;else{var e=t.aabb.GetCenter(),i=this.m_root;if(0==i.IsLeaf())do{var n=i.child1;i=i.child2,i=Math.abs((n.aabb.lowerBound.x+n.aabb.upperBound.x)/2-e.x)+Math.abs((n.aabb.lowerBound.y+n.aabb.upperBound.y)/2-e.y)<Math.abs((i.aabb.lowerBound.x+i.aabb.upperBound.x)/2-e.x)+Math.abs((i.aabb.lowerBound.y+i.aabb.upperBound.y)/2-e.y)?n:i}while(0==i.IsLeaf());if(e=i.parent,n=this.AllocateNode(),n.parent=e,n.userData=null,n.aabb.Combine(t.aabb,i.aabb),e){i.parent.child1==i?e.child1=n:e.child2=n,n.child1=i,n.child2=t,i.parent=n,t.parent=n;do{if(e.aabb.Contains(n.aabb))break;e.aabb.Combine(e.child1.aabb,e.child2.aabb),n=e,e=e.parent}while(e)}else n.child1=i,n.child2=t,i.parent=n,this.m_root=t.parent=n}},x.prototype.RemoveLeaf=function(t){if(t==this.m_root)this.m_root=null;else{var e=t.parent,i=e.parent;if(t=e.child1==t?e.child2:e.child1,i)for(i.child1==e?i.child1=t:i.child2=t,t.parent=i,this.FreeNode(e);i&&(e=i.aabb,i.aabb=l.Combine(i.child1.aabb,i.child2.aabb),!e.Contains(i.aabb));)i=i.parent;else this.m_root=t,t.parent=null,this.FreeNode(e)}},g.b2DynamicTreeBroadPhase=function(){this.m_tree=new x,this.m_moveBuffer=new Vector,this.m_pairBuffer=new Vector,this.m_pairCount=0},g.prototype.CreateProxy=function(t,e){var i=this.m_tree.CreateProxy(t,e);return++this.m_proxyCount,this.BufferMove(i),i},g.prototype.DestroyProxy=function(t){this.UnBufferMove(t),--this.m_proxyCount,this.m_tree.DestroyProxy(t)},g.prototype.MoveProxy=function(t,e,i){this.m_tree.MoveProxy(t,e,i)&&this.BufferMove(t)},g.prototype.TestOverlap=function(t,e){var i=this.m_tree.GetFatAABB(t),n=this.m_tree.GetFatAABB(e);return i.TestOverlap(n)},g.prototype.GetUserData=function(t){return this.m_tree.GetUserData(t)},g.prototype.GetFatAABB=function(t){return this.m_tree.GetFatAABB(t)},g.prototype.GetProxyCount=function(){return this.m_proxyCount},g.prototype.UpdatePairs=function(t){var e,i=this,n=i.m_pairCount=0;for(n=0;n<i.m_moveBuffer.length;++n){e=i.m_moveBuffer[n];var o=i.m_tree.GetFatAABB(e);i.m_tree.Query(function(t){if(t==e)return!0;i.m_pairCount==i.m_pairBuffer.length&&(i.m_pairBuffer[i.m_pairCount]=new b);var n=i.m_pairBuffer[i.m_pairCount];return n.proxyA=e>t?t:e,n.proxyB=t>=e?t:e,++i.m_pairCount,!0},o)}for(n=i.m_moveBuffer.length=0;n<i.m_pairCount;){o=i.m_pairBuffer[n];var s=i.m_tree.GetUserData(o.proxyA),r=i.m_tree.GetUserData(o.proxyB);for(t(s,r),++n;n<i.m_pairCount&&(s=i.m_pairBuffer[n],s.proxyA==o.proxyA&&s.proxyB==o.proxyB);)++n}},g.prototype.Query=function(t,e){this.m_tree.Query(t,e)},g.prototype.RayCast=function(t,e){this.m_tree.RayCast(t,e)},g.prototype.Validate=function(){},g.prototype.Rebalance=function(t){void 0===t&&(t=0),this.m_tree.Rebalance(t)},g.prototype.BufferMove=function(t){this.m_moveBuffer[this.m_moveBuffer.length]=t},g.prototype.UnBufferMove=function(t){this.m_moveBuffer.splice(parseInt(this.m_moveBuffer.indexOf(t)),1)},g.prototype.ComparePairs=function(){return 0},g.__implements={},g.__implements[j]=!0,v.b2DynamicTreeNode=function(){this.aabb=new l},v.prototype.IsLeaf=function(){return null==this.child1},b.b2DynamicTreePair=function(){},w.b2Manifold=function(){this.m_pointCount=0},w.prototype.b2Manifold=function(){this.m_points=new Vector(n.b2_maxManifoldPoints);for(var t=0;t<n.b2_maxManifoldPoints;t++)this.m_points[t]=new C;this.m_localPlaneNormal=new a,this.m_localPoint=new a},w.prototype.Reset=function(){for(var t=0;t<n.b2_maxManifoldPoints;t++)(this.m_points[t]instanceof C?this.m_points[t]:null).Reset();this.m_localPlaneNormal.SetZero(),this.m_localPoint.SetZero(),this.m_pointCount=this.m_type=0},w.prototype.Set=function(t){this.m_pointCount=t.m_pointCount;for(var e=0;e<n.b2_maxManifoldPoints;e++)(this.m_points[e]instanceof C?this.m_points[e]:null).Set(t.m_points[e]);this.m_localPlaneNormal.SetV(t.m_localPlaneNormal),this.m_localPoint.SetV(t.m_localPoint),this.m_type=t.m_type},w.prototype.Copy=function(){var t=new w;return t.Set(this),t},Box2D.postDefs.push(function(){Box2D.Collision.b2Manifold.e_circles=1,Box2D.Collision.b2Manifold.e_faceA=2,Box2D.Collision.b2Manifold.e_faceB=4}),C.b2ManifoldPoint=function(){this.m_localPoint=new a,this.m_id=new m},C.prototype.b2ManifoldPoint=function(){this.Reset()},C.prototype.Reset=function(){this.m_localPoint.SetZero(),this.m_tangentImpulse=this.m_normalImpulse=0,this.m_id.key=0},C.prototype.Set=function(t){this.m_localPoint.SetV(t.m_localPoint),this.m_normalImpulse=t.m_normalImpulse,this.m_tangentImpulse=t.m_tangentImpulse,this.m_id.Set(t.m_id)},D.b2Point=function(){this.p=new a},D.prototype.Support=function(){return this.p},D.prototype.GetFirstVertex=function(){return this.p},S.b2RayCastInput=function(){this.p1=new a,this.p2=new a},S.prototype.b2RayCastInput=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=1),t&&this.p1.SetV(t),e&&this.p2.SetV(e),this.maxFraction=i},B.b2RayCastOutput=function(){this.normal=new a},A.b2Segment=function(){this.p1=new a,this.p2=new a},A.prototype.TestSegment=function(t,e,i,n){void 0===n&&(n=0);var o=i.p1,s=i.p2.x-o.x,r=i.p2.y-o.y;i=this.p2.y-this.p1.y;var a=-(this.p2.x-this.p1.x),l=100*Number.MIN_VALUE,c=-(s*i+r*a);if(c>l){var h=o.x-this.p1.x,u=o.y-this.p1.y;if(o=h*i+u*a,o>=0&&n*c>=o&&(n=-s*u+r*h,n>=-l*c&&c*(1+l)>=n))return o/=c,n=Math.sqrt(i*i+a*a),i/=n,a/=n,t[0]=o,e.Set(i,a),!0}return!1},A.prototype.Extend=function(t){this.ExtendForward(t),this.ExtendBackward(t)},A.prototype.ExtendForward=function(t){var e=this.p2.x-this.p1.x,i=this.p2.y-this.p1.y;t=Math.min(e>0?(t.upperBound.x-this.p1.x)/e:0>e?(t.lowerBound.x-this.p1.x)/e:Number.POSITIVE_INFINITY,i>0?(t.upperBound.y-this.p1.y)/i:0>i?(t.lowerBound.y-this.p1.y)/i:Number.POSITIVE_INFINITY),this.p2.x=this.p1.x+e*t,this.p2.y=this.p1.y+i*t},A.prototype.ExtendBackward=function(t){var e=-this.p2.x+this.p1.x,i=-this.p2.y+this.p1.y;t=Math.min(e>0?(t.upperBound.x-this.p2.x)/e:0>e?(t.lowerBound.x-this.p2.x)/e:Number.POSITIVE_INFINITY,i>0?(t.upperBound.y-this.p2.y)/i:0>i?(t.lowerBound.y-this.p2.y)/i:Number.POSITIVE_INFINITY),this.p1.x=this.p2.x+e*t,this.p1.y=this.p2.y+i*t},M.b2SeparationFunction=function(){this.m_localPoint=new a,this.m_axis=new a},M.prototype.Initialize=function(t,e,i,s,r){this.m_proxyA=e,this.m_proxyB=s;var l=parseInt(t.count);n.b2Assert(l>0&&3>l);var c,h,u,m,p=m=u=s=e=0,_=0;p=0,1==l?(this.m_type=M.e_points,c=this.m_proxyA.GetVertex(t.indexA[0]),h=this.m_proxyB.GetVertex(t.indexB[0]),l=c,t=i.R,e=i.position.x+(t.col1.x*l.x+t.col2.x*l.y),s=i.position.y+(t.col1.y*l.x+t.col2.y*l.y),l=h,t=r.R,u=r.position.x+(t.col1.x*l.x+t.col2.x*l.y),m=r.position.y+(t.col1.y*l.x+t.col2.y*l.y),this.m_axis.x=u-e,this.m_axis.y=m-s,this.m_axis.Normalize()):(t.indexB[0]==t.indexB[1]?(this.m_type=M.e_faceA,e=this.m_proxyA.GetVertex(t.indexA[0]),s=this.m_proxyA.GetVertex(t.indexA[1]),h=this.m_proxyB.GetVertex(t.indexB[0]),this.m_localPoint.x=.5*(e.x+s.x),this.m_localPoint.y=.5*(e.y+s.y),this.m_axis=o.CrossVF(o.SubtractVV(s,e),1),this.m_axis.Normalize(),l=this.m_axis,t=i.R,p=t.col1.x*l.x+t.col2.x*l.y,_=t.col1.y*l.x+t.col2.y*l.y,l=this.m_localPoint,t=i.R,e=i.position.x+(t.col1.x*l.x+t.col2.x*l.y),s=i.position.y+(t.col1.y*l.x+t.col2.y*l.y),l=h,t=r.R,u=r.position.x+(t.col1.x*l.x+t.col2.x*l.y),m=r.position.y+(t.col1.y*l.x+t.col2.y*l.y),p=(u-e)*p+(m-s)*_):t.indexA[0]==t.indexA[0]?(this.m_type=M.e_faceB,u=this.m_proxyB.GetVertex(t.indexB[0]),m=this.m_proxyB.GetVertex(t.indexB[1]),c=this.m_proxyA.GetVertex(t.indexA[0]),this.m_localPoint.x=.5*(u.x+m.x),this.m_localPoint.y=.5*(u.y+m.y),this.m_axis=o.CrossVF(o.SubtractVV(m,u),1),this.m_axis.Normalize(),l=this.m_axis,t=r.R,p=t.col1.x*l.x+t.col2.x*l.y,_=t.col1.y*l.x+t.col2.y*l.y,l=this.m_localPoint,t=r.R,u=r.position.x+(t.col1.x*l.x+t.col2.x*l.y),m=r.position.y+(t.col1.y*l.x+t.col2.y*l.y),l=c,t=i.R,e=i.position.x+(t.col1.x*l.x+t.col2.x*l.y),s=i.position.y+(t.col1.y*l.x+t.col2.y*l.y),p=(e-u)*p+(s-m)*_):(e=this.m_proxyA.GetVertex(t.indexA[0]),s=this.m_proxyA.GetVertex(t.indexA[1]),u=this.m_proxyB.GetVertex(t.indexB[0]),m=this.m_proxyB.GetVertex(t.indexB[1]),o.MulX(i,c),c=o.MulMV(i.R,o.SubtractVV(s,e)),o.MulX(r,h),p=o.MulMV(r.R,o.SubtractVV(m,u)),r=c.x*c.x+c.y*c.y,h=p.x*p.x+p.y*p.y,t=o.SubtractVV(p,c),i=c.x*t.x+c.y*t.y,t=p.x*t.x+p.y*t.y,c=c.x*p.x+c.y*p.y,_=r*h-c*c,p=0,0!=_&&(p=o.Clamp((c*t-i*h)/_,0,1)),0>(c*p+t)/h&&(p=o.Clamp((c-i)/r,0,1)),c=new a,c.x=e.x+p*(s.x-e.x),c.y=e.y+p*(s.y-e.y),h=new a,h.x=u.x+p*(m.x-u.x),h.y=u.y+p*(m.y-u.y),0==p||1==p?(this.m_type=M.e_faceB,this.m_axis=o.CrossVF(o.SubtractVV(m,u),1),this.m_axis.Normalize(),this.m_localPoint=h):(this.m_type=M.e_faceA,this.m_axis=o.CrossVF(o.SubtractVV(s,e),1),this.m_localPoint=c)),0>p&&this.m_axis.NegativeSelf())},M.prototype.Evaluate=function(t,e){var i,s,r=0;switch(this.m_type){case M.e_points:return i=o.MulTMV(t.R,this.m_axis),s=o.MulTMV(e.R,this.m_axis.GetNegative()),i=this.m_proxyA.GetSupportVertex(i),s=this.m_proxyB.GetSupportVertex(s),i=o.MulX(t,i),s=o.MulX(e,s),r=(s.x-i.x)*this.m_axis.x+(s.y-i.y)*this.m_axis.y;case M.e_faceA:return r=o.MulMV(t.R,this.m_axis),i=o.MulX(t,this.m_localPoint),s=o.MulTMV(e.R,r.GetNegative()),s=this.m_proxyB.GetSupportVertex(s),s=o.MulX(e,s),r=(s.x-i.x)*r.x+(s.y-i.y)*r.y;case M.e_faceB:return r=o.MulMV(e.R,this.m_axis),s=o.MulX(e,this.m_localPoint),i=o.MulTMV(t.R,r.GetNegative()),i=this.m_proxyA.GetSupportVertex(i),i=o.MulX(t,i),r=(i.x-s.x)*r.x+(i.y-s.y)*r.y;default:return n.b2Assert(!1),0}},Box2D.postDefs.push(function(){Box2D.Collision.b2SeparationFunction.e_points=1,Box2D.Collision.b2SeparationFunction.e_faceA=2,Box2D.Collision.b2SeparationFunction.e_faceB=4}),T.b2Simplex=function(){this.m_v1=new V,this.m_v2=new V,this.m_v3=new V,this.m_vertices=new Vector(3)},T.prototype.b2Simplex=function(){this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3},T.prototype.ReadCache=function(t,e,i,s,r){n.b2Assert(0<=t.count&&t.count<=3);var a,l;this.m_count=t.count;for(var c=this.m_vertices,h=0;h<this.m_count;h++){var u=c[h];u.indexA=t.indexA[h],u.indexB=t.indexB[h],a=e.GetVertex(u.indexA),l=s.GetVertex(u.indexB),u.wA=o.MulX(i,a),u.wB=o.MulX(r,l),u.w=o.SubtractVV(u.wB,u.wA),u.a=0}this.m_count>1&&(t=t.metric,a=this.GetMetric(),(.5*t>a||a>2*t||a<Number.MIN_VALUE)&&(this.m_count=0)),0==this.m_count&&(u=c[0],u.indexA=0,u.indexB=0,a=e.GetVertex(0),l=s.GetVertex(0),u.wA=o.MulX(i,a),u.wB=o.MulX(r,l),u.w=o.SubtractVV(u.wB,u.wA),this.m_count=1)},T.prototype.WriteCache=function(t){t.metric=this.GetMetric(),t.count=Box2D.parseUInt(this.m_count);for(var e=this.m_vertices,i=0;i<this.m_count;i++)t.indexA[i]=Box2D.parseUInt(e[i].indexA),t.indexB[i]=Box2D.parseUInt(e[i].indexB)},T.prototype.GetSearchDirection=function(){switch(this.m_count){case 1:return this.m_v1.w.GetNegative();case 2:var t=o.SubtractVV(this.m_v2.w,this.m_v1.w);return o.CrossVV(t,this.m_v1.w.GetNegative())>0?o.CrossFV(1,t):o.CrossVF(t,1);default:return n.b2Assert(!1),new a}},T.prototype.GetClosestPoint=function(){switch(this.m_count){case 0:return n.b2Assert(!1),new a;case 1:return this.m_v1.w;case 2:return new a(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);default:return n.b2Assert(!1),new a}},T.prototype.GetWitnessPoints=function(t,e){switch(this.m_count){case 0:n.b2Assert(!1);break;case 1:t.SetV(this.m_v1.wA),e.SetV(this.m_v1.wB);break;case 2:t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,e.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,e.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:e.x=t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,e.y=t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y;break;default:n.b2Assert(!1)}},T.prototype.GetMetric=function(){switch(this.m_count){case 0:return n.b2Assert(!1),0;case 1:return 0;case 2:return o.SubtractVV(this.m_v1.w,this.m_v2.w).Length();case 3:return o.CrossVV(o.SubtractVV(this.m_v2.w,this.m_v1.w),o.SubtractVV(this.m_v3.w,this.m_v1.w));default:return n.b2Assert(!1),0}},T.prototype.Solve2=function(){var t=this.m_v1.w,e=this.m_v2.w,i=o.SubtractVV(e,t);t=-(t.x*i.x+t.y*i.y),0>=t?this.m_count=this.m_v1.a=1:(e=e.x*i.x+e.y*i.y,0>=e?(this.m_count=this.m_v2.a=1,this.m_v1.Set(this.m_v2)):(i=1/(e+t),this.m_v1.a=e*i,this.m_v2.a=t*i,this.m_count=2))},T.prototype.Solve3=function(){var t=this.m_v1.w,e=this.m_v2.w,i=this.m_v3.w,n=o.SubtractVV(e,t),s=o.Dot(t,n),r=o.Dot(e,n);s=-s;var a=o.SubtractVV(i,t),l=o.Dot(t,a),c=o.Dot(i,a);l=-l;var h=o.SubtractVV(i,e),u=o.Dot(e,h);h=o.Dot(i,h),u=-u,a=o.CrossVV(n,a),n=a*o.CrossVV(e,i),i=a*o.CrossVV(i,t),t=a*o.CrossVV(t,e),0>=s&&0>=l?this.m_count=this.m_v1.a=1:r>0&&s>0&&0>=t?(c=1/(r+s),this.m_v1.a=r*c,this.m_v2.a=s*c,this.m_count=2):c>0&&l>0&&0>=i?(r=1/(c+l),this.m_v1.a=c*r,this.m_v3.a=l*r,this.m_count=2,this.m_v2.Set(this.m_v3)):0>=r&&0>=u?(this.m_count=this.m_v2.a=1,this.m_v1.Set(this.m_v2)):0>=c&&0>=h?(this.m_count=this.m_v3.a=1,this.m_v1.Set(this.m_v3)):h>0&&u>0&&0>=n?(r=1/(h+u),this.m_v2.a=h*r,this.m_v3.a=u*r,this.m_count=2,this.m_v1.Set(this.m_v3)):(r=1/(n+i+t),this.m_v1.a=n*r,this.m_v2.a=i*r,this.m_v3.a=t*r,this.m_count=3)},I.b2SimplexCache=function(){this.indexA=new Vector_a2j_Number(3),this.indexB=new Vector_a2j_Number(3)},V.b2SimplexVertex=function(){},V.prototype.Set=function(t){this.wA.SetV(t.wA),this.wB.SetV(t.wB),this.w.SetV(t.w),this.a=t.a,this.indexA=t.indexA,this.indexB=t.indexB},L.b2TimeOfImpact=function(){},L.TimeOfImpact=function(t){++L.b2_toiCalls;var e=t.proxyA,i=t.proxyB,s=t.sweepA,r=t.sweepB;n.b2Assert(s.t0==r.t0),n.b2Assert(1-s.t0>Number.MIN_VALUE);var a=e.m_radius+i.m_radius;t=t.tolerance;var l=0,c=0,h=0;for(L.s_cache.count=0,L.s_distanceInput.useRadii=!1;;){if(s.GetTransform(L.s_xfA,l),r.GetTransform(L.s_xfB,l),L.s_distanceInput.proxyA=e,L.s_distanceInput.proxyB=i,L.s_distanceInput.transformA=L.s_xfA,L.s_distanceInput.transformB=L.s_xfB,_.Distance(L.s_distanceOutput,L.s_cache,L.s_distanceInput),L.s_distanceOutput.distance<=0){l=1;break}L.s_fcn.Initialize(L.s_cache,e,L.s_xfA,i,L.s_xfB);var u=L.s_fcn.Evaluate(L.s_xfA,L.s_xfB);if(0>=u){l=1;break}if(0==c&&(h=u>a?o.Max(a-t,.75*a):o.Max(u-t,.02*a)),.5*t>u-h){if(0==c){l=1;break}break}var m=l,p=l,d=1;u=u,s.GetTransform(L.s_xfA,d),r.GetTransform(L.s_xfB,d);var f=L.s_fcn.Evaluate(L.s_xfA,L.s_xfB);if(f>=h){l=1;break}for(var y=0;;){var x=0;x=1&y?p+(h-u)*(d-p)/(f-u):.5*(p+d),s.GetTransform(L.s_xfA,x),r.GetTransform(L.s_xfB,x);var g=L.s_fcn.Evaluate(L.s_xfA,L.s_xfB);if(o.Abs(g-h)<.025*t){m=x;break}if(g>h?(p=x,u=g):(d=x,f=g),++y,++L.b2_toiRootIters,50==y)break}if(L.b2_toiMaxRootIters=o.Max(L.b2_toiMaxRootIters,y),m<(1+100*Number.MIN_VALUE)*l)break;if(l=m,c++,++L.b2_toiIters,1e3==c)break}return L.b2_toiMaxIters=o.Max(L.b2_toiMaxIters,c),l},Box2D.postDefs.push(function(){Box2D.Collision.b2TimeOfImpact.b2_toiCalls=0,Box2D.Collision.b2TimeOfImpact.b2_toiIters=0,Box2D.Collision.b2TimeOfImpact.b2_toiMaxIters=0,Box2D.Collision.b2TimeOfImpact.b2_toiRootIters=0,Box2D.Collision.b2TimeOfImpact.b2_toiMaxRootIters=0,Box2D.Collision.b2TimeOfImpact.s_cache=new I,Box2D.Collision.b2TimeOfImpact.s_distanceInput=new d,Box2D.Collision.b2TimeOfImpact.s_xfA=new r,Box2D.Collision.b2TimeOfImpact.s_xfB=new r,Box2D.Collision.b2TimeOfImpact.s_fcn=new M,Box2D.Collision.b2TimeOfImpact.s_distanceOutput=new f}),E.b2TOIInput=function(){this.proxyA=new y,this.proxyB=new y,this.sweepA=new s,this.sweepB=new s},P.b2WorldManifold=function(){this.m_normal=new a},P.prototype.b2WorldManifold=function(){this.m_points=new Vector(n.b2_maxManifoldPoints);for(var t=0;t<n.b2_maxManifoldPoints;t++)this.m_points[t]=new a},P.prototype.Initialize=function(t,e,i,n,o){if(void 0===i&&(i=0),void 0===o&&(o=0),0!=t.m_pointCount){var s,r,a=0,l=0,c=0,h=0,u=0,m=0;switch(s=0,t.m_type){case w.e_circles:r=e.R,s=t.m_localPoint,a=e.position.x+r.col1.x*s.x+r.col2.x*s.y,e=e.position.y+r.col1.y*s.x+r.col2.y*s.y,r=n.R,s=t.m_points[0].m_localPoint,t=n.position.x+r.col1.x*s.x+r.col2.x*s.y,n=n.position.y+r.col1.y*s.x+r.col2.y*s.y,s=t-a,r=n-e,l=s*s+r*r,l>Number.MIN_VALUE*Number.MIN_VALUE?(l=Math.sqrt(l),this.m_normal.x=s/l,this.m_normal.y=r/l):(this.m_normal.x=1,this.m_normal.y=0),s=e+i*this.m_normal.y,n-=o*this.m_normal.y,this.m_points[0].x=.5*(a+i*this.m_normal.x+(t-o*this.m_normal.x)),this.m_points[0].y=.5*(s+n);break;case w.e_faceA:for(r=e.R,s=t.m_localPlaneNormal,l=r.col1.x*s.x+r.col2.x*s.y,c=r.col1.y*s.x+r.col2.y*s.y,r=e.R,s=t.m_localPoint,h=e.position.x+r.col1.x*s.x+r.col2.x*s.y,u=e.position.y+r.col1.y*s.x+r.col2.y*s.y,this.m_normal.x=l,this.m_normal.y=c,a=0;a<t.m_pointCount;a++)r=n.R,s=t.m_points[a].m_localPoint,m=n.position.x+r.col1.x*s.x+r.col2.x*s.y,s=n.position.y+r.col1.y*s.x+r.col2.y*s.y,this.m_points[a].x=m+.5*(i-(m-h)*l-(s-u)*c-o)*l,this.m_points[a].y=s+.5*(i-(m-h)*l-(s-u)*c-o)*c;break;case w.e_faceB:for(r=n.R,s=t.m_localPlaneNormal,l=r.col1.x*s.x+r.col2.x*s.y,c=r.col1.y*s.x+r.col2.y*s.y,r=n.R,s=t.m_localPoint,h=n.position.x+r.col1.x*s.x+r.col2.x*s.y,u=n.position.y+r.col1.y*s.x+r.col2.y*s.y,this.m_normal.x=-l,this.m_normal.y=-c,a=0;a<t.m_pointCount;a++)r=e.R,s=t.m_points[a].m_localPoint,m=e.position.x+r.col1.x*s.x+r.col2.x*s.y,s=e.position.y+r.col1.y*s.x+r.col2.y*s.y,this.m_points[a].x=m+.5*(o-(m-h)*l-(s-u)*c-i)*l,this.m_points[a].y=s+.5*(o-(m-h)*l-(s-u)*c-i)*c}}},k.ClipVertex=function(){this.v=new a,this.id=new m},k.prototype.Set=function(t){this.v.SetV(t.v),this.id.Set(t.id)},F.Features=function(){},Object.defineProperty(F.prototype,"referenceEdge",{enumerable:!1,configurable:!0,get:function(){return this._referenceEdge}}),Object.defineProperty(F.prototype,"referenceEdge",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._referenceEdge=t,this._m_id._key=4294967040&this._m_id._key|255&this._referenceEdge}}),Object.defineProperty(F.prototype,"incidentEdge",{enumerable:!1,configurable:!0,get:function(){return this._incidentEdge}}),Object.defineProperty(F.prototype,"incidentEdge",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._incidentEdge=t,this._m_id._key=4294902015&this._m_id._key|this._incidentEdge<<8&65280}}),Object.defineProperty(F.prototype,"incidentVertex",{enumerable:!1,configurable:!0,get:function(){return this._incidentVertex}}),Object.defineProperty(F.prototype,"incidentVertex",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._incidentVertex=t,this._m_id._key=4278255615&this._m_id._key|this._incidentVertex<<16&16711680}}),Object.defineProperty(F.prototype,"flip",{enumerable:!1,configurable:!0,get:function(){return this._flip}}),Object.defineProperty(F.prototype,"flip",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._flip=t,this._m_id._key=16777215&this._m_id._key|this._flip<<24&4278190080}})}(),function(){var t=Box2D.Common.b2Settings,e=Box2D.Collision.Shapes.b2CircleShape,i=Box2D.Collision.Shapes.b2EdgeChainDef,n=Box2D.Collision.Shapes.b2EdgeShape,o=Box2D.Collision.Shapes.b2MassData,s=Box2D.Collision.Shapes.b2PolygonShape,r=Box2D.Collision.Shapes.b2Shape,a=Box2D.Common.Math.b2Mat22,l=Box2D.Common.Math.b2Math,c=Box2D.Common.Math.b2Transform,h=Box2D.Common.Math.b2Vec2,u=Box2D.Collision.b2Distance,m=Box2D.Collision.b2DistanceInput,p=Box2D.Collision.b2DistanceOutput,_=Box2D.Collision.b2DistanceProxy,d=Box2D.Collision.b2SimplexCache;Box2D.inherit(e,Box2D.Collision.Shapes.b2Shape),e.prototype.__super=Box2D.Collision.Shapes.b2Shape.prototype,e.b2CircleShape=function(){Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments),this.m_p=new h},e.prototype.Copy=function(){var t=new e;return t.Set(this),t},e.prototype.Set=function(t){this.__super.Set.call(this,t),Box2D.is(t,e)&&this.m_p.SetV((t instanceof e?t:null).m_p)},e.prototype.TestPoint=function(t,e){var i=t.R,n=t.position.x+(i.col1.x*this.m_p.x+i.col2.x*this.m_p.y);return i=t.position.y+(i.col1.y*this.m_p.x+i.col2.y*this.m_p.y),n=e.x-n,i=e.y-i,n*n+i*i<=this.m_radius*this.m_radius},e.prototype.RayCast=function(t,e,i){var n=i.R,o=e.p1.x-(i.position.x+(n.col1.x*this.m_p.x+n.col2.x*this.m_p.y));i=e.p1.y-(i.position.y+(n.col1.y*this.m_p.x+n.col2.y*this.m_p.y)),n=e.p2.x-e.p1.x;var s=e.p2.y-e.p1.y,r=o*n+i*s,a=n*n+s*s,l=r*r-a*(o*o+i*i-this.m_radius*this.m_radius);return 0>l||a<Number.MIN_VALUE?!1:(r=-(r+Math.sqrt(l)),r>=0&&r<=e.maxFraction*a?(r/=a,t.fraction=r,t.normal.x=o+r*n,t.normal.y=i+r*s,t.normal.Normalize(),!0):!1)},e.prototype.ComputeAABB=function(t,e){var i=e.R,n=e.position.x+(i.col1.x*this.m_p.x+i.col2.x*this.m_p.y);i=e.position.y+(i.col1.y*this.m_p.x+i.col2.y*this.m_p.y),t.lowerBound.Set(n-this.m_radius,i-this.m_radius),t.upperBound.Set(n+this.m_radius,i+this.m_radius)},e.prototype.ComputeMass=function(e,i){void 0===i&&(i=0),e.mass=i*t.b2_pi*this.m_radius*this.m_radius,e.center.SetV(this.m_p),e.I=e.mass*(.5*this.m_radius*this.m_radius+(this.m_p.x*this.m_p.x+this.m_p.y*this.m_p.y))},e.prototype.ComputeSubmergedArea=function(t,e,i,n){void 0===e&&(e=0),i=l.MulX(i,this.m_p);var o=-(l.Dot(t,i)-e);if(o<-this.m_radius+Number.MIN_VALUE)return 0;if(o>this.m_radius)return n.SetV(i),Math.PI*this.m_radius*this.m_radius;e=this.m_radius*this.m_radius;var s=o*o;return o=e*(Math.asin(o/this.m_radius)+Math.PI/2)+o*Math.sqrt(e-s),e=-2/3*Math.pow(e-s,1.5)/o,n.x=i.x+t.x*e,n.y=i.y+t.y*e,o},e.prototype.GetLocalPosition=function(){return this.m_p},e.prototype.SetLocalPosition=function(t){this.m_p.SetV(t)},e.prototype.GetRadius=function(){return this.m_radius},e.prototype.SetRadius=function(t){void 0===t&&(t=0),this.m_radius=t},e.prototype.b2CircleShape=function(t){void 0===t&&(t=0),this.__super.b2Shape.call(this),this.m_type=r.e_circleShape,this.m_radius=t},i.b2EdgeChainDef=function(){},i.prototype.b2EdgeChainDef=function(){this.vertexCount=0,this.isALoop=!0,this.vertices=[]},Box2D.inherit(n,Box2D.Collision.Shapes.b2Shape),n.prototype.__super=Box2D.Collision.Shapes.b2Shape.prototype,n.b2EdgeShape=function(){Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments),this.s_supportVec=new h,this.m_v1=new h,this.m_v2=new h,this.m_coreV1=new h,this.m_coreV2=new h,this.m_normal=new h,this.m_direction=new h,this.m_cornerDir1=new h,this.m_cornerDir2=new h},n.prototype.TestPoint=function(){return!1},n.prototype.RayCast=function(t,e,i){var n,o=e.p2.x-e.p1.x,s=e.p2.y-e.p1.y;n=i.R;var r=i.position.x+(n.col1.x*this.m_v1.x+n.col2.x*this.m_v1.y),a=i.position.y+(n.col1.y*this.m_v1.x+n.col2.y*this.m_v1.y),l=i.position.y+(n.col1.y*this.m_v2.x+n.col2.y*this.m_v2.y)-a;i=-(i.position.x+(n.col1.x*this.m_v2.x+n.col2.x*this.m_v2.y)-r),n=100*Number.MIN_VALUE;var c=-(o*l+s*i);if(c>n){r=e.p1.x-r;var h=e.p1.y-a;if(a=r*l+h*i,a>=0&&a<=e.maxFraction*c&&(e=-o*h+s*r,e>=-n*c&&c*(1+n)>=e))return a/=c,t.fraction=a,e=Math.sqrt(l*l+i*i),t.normal.x=l/e,t.normal.y=i/e,!0}return!1},n.prototype.ComputeAABB=function(t,e){var i=e.R,n=e.position.x+(i.col1.x*this.m_v1.x+i.col2.x*this.m_v1.y),o=e.position.y+(i.col1.y*this.m_v1.x+i.col2.y*this.m_v1.y),s=e.position.x+(i.col1.x*this.m_v2.x+i.col2.x*this.m_v2.y);i=e.position.y+(i.col1.y*this.m_v2.x+i.col2.y*this.m_v2.y),s>n?(t.lowerBound.x=n,t.upperBound.x=s):(t.lowerBound.x=s,t.upperBound.x=n),i>o?(t.lowerBound.y=o,t.upperBound.y=i):(t.lowerBound.y=i,t.upperBound.y=o)},n.prototype.ComputeMass=function(t){t.mass=0,t.center.SetV(this.m_v1),t.I=0},n.prototype.ComputeSubmergedArea=function(t,e,i,n){void 0===e&&(e=0);var o=new h(t.x*e,t.y*e),s=l.MulX(i,this.m_v1);i=l.MulX(i,this.m_v2);var r=l.Dot(t,s)-e;if(t=l.Dot(t,i)-e,r>0){if(t>0)return 0;s.x=-t/(r-t)*s.x+r/(r-t)*i.x,s.y=-t/(r-t)*s.y+r/(r-t)*i.y}else t>0&&(i.x=-t/(r-t)*s.x+r/(r-t)*i.x,i.y=-t/(r-t)*s.y+r/(r-t)*i.y);return n.x=(o.x+s.x+i.x)/3,n.y=(o.y+s.y+i.y)/3,.5*((s.x-o.x)*(i.y-o.y)-(s.y-o.y)*(i.x-o.x))},n.prototype.GetLength=function(){return this.m_length},n.prototype.GetVertex1=function(){return this.m_v1},n.prototype.GetVertex2=function(){return this.m_v2},n.prototype.GetCoreVertex1=function(){return this.m_coreV1},n.prototype.GetCoreVertex2=function(){return this.m_coreV2},n.prototype.GetNormalVector=function(){return this.m_normal},n.prototype.GetDirectionVector=function(){return this.m_direction},n.prototype.GetCorner1Vector=function(){return this.m_cornerDir1},n.prototype.GetCorner2Vector=function(){return this.m_cornerDir2},n.prototype.Corner1IsConvex=function(){return this.m_cornerConvex1},n.prototype.Corner2IsConvex=function(){return this.m_cornerConvex2},n.prototype.GetFirstVertex=function(t){var e=t.R;return new h(t.position.x+(e.col1.x*this.m_coreV1.x+e.col2.x*this.m_coreV1.y),t.position.y+(e.col1.y*this.m_coreV1.x+e.col2.y*this.m_coreV1.y))},n.prototype.GetNextEdge=function(){return this.m_nextEdge},n.prototype.GetPrevEdge=function(){return this.m_prevEdge},n.prototype.Support=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n=t.R,o=t.position.x+(n.col1.x*this.m_coreV1.x+n.col2.x*this.m_coreV1.y),s=t.position.y+(n.col1.y*this.m_coreV1.x+n.col2.y*this.m_coreV1.y),r=t.position.x+(n.col1.x*this.m_coreV2.x+n.col2.x*this.m_coreV2.y);return t=t.position.y+(n.col1.y*this.m_coreV2.x+n.col2.y*this.m_coreV2.y),o*e+s*i>r*e+t*i?(this.s_supportVec.x=o,this.s_supportVec.y=s):(this.s_supportVec.x=r,this.s_supportVec.y=t),this.s_supportVec},n.prototype.b2EdgeShape=function(e,i){this.__super.b2Shape.call(this),this.m_type=r.e_edgeShape,this.m_nextEdge=this.m_prevEdge=null,this.m_v1=e,this.m_v2=i,this.m_direction.Set(this.m_v2.x-this.m_v1.x,this.m_v2.y-this.m_v1.y),this.m_length=this.m_direction.Normalize(),this.m_normal.Set(this.m_direction.y,-this.m_direction.x),this.m_coreV1.Set(-t.b2_toiSlop*(this.m_normal.x-this.m_direction.x)+this.m_v1.x,-t.b2_toiSlop*(this.m_normal.y-this.m_direction.y)+this.m_v1.y),this.m_coreV2.Set(-t.b2_toiSlop*(this.m_normal.x+this.m_direction.x)+this.m_v2.x,-t.b2_toiSlop*(this.m_normal.y+this.m_direction.y)+this.m_v2.y),this.m_cornerDir1=this.m_normal,this.m_cornerDir2.Set(-this.m_normal.x,-this.m_normal.y)},n.prototype.SetPrevEdge=function(t,e,i,n){this.m_prevEdge=t,this.m_coreV1=e,this.m_cornerDir1=i,this.m_cornerConvex1=n},n.prototype.SetNextEdge=function(t,e,i,n){this.m_nextEdge=t,this.m_coreV2=e,this.m_cornerDir2=i,this.m_cornerConvex2=n},o.b2MassData=function(){this.mass=0,this.center=new h(0,0),this.I=0},Box2D.inherit(s,Box2D.Collision.Shapes.b2Shape),s.prototype.__super=Box2D.Collision.Shapes.b2Shape.prototype,s.b2PolygonShape=function(){Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments)},s.prototype.Copy=function(){var t=new s;return t.Set(this),t},s.prototype.Set=function(t){if(this.__super.Set.call(this,t),Box2D.is(t,s)){t=t instanceof s?t:null,this.m_centroid.SetV(t.m_centroid),this.m_vertexCount=t.m_vertexCount,this.Reserve(this.m_vertexCount);for(var e=0;e<this.m_vertexCount;e++)this.m_vertices[e].SetV(t.m_vertices[e]),this.m_normals[e].SetV(t.m_normals[e])}},s.prototype.SetAsArray=function(t,e){void 0===e&&(e=0);var i,n=new Vector,o=0;for(o=0;o<t.length;++o)i=t[o],n.push(i);this.SetAsVector(n,e)},s.AsArray=function(t,e){void 0===e&&(e=0);var i=new s;return i.SetAsArray(t,e),i},s.prototype.SetAsVector=function(e,i){void 0===i&&(i=0),0==i&&(i=e.length),t.b2Assert(i>=2),this.m_vertexCount=i,this.Reserve(i);var n=0;for(n=0;n<this.m_vertexCount;n++)this.m_vertices[n].SetV(e[n]);for(n=0;n<this.m_vertexCount;++n){var o=parseInt(n),r=parseInt(n+1<this.m_vertexCount?n+1:0);o=l.SubtractVV(this.m_vertices[r],this.m_vertices[o]),t.b2Assert(o.LengthSquared()>Number.MIN_VALUE),this.m_normals[n].SetV(l.CrossVF(o,1)),this.m_normals[n].Normalize()}this.m_centroid=s.ComputeCentroid(this.m_vertices,this.m_vertexCount)},s.AsVector=function(t,e){void 0===e&&(e=0);var i=new s;return i.SetAsVector(t,e),i},s.prototype.SetAsBox=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-t,-e),this.m_vertices[1].Set(t,-e),this.m_vertices[2].Set(t,e),this.m_vertices[3].Set(-t,e),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid.SetZero()},s.AsBox=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=new s;return i.SetAsBox(t,e),i},s.prototype.SetAsOrientedBox=function(t,e,i,n){for(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=null),void 0===n&&(n=0),this.m_vertexCount=4,this.Reserve(4),this.m_vertices[0].Set(-t,-e),this.m_vertices[1].Set(t,-e),this.m_vertices[2].Set(t,e),this.m_vertices[3].Set(-t,e),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid=i,t=new c,t.position=i,t.R.Set(n),i=0;i<this.m_vertexCount;++i)this.m_vertices[i]=l.MulX(t,this.m_vertices[i]),this.m_normals[i]=l.MulMV(t.R,this.m_normals[i])},s.AsOrientedBox=function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=null),void 0===n&&(n=0);var o=new s;return o.SetAsOrientedBox(t,e,i,n),o},s.prototype.SetAsEdge=function(t,e){this.m_vertexCount=2,this.Reserve(2),this.m_vertices[0].SetV(t),this.m_vertices[1].SetV(e),this.m_centroid.x=.5*(t.x+e.x),this.m_centroid.y=.5*(t.y+e.y),this.m_normals[0]=l.CrossVF(l.SubtractVV(e,t),1),this.m_normals[0].Normalize(),this.m_normals[1].x=-this.m_normals[0].x,this.m_normals[1].y=-this.m_normals[0].y},s.AsEdge=function(t,e){var i=new s;return i.SetAsEdge(t,e),i},s.prototype.TestPoint=function(t,e){var i;i=t.R;for(var n=e.x-t.position.x,o=e.y-t.position.y,s=n*i.col1.x+o*i.col1.y,r=n*i.col2.x+o*i.col2.y,a=0;a<this.m_vertexCount;++a)if(i=this.m_vertices[a],n=s-i.x,o=r-i.y,i=this.m_normals[a],i.x*n+i.y*o>0)return!1;return!0},s.prototype.RayCast=function(t,e,i){var n,o,s=0,r=e.maxFraction,a=0,l=0;a=e.p1.x-i.position.x,l=e.p1.y-i.position.y,n=i.R;var c=a*n.col1.x+l*n.col1.y,h=a*n.col2.x+l*n.col2.y;a=e.p2.x-i.position.x,l=e.p2.y-i.position.y,n=i.R,e=a*n.col1.x+l*n.col1.y-c,n=a*n.col2.x+l*n.col2.y-h;for(var u=parseInt(-1),m=0;m<this.m_vertexCount;++m){if(o=this.m_vertices[m],a=o.x-c,l=o.y-h,o=this.m_normals[m],a=o.x*a+o.y*l,l=o.x*e+o.y*n,0==l){if(0>a)return!1}else 0>l&&s*l>a?(s=a/l,u=m):l>0&&r*l>a&&(r=a/l);if(r<s-Number.MIN_VALUE)return!1}return u>=0?(t.fraction=s,n=i.R,o=this.m_normals[u],t.normal.x=n.col1.x*o.x+n.col2.x*o.y,t.normal.y=n.col1.y*o.x+n.col2.y*o.y,!0):!1},s.prototype.ComputeAABB=function(t,e){for(var i=e.R,n=this.m_vertices[0],o=e.position.x+(i.col1.x*n.x+i.col2.x*n.y),s=e.position.y+(i.col1.y*n.x+i.col2.y*n.y),r=o,a=s,l=1;l<this.m_vertexCount;++l){n=this.m_vertices[l];var c=e.position.x+(i.col1.x*n.x+i.col2.x*n.y);n=e.position.y+(i.col1.y*n.x+i.col2.y*n.y),o=c>o?o:c,s=n>s?s:n,r=r>c?r:c,a=a>n?a:n}t.lowerBound.x=o-this.m_radius,t.lowerBound.y=s-this.m_radius,t.upperBound.x=r+this.m_radius,t.upperBound.y=a+this.m_radius},s.prototype.ComputeMass=function(t,e){if(void 0===e&&(e=0),2==this.m_vertexCount)t.center.x=.5*(this.m_vertices[0].x+this.m_vertices[1].x),t.center.y=.5*(this.m_vertices[0].y+this.m_vertices[1].y),t.mass=0,t.I=0;else{for(var i=0,n=0,o=0,s=0,r=1/3,a=0;a<this.m_vertexCount;++a){var l=this.m_vertices[a],c=a+1<this.m_vertexCount?this.m_vertices[parseInt(a+1)]:this.m_vertices[0],h=l.x-0,u=l.y-0,m=c.x-0,p=c.y-0,_=h*p-u*m,d=.5*_;o+=d,i+=d*r*(0+l.x+c.x),n+=d*r*(0+l.y+c.y),l=h,u=u,m=m,p=p,s+=_*(r*(.25*(l*l+m*l+m*m)+(0*l+0*m))+0+(r*(.25*(u*u+p*u+p*p)+(0*u+0*p))+0))}t.mass=e*o,i*=1/o,n*=1/o,t.center.Set(i,n),t.I=e*s}},s.prototype.ComputeSubmergedArea=function(t,e,i,n){void 0===e&&(e=0);var s=l.MulTMV(i.R,t),r=e-l.Dot(t,i.position),a=new Vector_a2j_Number,c=0,u=parseInt(-1);e=parseInt(-1);var m=!1;for(t=t=0;t<this.m_vertexCount;++t){a[t]=l.Dot(s,this.m_vertices[t])-r;var p=a[t]<-Number.MIN_VALUE;t>0&&(p?m||(u=t-1,c++):m&&(e=t-1,c++)),m=p}switch(c){case 0:return m?(t=new o,this.ComputeMass(t,1),n.SetV(l.MulX(i,t.center)),t.mass):0;case 1:-1==u?u=this.m_vertexCount-1:e=this.m_vertexCount-1}for(t=parseInt((u+1)%this.m_vertexCount),s=parseInt((e+1)%this.m_vertexCount),r=(0-a[u])/(a[t]-a[u]),a=(0-a[e])/(a[s]-a[e]),u=new h(this.m_vertices[u].x*(1-r)+this.m_vertices[t].x*r,this.m_vertices[u].y*(1-r)+this.m_vertices[t].y*r),e=new h(this.m_vertices[e].x*(1-a)+this.m_vertices[s].x*a,this.m_vertices[e].y*(1-a)+this.m_vertices[s].y*a),a=0,r=new h,c=this.m_vertices[t],t=t;t!=s;)t=(t+1)%this.m_vertexCount,m=t==s?e:this.m_vertices[t],p=.5*((c.x-u.x)*(m.y-u.y)-(c.y-u.y)*(m.x-u.x)),a+=p,r.x+=p*(u.x+c.x+m.x)/3,r.y+=p*(u.y+c.y+m.y)/3,c=m;return r.Multiply(1/a),n.SetV(l.MulX(i,r)),a},s.prototype.GetVertexCount=function(){return this.m_vertexCount},s.prototype.GetVertices=function(){return this.m_vertices},s.prototype.GetNormals=function(){return this.m_normals},s.prototype.GetSupport=function(t){
for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,n=1;n<this.m_vertexCount;++n){var o=this.m_vertices[n].x*t.x+this.m_vertices[n].y*t.y;o>i&&(e=n,i=o)}return e},s.prototype.GetSupportVertex=function(t){for(var e=0,i=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y,n=1;n<this.m_vertexCount;++n){var o=this.m_vertices[n].x*t.x+this.m_vertices[n].y*t.y;o>i&&(e=n,i=o)}return this.m_vertices[e]},s.prototype.Validate=function(){return!1},s.prototype.b2PolygonShape=function(){this.__super.b2Shape.call(this),this.m_type=r.e_polygonShape,this.m_centroid=new h,this.m_vertices=new Vector,this.m_normals=new Vector},s.prototype.Reserve=function(t){void 0===t&&(t=0);for(var e=parseInt(this.m_vertices.length);t>e;e++)this.m_vertices[e]=new h,this.m_normals[e]=new h},s.ComputeCentroid=function(t,e){void 0===e&&(e=0);for(var i=new h,n=0,o=1/3,s=0;e>s;++s){var r=t[s],a=e>s+1?t[parseInt(s+1)]:t[0],l=.5*((r.x-0)*(a.y-0)-(r.y-0)*(a.x-0));n+=l,i.x+=l*o*(0+r.x+a.x),i.y+=l*o*(0+r.y+a.y)}return i.x*=1/n,i.y*=1/n,i},s.ComputeOBB=function(t,e,i){void 0===i&&(i=0);var n=0,o=new Vector(i+1);for(n=0;i>n;++n)o[n]=e[n];for(o[i]=o[0],e=Number.MAX_VALUE,n=1;i>=n;++n){var s=o[parseInt(n-1)],r=o[n].x-s.x,a=o[n].y-s.y,l=Math.sqrt(r*r+a*a);r/=l,a/=l;for(var c=-a,h=r,u=l=Number.MAX_VALUE,m=-Number.MAX_VALUE,p=-Number.MAX_VALUE,_=0;i>_;++_){var d=o[_].x-s.x,f=o[_].y-s.y,y=r*d+a*f;d=c*d+h*f,l>y&&(l=y),u>d&&(u=d),y>m&&(m=y),d>p&&(p=d)}_=(m-l)*(p-u),.95*e>_&&(e=_,t.R.col1.x=r,t.R.col1.y=a,t.R.col2.x=c,t.R.col2.y=h,r=.5*(l+m),a=.5*(u+p),c=t.R,t.center.x=s.x+(c.col1.x*r+c.col2.x*a),t.center.y=s.y+(c.col1.y*r+c.col2.y*a),t.extents.x=.5*(m-l),t.extents.y=.5*(p-u))}},Box2D.postDefs.push(function(){Box2D.Collision.Shapes.b2PolygonShape.s_mat=new a}),r.b2Shape=function(){},r.prototype.Copy=function(){return null},r.prototype.Set=function(t){this.m_radius=t.m_radius},r.prototype.GetType=function(){return this.m_type},r.prototype.TestPoint=function(){return!1},r.prototype.RayCast=function(){return!1},r.prototype.ComputeAABB=function(){},r.prototype.ComputeMass=function(){},r.prototype.ComputeSubmergedArea=function(){return 0},r.TestOverlap=function(t,e,i,n){var o=new m;return o.proxyA=new _,o.proxyA.Set(t),o.proxyB=new _,o.proxyB.Set(i),o.transformA=e,o.transformB=n,o.useRadii=!0,t=new d,t.count=0,e=new p,u.Distance(e,t,o),e.distance<10*Number.MIN_VALUE},r.prototype.b2Shape=function(){this.m_type=r.e_unknownShape,this.m_radius=t.b2_linearSlop},Box2D.postDefs.push(function(){Box2D.Collision.Shapes.b2Shape.e_unknownShape=parseInt(-1),Box2D.Collision.Shapes.b2Shape.e_circleShape=0,Box2D.Collision.Shapes.b2Shape.e_polygonShape=1,Box2D.Collision.Shapes.b2Shape.e_edgeShape=2,Box2D.Collision.Shapes.b2Shape.e_shapeTypeCount=3,Box2D.Collision.Shapes.b2Shape.e_hitCollide=1,Box2D.Collision.Shapes.b2Shape.e_missCollide=0,Box2D.Collision.Shapes.b2Shape.e_startsInsideCollide=parseInt(-1)})}(),function(){var t=Box2D.Common.b2Color,e=Box2D.Common.b2Settings,i=Box2D.Common.Math.b2Math;t.b2Color=function(){this._b=this._g=this._r=0},t.prototype.b2Color=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this._r=Box2D.parseUInt(255*i.Clamp(t,0,1)),this._g=Box2D.parseUInt(255*i.Clamp(e,0,1)),this._b=Box2D.parseUInt(255*i.Clamp(n,0,1))},t.prototype.Set=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this._r=Box2D.parseUInt(255*i.Clamp(t,0,1)),this._g=Box2D.parseUInt(255*i.Clamp(e,0,1)),this._b=Box2D.parseUInt(255*i.Clamp(n,0,1))},Object.defineProperty(t.prototype,"r",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._r=Box2D.parseUInt(255*i.Clamp(t,0,1))}}),Object.defineProperty(t.prototype,"g",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._g=Box2D.parseUInt(255*i.Clamp(t,0,1))}}),Object.defineProperty(t.prototype,"b",{enumerable:!1,configurable:!0,set:function(t){void 0===t&&(t=0),this._b=Box2D.parseUInt(255*i.Clamp(t,0,1))}}),Object.defineProperty(t.prototype,"color",{enumerable:!1,configurable:!0,get:function(){return this._r<<16|this._g<<8|this._b}}),e.b2Settings=function(){},e.b2MixFriction=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),Math.sqrt(t*e)},e.b2MixRestitution=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t>e?t:e},e.b2Assert=function(t){if(!t)throw"Assertion Failed"},Box2D.postDefs.push(function(){Box2D.Common.b2Settings.VERSION="2.1alpha",Box2D.Common.b2Settings.USHRT_MAX=65535,Box2D.Common.b2Settings.b2_pi=Math.PI,Box2D.Common.b2Settings.b2_maxManifoldPoints=2,Box2D.Common.b2Settings.b2_aabbExtension=.1,Box2D.Common.b2Settings.b2_aabbMultiplier=2,Box2D.Common.b2Settings.b2_polygonRadius=2*e.b2_linearSlop,Box2D.Common.b2Settings.b2_linearSlop=.005,Box2D.Common.b2Settings.b2_angularSlop=2/180*e.b2_pi,Box2D.Common.b2Settings.b2_toiSlop=8*e.b2_linearSlop,Box2D.Common.b2Settings.b2_maxTOIContactsPerIsland=32,Box2D.Common.b2Settings.b2_maxTOIJointsPerIsland=32,Box2D.Common.b2Settings.b2_velocityThreshold=1,Box2D.Common.b2Settings.b2_maxLinearCorrection=.2,Box2D.Common.b2Settings.b2_maxAngularCorrection=8/180*e.b2_pi,Box2D.Common.b2Settings.b2_maxTranslation=2,Box2D.Common.b2Settings.b2_maxTranslationSquared=e.b2_maxTranslation*e.b2_maxTranslation,Box2D.Common.b2Settings.b2_maxRotation=.5*e.b2_pi,Box2D.Common.b2Settings.b2_maxRotationSquared=e.b2_maxRotation*e.b2_maxRotation,Box2D.Common.b2Settings.b2_contactBaumgarte=.2,Box2D.Common.b2Settings.b2_timeToSleep=.5,Box2D.Common.b2Settings.b2_linearSleepTolerance=.01,Box2D.Common.b2Settings.b2_angularSleepTolerance=2/180*e.b2_pi})}(),function(){var t=Box2D.Common.Math.b2Mat22,e=Box2D.Common.Math.b2Mat33,i=Box2D.Common.Math.b2Math,n=Box2D.Common.Math.b2Sweep,o=Box2D.Common.Math.b2Transform,s=Box2D.Common.Math.b2Vec2,r=Box2D.Common.Math.b2Vec3;t.b2Mat22=function(){this.col1=new s,this.col2=new s},t.prototype.b2Mat22=function(){this.SetIdentity()},t.FromAngle=function(e){void 0===e&&(e=0);var i=new t;return i.Set(e),i},t.FromVV=function(e,i){var n=new t;return n.SetVV(e,i),n},t.prototype.Set=function(t){void 0===t&&(t=0);var e=Math.cos(t);t=Math.sin(t),this.col1.x=e,this.col2.x=-t,this.col1.y=t,this.col2.y=e},t.prototype.SetVV=function(t,e){this.col1.SetV(t),this.col2.SetV(e)},t.prototype.Copy=function(){var e=new t;return e.SetM(this),e},t.prototype.SetM=function(t){this.col1.SetV(t.col1),this.col2.SetV(t.col2)},t.prototype.AddM=function(t){this.col1.x+=t.col1.x,this.col1.y+=t.col1.y,this.col2.x+=t.col2.x,this.col2.y+=t.col2.y},t.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col1.y=0,this.col2.y=1},t.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col1.y=0,this.col2.y=0},t.prototype.GetAngle=function(){return Math.atan2(this.col1.y,this.col1.x)},t.prototype.GetInverse=function(t){var e=this.col1.x,i=this.col2.x,n=this.col1.y,o=this.col2.y,s=e*o-i*n;return 0!=s&&(s=1/s),t.col1.x=s*o,t.col2.x=-s*i,t.col1.y=-s*n,t.col2.y=s*e,t},t.prototype.Solve=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n=this.col1.x,o=this.col2.x,s=this.col1.y,r=this.col2.y,a=n*r-o*s;return 0!=a&&(a=1/a),t.x=a*(r*e-o*i),t.y=a*(n*i-s*e),t},t.prototype.Abs=function(){this.col1.Abs(),this.col2.Abs()},e.b2Mat33=function(){this.col1=new r,this.col2=new r,this.col3=new r},e.prototype.b2Mat33=function(t,e,i){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),t||e||i?(this.col1.SetV(t),this.col2.SetV(e),this.col3.SetV(i)):(this.col1.SetZero(),this.col2.SetZero(),this.col3.SetZero())},e.prototype.SetVVV=function(t,e,i){this.col1.SetV(t),this.col2.SetV(e),this.col3.SetV(i)},e.prototype.Copy=function(){return new e(this.col1,this.col2,this.col3)},e.prototype.SetM=function(t){this.col1.SetV(t.col1),this.col2.SetV(t.col2),this.col3.SetV(t.col3)},e.prototype.AddM=function(t){this.col1.x+=t.col1.x,this.col1.y+=t.col1.y,this.col1.z+=t.col1.z,this.col2.x+=t.col2.x,this.col2.y+=t.col2.y,this.col2.z+=t.col2.z,this.col3.x+=t.col3.x,this.col3.y+=t.col3.y,this.col3.z+=t.col3.z},e.prototype.SetIdentity=function(){this.col1.x=1,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=1,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=1},e.prototype.SetZero=function(){this.col1.x=0,this.col2.x=0,this.col3.x=0,this.col1.y=0,this.col2.y=0,this.col3.y=0,this.col1.z=0,this.col2.z=0,this.col3.z=0},e.prototype.Solve22=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n=this.col1.x,o=this.col2.x,s=this.col1.y,r=this.col2.y,a=n*r-o*s;return 0!=a&&(a=1/a),t.x=a*(r*e-o*i),t.y=a*(n*i-s*e),t},e.prototype.Solve33=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0);var o=this.col1.x,s=this.col1.y,r=this.col1.z,a=this.col2.x,l=this.col2.y,c=this.col2.z,h=this.col3.x,u=this.col3.y,m=this.col3.z,p=o*(l*m-c*u)+s*(c*h-a*m)+r*(a*u-l*h);return 0!=p&&(p=1/p),t.x=p*(e*(l*m-c*u)+i*(c*h-a*m)+n*(a*u-l*h)),t.y=p*(o*(i*m-n*u)+s*(n*h-e*m)+r*(e*u-i*h)),t.z=p*(o*(l*n-c*i)+s*(c*e-a*n)+r*(a*i-l*e)),t},i.b2Math=function(){},i.IsValid=function(t){return void 0===t&&(t=0),isFinite(t)},i.Dot=function(t,e){return t.x*e.x+t.y*e.y},i.CrossVV=function(t,e){return t.x*e.y-t.y*e.x},i.CrossVF=function(t,e){return void 0===e&&(e=0),new s(e*t.y,-e*t.x)},i.CrossFV=function(t,e){return void 0===t&&(t=0),new s(-t*e.y,t*e.x)},i.MulMV=function(t,e){return new s(t.col1.x*e.x+t.col2.x*e.y,t.col1.y*e.x+t.col2.y*e.y)},i.MulTMV=function(t,e){return new s(i.Dot(e,t.col1),i.Dot(e,t.col2))},i.MulX=function(t,e){var n=i.MulMV(t.R,e);return n.x+=t.position.x,n.y+=t.position.y,n},i.MulXT=function(t,e){var n=i.SubtractVV(e,t.position),o=n.x*t.R.col1.x+n.y*t.R.col1.y;return n.y=n.x*t.R.col2.x+n.y*t.R.col2.y,n.x=o,n},i.AddVV=function(t,e){return new s(t.x+e.x,t.y+e.y)},i.SubtractVV=function(t,e){return new s(t.x-e.x,t.y-e.y)},i.Distance=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},i.DistanceSquared=function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},i.MulFV=function(t,e){return void 0===t&&(t=0),new s(t*e.x,t*e.y)},i.AddMM=function(e,n){return t.FromVV(i.AddVV(e.col1,n.col1),i.AddVV(e.col2,n.col2))},i.MulMM=function(e,n){return t.FromVV(i.MulMV(e,n.col1),i.MulMV(e,n.col2))},i.MulTMM=function(e,n){var o=new s(i.Dot(e.col1,n.col1),i.Dot(e.col2,n.col1)),r=new s(i.Dot(e.col1,n.col2),i.Dot(e.col2,n.col2));return t.FromVV(o,r)},i.Abs=function(t){return void 0===t&&(t=0),t>0?t:-t},i.AbsV=function(t){return new s(i.Abs(t.x),i.Abs(t.y))},i.AbsM=function(e){return t.FromVV(i.AbsV(e.col1),i.AbsV(e.col2))},i.Min=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),e>t?t:e},i.MinV=function(t,e){return new s(i.Min(t.x,e.x),i.Min(t.y,e.y))},i.Max=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t>e?t:e},i.MaxV=function(t,e){return new s(i.Max(t.x,e.x),i.Max(t.y,e.y))},i.Clamp=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),e>t?e:t>i?i:t},i.ClampV=function(t,e,n){return i.MaxV(e,i.MinV(t,n))},i.Swap=function(t,e){var i=t[0];t[0]=e[0],e[0]=i},i.Random=function(){return 2*Math.random()-1},i.RandomRange=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=Math.random();return i=(e-t)*i+t},i.NextPowerOfTwo=function(t){return void 0===t&&(t=0),t|=t>>1&2147483647,t|=t>>2&1073741823,t|=t>>4&268435455,t|=t>>8&16777215,t|=t>>16&65535,t+1},i.IsPowerOfTwo=function(t){return void 0===t&&(t=0),t>0&&0==(t&t-1)},Box2D.postDefs.push(function(){Box2D.Common.Math.b2Math.b2Vec2_zero=new s(0,0),Box2D.Common.Math.b2Math.b2Mat22_identity=t.FromVV(new s(1,0),new s(0,1)),Box2D.Common.Math.b2Math.b2Transform_identity=new o(i.b2Vec2_zero,i.b2Mat22_identity)}),n.b2Sweep=function(){this.localCenter=new s,this.c0=new s,this.c=new s},n.prototype.Set=function(t){this.localCenter.SetV(t.localCenter),this.c0.SetV(t.c0),this.c.SetV(t.c),this.a0=t.a0,this.a=t.a,this.t0=t.t0},n.prototype.Copy=function(){var t=new n;return t.localCenter.SetV(this.localCenter),t.c0.SetV(this.c0),t.c.SetV(this.c),t.a0=this.a0,t.a=this.a,t.t0=this.t0,t},n.prototype.GetTransform=function(t,e){void 0===e&&(e=0),t.position.x=(1-e)*this.c0.x+e*this.c.x,t.position.y=(1-e)*this.c0.y+e*this.c.y,t.R.Set((1-e)*this.a0+e*this.a);var i=t.R;t.position.x-=i.col1.x*this.localCenter.x+i.col2.x*this.localCenter.y,t.position.y-=i.col1.y*this.localCenter.x+i.col2.y*this.localCenter.y},n.prototype.Advance=function(t){if(void 0===t&&(t=0),this.t0<t&&1-this.t0>Number.MIN_VALUE){var e=(t-this.t0)/(1-this.t0);this.c0.x=(1-e)*this.c0.x+e*this.c.x,this.c0.y=(1-e)*this.c0.y+e*this.c.y,this.a0=(1-e)*this.a0+e*this.a,this.t0=t}},o.b2Transform=function(){this.position=new s,this.R=new t},o.prototype.b2Transform=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),t&&(this.position.SetV(t),this.R.SetM(e))},o.prototype.Initialize=function(t,e){this.position.SetV(t),this.R.SetM(e)},o.prototype.SetIdentity=function(){this.position.SetZero(),this.R.SetIdentity()},o.prototype.Set=function(t){this.position.SetV(t.position),this.R.SetM(t.R)},o.prototype.GetAngle=function(){return Math.atan2(this.R.col1.y,this.R.col1.x)},s.b2Vec2=function(){},s.prototype.b2Vec2=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e},s.prototype.SetZero=function(){this.y=this.x=0},s.prototype.Set=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e},s.prototype.SetV=function(t){this.x=t.x,this.y=t.y},s.prototype.GetNegative=function(){return new s(-this.x,-this.y)},s.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y},s.Make=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),new s(t,e)},s.prototype.Copy=function(){return new s(this.x,this.y)},s.prototype.Add=function(t){this.x+=t.x,this.y+=t.y},s.prototype.Subtract=function(t){this.x-=t.x,this.y-=t.y},s.prototype.Multiply=function(t){void 0===t&&(t=0),this.x*=t,this.y*=t},s.prototype.MulM=function(t){var e=this.x;this.x=t.col1.x*e+t.col2.x*this.y,this.y=t.col1.y*e+t.col2.y*this.y},s.prototype.MulTM=function(t){var e=i.Dot(this,t.col1);this.y=i.Dot(this,t.col2),this.x=e},s.prototype.CrossVF=function(t){void 0===t&&(t=0);var e=this.x;this.x=t*this.y,this.y=-t*e},s.prototype.CrossFV=function(t){void 0===t&&(t=0);var e=this.x;this.x=-t*this.y,this.y=t*e},s.prototype.MinV=function(t){this.x=this.x<t.x?this.x:t.x,this.y=this.y<t.y?this.y:t.y},s.prototype.MaxV=function(t){this.x=this.x>t.x?this.x:t.x,this.y=this.y>t.y?this.y:t.y},s.prototype.Abs=function(){this.x<0&&(this.x=-this.x),this.y<0&&(this.y=-this.y)},s.prototype.Length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},s.prototype.LengthSquared=function(){return this.x*this.x+this.y*this.y},s.prototype.Normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(t<Number.MIN_VALUE)return 0;var e=1/t;return this.x*=e,this.y*=e,t},s.prototype.IsValid=function(){return i.IsValid(this.x)&&i.IsValid(this.y)},r.b2Vec3=function(){},r.prototype.b2Vec3=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=i},r.prototype.SetZero=function(){this.x=this.y=this.z=0},r.prototype.Set=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=i},r.prototype.SetV=function(t){this.x=t.x,this.y=t.y,this.z=t.z},r.prototype.GetNegative=function(){return new r(-this.x,-this.y,-this.z)},r.prototype.NegativeSelf=function(){this.x=-this.x,this.y=-this.y,this.z=-this.z},r.prototype.Copy=function(){return new r(this.x,this.y,this.z)},r.prototype.Add=function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z},r.prototype.Subtract=function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z},r.prototype.Multiply=function(t){void 0===t&&(t=0),this.x*=t,this.y*=t,this.z*=t}}(),function(){var t=Box2D.Common.Math.b2Math,e=Box2D.Common.Math.b2Sweep,i=Box2D.Common.Math.b2Transform,n=Box2D.Common.Math.b2Vec2,o=Box2D.Common.b2Color,s=Box2D.Common.b2Settings,r=Box2D.Collision.b2AABB,a=Box2D.Collision.b2ContactPoint,l=Box2D.Collision.b2DynamicTreeBroadPhase,c=Box2D.Collision.b2RayCastInput,h=Box2D.Collision.b2RayCastOutput,u=Box2D.Collision.Shapes.b2CircleShape,m=Box2D.Collision.Shapes.b2EdgeShape,p=Box2D.Collision.Shapes.b2MassData,_=Box2D.Collision.Shapes.b2PolygonShape,d=Box2D.Collision.Shapes.b2Shape,f=Box2D.Dynamics.b2Body,y=Box2D.Dynamics.b2BodyDef,x=Box2D.Dynamics.b2ContactFilter,g=Box2D.Dynamics.b2ContactImpulse,v=Box2D.Dynamics.b2ContactListener,b=Box2D.Dynamics.b2ContactManager,w=Box2D.Dynamics.b2DebugDraw,C=Box2D.Dynamics.b2DestructionListener,D=Box2D.Dynamics.b2FilterData,S=Box2D.Dynamics.b2Fixture,B=Box2D.Dynamics.b2FixtureDef,A=Box2D.Dynamics.b2Island,M=Box2D.Dynamics.b2TimeStep,T=Box2D.Dynamics.b2World,I=Box2D.Dynamics.Contacts.b2Contact,V=Box2D.Dynamics.Contacts.b2ContactFactory,L=Box2D.Dynamics.Contacts.b2ContactSolver,E=Box2D.Dynamics.Joints.b2Joint,P=Box2D.Dynamics.Joints.b2PulleyJoint;f.b2Body=function(){this.m_xf=new i,this.m_sweep=new e,this.m_linearVelocity=new n,this.m_force=new n},f.prototype.connectEdges=function(e,i,n){void 0===n&&(n=0);var o=Math.atan2(i.GetDirectionVector().y,i.GetDirectionVector().x);n=t.MulFV(Math.tan(.5*(o-n)),i.GetDirectionVector()),n=t.SubtractVV(n,i.GetNormalVector()),n=t.MulFV(s.b2_toiSlop,n),n=t.AddVV(n,i.GetVertex1());var r=t.AddVV(e.GetDirectionVector(),i.GetDirectionVector());r.Normalize();var a=t.Dot(e.GetDirectionVector(),i.GetNormalVector())>0;return e.SetNextEdge(i,n,r,a),i.SetPrevEdge(e,n,r,a),o},f.prototype.CreateFixture=function(t){if(1==this.m_world.IsLocked())return null;var e=new S;return e.Create(this,this.m_xf,t),this.m_flags&f.e_activeFlag&&e.CreateProxy(this.m_world.m_contactManager.m_broadPhase,this.m_xf),e.m_next=this.m_fixtureList,this.m_fixtureList=e,++this.m_fixtureCount,e.m_body=this,e.m_density>0&&this.ResetMassData(),this.m_world.m_flags|=T.e_newFixture,e},f.prototype.CreateFixture2=function(t,e){void 0===e&&(e=0);var i=new B;return i.shape=t,i.density=e,this.CreateFixture(i)},f.prototype.DestroyFixture=function(t){if(1!=this.m_world.IsLocked()){for(var e=this.m_fixtureList,i=null;null!=e;){if(e==t){i?i.m_next=t.m_next:this.m_fixtureList=t.m_next;break}i=e,e=e.m_next}for(e=this.m_contactList;e;){i=e.contact,e=e.next;var n=i.GetFixtureA(),o=i.GetFixtureB();(t==n||t==o)&&this.m_world.m_contactManager.Destroy(i)}this.m_flags&f.e_activeFlag&&t.DestroyProxy(this.m_world.m_contactManager.m_broadPhase),t.Destroy(),t.m_body=null,t.m_next=null,--this.m_fixtureCount,this.ResetMassData()}},f.prototype.SetPositionAndAngle=function(t,e){void 0===e&&(e=0);var i;if(1!=this.m_world.IsLocked()){this.m_xf.R.Set(e),this.m_xf.position.SetV(t),i=this.m_xf.R;var n=this.m_sweep.localCenter;for(this.m_sweep.c.x=i.col1.x*n.x+i.col2.x*n.y,this.m_sweep.c.y=i.col1.y*n.x+i.col2.y*n.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_sweep.a0=this.m_sweep.a=e,n=this.m_world.m_contactManager.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.Synchronize(n,this.m_xf,this.m_xf);this.m_world.m_contactManager.FindNewContacts()}},f.prototype.SetTransform=function(t){this.SetPositionAndAngle(t.position,t.GetAngle())},f.prototype.GetTransform=function(){return this.m_xf},f.prototype.GetPosition=function(){return this.m_xf.position},f.prototype.SetPosition=function(t){this.SetPositionAndAngle(t,this.GetAngle())},f.prototype.GetAngle=function(){return this.m_sweep.a},f.prototype.SetAngle=function(t){void 0===t&&(t=0),this.SetPositionAndAngle(this.GetPosition(),t)},f.prototype.GetWorldCenter=function(){return this.m_sweep.c},f.prototype.GetLocalCenter=function(){return this.m_sweep.localCenter},f.prototype.SetLinearVelocity=function(t){this.m_type!=f.b2_staticBody&&this.m_linearVelocity.SetV(t)},f.prototype.GetLinearVelocity=function(){return this.m_linearVelocity},f.prototype.SetAngularVelocity=function(t){void 0===t&&(t=0),this.m_type!=f.b2_staticBody&&(this.m_angularVelocity=t)},f.prototype.GetAngularVelocity=function(){return this.m_angularVelocity},f.prototype.GetDefinition=function(){var t=new y;return t.type=this.GetType(),t.allowSleep=(this.m_flags&f.e_allowSleepFlag)==f.e_allowSleepFlag,t.angle=this.GetAngle(),t.angularDamping=this.m_angularDamping,t.angularVelocity=this.m_angularVelocity,t.fixedRotation=(this.m_flags&f.e_fixedRotationFlag)==f.e_fixedRotationFlag,t.bullet=(this.m_flags&f.e_bulletFlag)==f.e_bulletFlag,t.awake=(this.m_flags&f.e_awakeFlag)==f.e_awakeFlag,t.linearDamping=this.m_linearDamping,t.linearVelocity.SetV(this.GetLinearVelocity()),t.position=this.GetPosition(),t.userData=this.GetUserData(),t},f.prototype.ApplyForce=function(t,e){this.m_type==f.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_force.x+=t.x,this.m_force.y+=t.y,this.m_torque+=(e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x)},f.prototype.ApplyTorque=function(t){void 0===t&&(t=0),this.m_type==f.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_torque+=t)},f.prototype.ApplyImpulse=function(t,e){this.m_type==f.b2_dynamicBody&&(0==this.IsAwake()&&this.SetAwake(!0),this.m_linearVelocity.x+=this.m_invMass*t.x,this.m_linearVelocity.y+=this.m_invMass*t.y,this.m_angularVelocity+=this.m_invI*((e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x))},f.prototype.Split=function(e){for(var i,n=this.GetLinearVelocity().Copy(),o=this.GetAngularVelocity(),s=this.GetWorldCenter(),r=this.m_world.CreateBody(this.GetDefinition()),a=this.m_fixtureList;a;)if(e(a)){var l=a.m_next;i?i.m_next=l:this.m_fixtureList=l,this.m_fixtureCount--,a.m_next=r.m_fixtureList,r.m_fixtureList=a,r.m_fixtureCount++,a.m_body=r,a=l}else i=a,a=a.m_next;return this.ResetMassData(),r.ResetMassData(),i=this.GetWorldCenter(),e=r.GetWorldCenter(),i=t.AddVV(n,t.CrossFV(o,t.SubtractVV(i,s))),n=t.AddVV(n,t.CrossFV(o,t.SubtractVV(e,s))),this.SetLinearVelocity(i),r.SetLinearVelocity(n),this.SetAngularVelocity(o),r.SetAngularVelocity(o),this.SynchronizeFixtures(),r.SynchronizeFixtures(),r},f.prototype.Merge=function(t){var e;for(e=t.m_fixtureList;e;){var i=e.m_next;t.m_fixtureCount--,e.m_next=this.m_fixtureList,this.m_fixtureList=e,this.m_fixtureCount++,e.m_body=o,e=i}n.m_fixtureCount=0;var n=this,o=t;n.GetWorldCenter(),o.GetWorldCenter(),n.GetLinearVelocity().Copy(),o.GetLinearVelocity().Copy(),n.GetAngularVelocity(),o.GetAngularVelocity(),n.ResetMassData(),this.SynchronizeFixtures()},f.prototype.GetMass=function(){return this.m_mass},f.prototype.GetInertia=function(){return this.m_I},f.prototype.GetMassData=function(t){t.mass=this.m_mass,t.I=this.m_I,t.center.SetV(this.m_sweep.localCenter)},f.prototype.SetMassData=function(e){if(s.b2Assert(0==this.m_world.IsLocked()),1!=this.m_world.IsLocked()&&this.m_type==f.b2_dynamicBody){this.m_invI=this.m_I=this.m_invMass=0,this.m_mass=e.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,e.I>0&&0==(this.m_flags&f.e_fixedRotationFlag)&&(this.m_I=e.I-this.m_mass*(e.center.x*e.center.x+e.center.y*e.center.y),this.m_invI=1/this.m_I);var i=this.m_sweep.c.Copy();this.m_sweep.localCenter.SetV(e.center),this.m_sweep.c0.SetV(t.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-i.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-i.x)}},f.prototype.ResetMassData=function(){if(this.m_invI=this.m_I=this.m_invMass=this.m_mass=0,this.m_sweep.localCenter.SetZero(),this.m_type!=f.b2_staticBody&&this.m_type!=f.b2_kinematicBody){for(var e=n.Make(0,0),i=this.m_fixtureList;i;i=i.m_next)if(0!=i.m_density){var o=i.GetMassData();this.m_mass+=o.mass,e.x+=o.center.x*o.mass,e.y+=o.center.y*o.mass,this.m_I+=o.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,e.x*=this.m_invMass,e.y*=this.m_invMass):this.m_invMass=this.m_mass=1,this.m_I>0&&0==(this.m_flags&f.e_fixedRotationFlag)?(this.m_I-=this.m_mass*(e.x*e.x+e.y*e.y),this.m_I*=this.m_inertiaScale,s.b2Assert(this.m_I>0),this.m_invI=1/this.m_I):this.m_invI=this.m_I=0,i=this.m_sweep.c.Copy(),this.m_sweep.localCenter.SetV(e),this.m_sweep.c0.SetV(t.MulX(this.m_xf,this.m_sweep.localCenter)),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-i.y),this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-i.x)}},f.prototype.GetWorldPoint=function(t){var e=this.m_xf.R;return t=new n(e.col1.x*t.x+e.col2.x*t.y,e.col1.y*t.x+e.col2.y*t.y),t.x+=this.m_xf.position.x,t.y+=this.m_xf.position.y,t},f.prototype.GetWorldVector=function(e){return t.MulMV(this.m_xf.R,e)},f.prototype.GetLocalPoint=function(e){return t.MulXT(this.m_xf,e)},f.prototype.GetLocalVector=function(e){return t.MulTMV(this.m_xf.R,e)},f.prototype.GetLinearVelocityFromWorldPoint=function(t){return new n(this.m_linearVelocity.x-this.m_angularVelocity*(t.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(t.x-this.m_sweep.c.x))},f.prototype.GetLinearVelocityFromLocalPoint=function(t){var e=this.m_xf.R;return t=new n(e.col1.x*t.x+e.col2.x*t.y,e.col1.y*t.x+e.col2.y*t.y),t.x+=this.m_xf.position.x,t.y+=this.m_xf.position.y,new n(this.m_linearVelocity.x-this.m_angularVelocity*(t.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(t.x-this.m_sweep.c.x))},f.prototype.GetLinearDamping=function(){return this.m_linearDamping},f.prototype.SetLinearDamping=function(t){void 0===t&&(t=0),this.m_linearDamping=t},f.prototype.GetAngularDamping=function(){return this.m_angularDamping},f.prototype.SetAngularDamping=function(t){void 0===t&&(t=0),this.m_angularDamping=t},f.prototype.SetType=function(t){if(void 0===t&&(t=0),this.m_type!=t)for(this.m_type=t,this.ResetMassData(),this.m_type==f.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0,t=this.m_contactList;t;t=t.next)t.contact.FlagForFiltering()},f.prototype.GetType=function(){return this.m_type},f.prototype.SetBullet=function(t){t?this.m_flags|=f.e_bulletFlag:this.m_flags&=~f.e_bulletFlag},f.prototype.IsBullet=function(){return(this.m_flags&f.e_bulletFlag)==f.e_bulletFlag},f.prototype.SetSleepingAllowed=function(t){t?this.m_flags|=f.e_allowSleepFlag:(this.m_flags&=~f.e_allowSleepFlag,this.SetAwake(!0))},f.prototype.SetAwake=function(t){t?(this.m_flags|=f.e_awakeFlag,this.m_sleepTime=0):(this.m_flags&=~f.e_awakeFlag,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)},f.prototype.IsAwake=function(){return(this.m_flags&f.e_awakeFlag)==f.e_awakeFlag},f.prototype.SetFixedRotation=function(t){t?this.m_flags|=f.e_fixedRotationFlag:this.m_flags&=~f.e_fixedRotationFlag,this.ResetMassData()},f.prototype.IsFixedRotation=function(){return(this.m_flags&f.e_fixedRotationFlag)==f.e_fixedRotationFlag},f.prototype.SetActive=function(t){if(t!=this.IsActive()){var e;if(t)for(this.m_flags|=f.e_activeFlag,t=this.m_world.m_contactManager.m_broadPhase,e=this.m_fixtureList;e;e=e.m_next)e.CreateProxy(t,this.m_xf);else{for(this.m_flags&=~f.e_activeFlag,t=this.m_world.m_contactManager.m_broadPhase,e=this.m_fixtureList;e;e=e.m_next)e.DestroyProxy(t);for(t=this.m_contactList;t;)e=t,t=t.next,this.m_world.m_contactManager.Destroy(e.contact);this.m_contactList=null}}},f.prototype.IsActive=function(){return(this.m_flags&f.e_activeFlag)==f.e_activeFlag},f.prototype.IsSleepingAllowed=function(){return(this.m_flags&f.e_allowSleepFlag)==f.e_allowSleepFlag},f.prototype.GetFixtureList=function(){return this.m_fixtureList},f.prototype.GetJointList=function(){return this.m_jointList},f.prototype.GetControllerList=function(){return this.m_controllerList},f.prototype.GetContactList=function(){return this.m_contactList},f.prototype.GetNext=function(){return this.m_next},f.prototype.GetUserData=function(){return this.m_userData},f.prototype.SetUserData=function(t){this.m_userData=t},f.prototype.GetWorld=function(){return this.m_world},f.prototype.b2Body=function(t,e){this.m_flags=0,t.bullet&&(this.m_flags|=f.e_bulletFlag),t.fixedRotation&&(this.m_flags|=f.e_fixedRotationFlag),t.allowSleep&&(this.m_flags|=f.e_allowSleepFlag),t.awake&&(this.m_flags|=f.e_awakeFlag),t.active&&(this.m_flags|=f.e_activeFlag),this.m_world=e,this.m_xf.position.SetV(t.position),this.m_xf.R.Set(t.angle),this.m_sweep.localCenter.SetZero(),this.m_sweep.t0=1,this.m_sweep.a0=this.m_sweep.a=t.angle;var i=this.m_xf.R,n=this.m_sweep.localCenter;this.m_sweep.c.x=i.col1.x*n.x+i.col2.x*n.y,this.m_sweep.c.y=i.col1.y*n.x+i.col2.y*n.y,this.m_sweep.c.x+=this.m_xf.position.x,this.m_sweep.c.y+=this.m_xf.position.y,this.m_sweep.c0.SetV(this.m_sweep.c),this.m_contactList=this.m_controllerList=this.m_jointList=null,this.m_controllerCount=0,this.m_next=this.m_prev=null,this.m_linearVelocity.SetV(t.linearVelocity),this.m_angularVelocity=t.angularVelocity,this.m_linearDamping=t.linearDamping,this.m_angularDamping=t.angularDamping,this.m_force.Set(0,0),this.m_sleepTime=this.m_torque=0,this.m_type=t.type,this.m_type==f.b2_dynamicBody?this.m_invMass=this.m_mass=1:this.m_invMass=this.m_mass=0,this.m_invI=this.m_I=0,this.m_inertiaScale=t.inertiaScale,this.m_userData=t.userData,this.m_fixtureList=null,this.m_fixtureCount=0},f.prototype.SynchronizeFixtures=function(){var t=f.s_xf1;t.R.Set(this.m_sweep.a0);var e=t.R,i=this.m_sweep.localCenter;for(t.position.x=this.m_sweep.c0.x-(e.col1.x*i.x+e.col2.x*i.y),t.position.y=this.m_sweep.c0.y-(e.col1.y*i.x+e.col2.y*i.y),i=this.m_world.m_contactManager.m_broadPhase,e=this.m_fixtureList;e;e=e.m_next)e.Synchronize(i,t,this.m_xf)},f.prototype.SynchronizeTransform=function(){this.m_xf.R.Set(this.m_sweep.a);var t=this.m_xf.R,e=this.m_sweep.localCenter;this.m_xf.position.x=this.m_sweep.c.x-(t.col1.x*e.x+t.col2.x*e.y),this.m_xf.position.y=this.m_sweep.c.y-(t.col1.y*e.x+t.col2.y*e.y)},f.prototype.ShouldCollide=function(t){if(this.m_type!=f.b2_dynamicBody&&t.m_type!=f.b2_dynamicBody)return!1;for(var e=this.m_jointList;e;e=e.next)if(e.other==t&&0==e.joint.m_collideConnected)return!1;return!0},f.prototype.Advance=function(t){void 0===t&&(t=0),this.m_sweep.Advance(t),this.m_sweep.c.SetV(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.SynchronizeTransform()},Box2D.postDefs.push(function(){Box2D.Dynamics.b2Body.s_xf1=new i,Box2D.Dynamics.b2Body.e_islandFlag=1,Box2D.Dynamics.b2Body.e_awakeFlag=2,Box2D.Dynamics.b2Body.e_allowSleepFlag=4,Box2D.Dynamics.b2Body.e_bulletFlag=8,Box2D.Dynamics.b2Body.e_fixedRotationFlag=16,Box2D.Dynamics.b2Body.e_activeFlag=32,Box2D.Dynamics.b2Body.b2_staticBody=0,Box2D.Dynamics.b2Body.b2_kinematicBody=1,Box2D.Dynamics.b2Body.b2_dynamicBody=2}),y.b2BodyDef=function(){this.position=new n,this.linearVelocity=new n},y.prototype.b2BodyDef=function(){this.userData=null,this.position.Set(0,0),this.angle=0,this.linearVelocity.Set(0,0),this.angularDamping=this.linearDamping=this.angularVelocity=0,this.awake=this.allowSleep=!0,this.bullet=this.fixedRotation=!1,this.type=f.b2_staticBody,this.active=!0,this.inertiaScale=1},x.b2ContactFilter=function(){},x.prototype.ShouldCollide=function(t,e){var i=t.GetFilterData(),n=e.GetFilterData();return i.groupIndex==n.groupIndex&&0!=i.groupIndex?i.groupIndex>0:0!=(i.maskBits&n.categoryBits)&&0!=(i.categoryBits&n.maskBits)},x.prototype.RayCollide=function(t,e){return t?this.ShouldCollide(t instanceof S?t:null,e):!0},Box2D.postDefs.push(function(){Box2D.Dynamics.b2ContactFilter.b2_defaultFilter=new x}),g.b2ContactImpulse=function(){this.normalImpulses=new Vector_a2j_Number(s.b2_maxManifoldPoints),this.tangentImpulses=new Vector_a2j_Number(s.b2_maxManifoldPoints)},v.b2ContactListener=function(){},v.prototype.BeginContact=function(){},v.prototype.EndContact=function(){},v.prototype.PreSolve=function(){},v.prototype.PostSolve=function(){},Box2D.postDefs.push(function(){Box2D.Dynamics.b2ContactListener.b2_defaultListener=new v}),b.b2ContactManager=function(){},b.prototype.b2ContactManager=function(){this.m_world=null,this.m_contactCount=0,this.m_contactFilter=x.b2_defaultFilter,this.m_contactListener=v.b2_defaultListener,this.m_contactFactory=new V(this.m_allocator),this.m_broadPhase=new l},b.prototype.AddPair=function(t,e){var i=t instanceof S?t:null,n=e instanceof S?e:null,o=i.GetBody(),s=n.GetBody();if(o!=s){for(var r=s.GetContactList();r;){if(r.other==o){var a=r.contact.GetFixtureA(),l=r.contact.GetFixtureB();if(a==i&&l==n)return;if(a==n&&l==i)return}r=r.next}0!=s.ShouldCollide(o)&&0!=this.m_contactFilter.ShouldCollide(i,n)&&(r=this.m_contactFactory.Create(i,n),i=r.GetFixtureA(),n=r.GetFixtureB(),o=i.m_body,s=n.m_body,r.m_prev=null,r.m_next=this.m_world.m_contactList,null!=this.m_world.m_contactList&&(this.m_world.m_contactList.m_prev=r),this.m_world.m_contactList=r,r.m_nodeA.contact=r,r.m_nodeA.other=s,r.m_nodeA.prev=null,r.m_nodeA.next=o.m_contactList,null!=o.m_contactList&&(o.m_contactList.prev=r.m_nodeA),o.m_contactList=r.m_nodeA,r.m_nodeB.contact=r,r.m_nodeB.other=o,r.m_nodeB.prev=null,r.m_nodeB.next=s.m_contactList,null!=s.m_contactList&&(s.m_contactList.prev=r.m_nodeB),s.m_contactList=r.m_nodeB,++this.m_world.m_contactCount)}},b.prototype.FindNewContacts=function(){this.m_broadPhase.UpdatePairs(Box2D.generateCallback(this,this.AddPair));
},b.prototype.Destroy=function(t){var e=t.GetFixtureA(),i=t.GetFixtureB();e=e.GetBody(),i=i.GetBody(),t.IsTouching()&&this.m_contactListener.EndContact(t),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_world.m_contactList&&(this.m_world.m_contactList=t.m_next),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA==e.m_contactList&&(e.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB==i.m_contactList&&(i.m_contactList=t.m_nodeB.next),this.m_contactFactory.Destroy(t),--this.m_contactCount},b.prototype.Collide=function(){for(var t=this.m_world.m_contactList;t;){var e=t.GetFixtureA(),i=t.GetFixtureB(),n=e.GetBody(),o=i.GetBody();if(0==n.IsAwake()&&0==o.IsAwake())t=t.GetNext();else{if(t.m_flags&I.e_filterFlag){if(0==o.ShouldCollide(n)){e=t,t=e.GetNext(),this.Destroy(e);continue}if(0==this.m_contactFilter.ShouldCollide(e,i)){e=t,t=e.GetNext(),this.Destroy(e);continue}t.m_flags&=~I.e_filterFlag}0==this.m_broadPhase.TestOverlap(e.m_proxy,i.m_proxy)?(e=t,t=e.GetNext(),this.Destroy(e)):(t.Update(this.m_contactListener),t=t.GetNext())}}},Box2D.postDefs.push(function(){Box2D.Dynamics.b2ContactManager.s_evalCP=new a}),w.b2DebugDraw=function(){},w.prototype.b2DebugDraw=function(){},w.prototype.SetFlags=function(){},w.prototype.GetFlags=function(){},w.prototype.AppendFlags=function(){},w.prototype.ClearFlags=function(){},w.prototype.SetSprite=function(){},w.prototype.GetSprite=function(){},w.prototype.SetDrawScale=function(){},w.prototype.GetDrawScale=function(){},w.prototype.SetLineThickness=function(){},w.prototype.GetLineThickness=function(){},w.prototype.SetAlpha=function(){},w.prototype.GetAlpha=function(){},w.prototype.SetFillAlpha=function(){},w.prototype.GetFillAlpha=function(){},w.prototype.SetXFormScale=function(){},w.prototype.GetXFormScale=function(){},w.prototype.DrawPolygon=function(){},w.prototype.DrawSolidPolygon=function(){},w.prototype.DrawCircle=function(){},w.prototype.DrawSolidCircle=function(){},w.prototype.DrawSegment=function(){},w.prototype.DrawTransform=function(){},Box2D.postDefs.push(function(){Box2D.Dynamics.b2DebugDraw.e_shapeBit=1,Box2D.Dynamics.b2DebugDraw.e_jointBit=2,Box2D.Dynamics.b2DebugDraw.e_aabbBit=4,Box2D.Dynamics.b2DebugDraw.e_pairBit=8,Box2D.Dynamics.b2DebugDraw.e_centerOfMassBit=16,Box2D.Dynamics.b2DebugDraw.e_controllerBit=32}),C.b2DestructionListener=function(){},C.prototype.SayGoodbyeJoint=function(){},C.prototype.SayGoodbyeFixture=function(){},D.b2FilterData=function(){this.categoryBits=1,this.maskBits=65535,this.groupIndex=0},D.prototype.Copy=function(){var t=new D;return t.categoryBits=this.categoryBits,t.maskBits=this.maskBits,t.groupIndex=this.groupIndex,t},S.b2Fixture=function(){this.m_filter=new D},S.prototype.GetType=function(){return this.m_shape.GetType()},S.prototype.GetShape=function(){return this.m_shape},S.prototype.SetSensor=function(t){if(this.m_isSensor!=t&&(this.m_isSensor=t,null!=this.m_body))for(t=this.m_body.GetContactList();t;){var e=t.contact,i=e.GetFixtureA(),n=e.GetFixtureB();(i==this||n==this)&&e.SetSensor(i.IsSensor()||n.IsSensor()),t=t.next}},S.prototype.IsSensor=function(){return this.m_isSensor},S.prototype.SetFilterData=function(t){if(this.m_filter=t.Copy(),!this.m_body)for(t=this.m_body.GetContactList();t;){var e=t.contact,i=e.GetFixtureA(),n=e.GetFixtureB();(i==this||n==this)&&e.FlagForFiltering(),t=t.next}},S.prototype.GetFilterData=function(){return this.m_filter.Copy()},S.prototype.GetBody=function(){return this.m_body},S.prototype.GetNext=function(){return this.m_next},S.prototype.GetUserData=function(){return this.m_userData},S.prototype.SetUserData=function(t){this.m_userData=t},S.prototype.TestPoint=function(t){return this.m_shape.TestPoint(this.m_body.GetTransform(),t)},S.prototype.RayCast=function(t,e){return this.m_shape.RayCast(t,e,this.m_body.GetTransform())},S.prototype.GetMassData=function(t){return void 0===t&&(t=null),null==t&&(t=new p),this.m_shape.ComputeMass(t,this.m_density),t},S.prototype.SetDensity=function(t){void 0===t&&(t=0),this.m_density=t},S.prototype.GetDensity=function(){return this.m_density},S.prototype.GetFriction=function(){return this.m_friction},S.prototype.SetFriction=function(t){void 0===t&&(t=0),this.m_friction=t},S.prototype.GetRestitution=function(){return this.m_restitution},S.prototype.SetRestitution=function(t){void 0===t&&(t=0),this.m_restitution=t},S.prototype.GetAABB=function(){return this.m_aabb},S.prototype.b2Fixture=function(){this.m_aabb=new r,this.m_shape=this.m_next=this.m_body=this.m_userData=null,this.m_restitution=this.m_friction=this.m_density=0},S.prototype.Create=function(t,e,i){this.m_userData=i.userData,this.m_friction=i.friction,this.m_restitution=i.restitution,this.m_body=t,this.m_next=null,this.m_filter=i.filter.Copy(),this.m_isSensor=i.isSensor,this.m_shape=i.shape.Copy(),this.m_density=i.density},S.prototype.Destroy=function(){this.m_shape=null},S.prototype.CreateProxy=function(t,e){this.m_shape.ComputeAABB(this.m_aabb,e),this.m_proxy=t.CreateProxy(this.m_aabb,this)},S.prototype.DestroyProxy=function(t){null!=this.m_proxy&&(t.DestroyProxy(this.m_proxy),this.m_proxy=null)},S.prototype.Synchronize=function(e,i,n){if(this.m_proxy){var o=new r,s=new r;this.m_shape.ComputeAABB(o,i),this.m_shape.ComputeAABB(s,n),this.m_aabb.Combine(o,s),i=t.SubtractVV(n.position,i.position),e.MoveProxy(this.m_proxy,this.m_aabb,i)}},B.b2FixtureDef=function(){this.filter=new D},B.prototype.b2FixtureDef=function(){this.userData=this.shape=null,this.friction=.2,this.density=this.restitution=0,this.filter.categoryBits=1,this.filter.maskBits=65535,this.filter.groupIndex=0,this.isSensor=!1},A.b2Island=function(){},A.prototype.b2Island=function(){this.m_bodies=new Vector,this.m_contacts=new Vector,this.m_joints=new Vector},A.prototype.Initialize=function(t,e,i,n,o,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0);var r=0;for(this.m_bodyCapacity=t,this.m_contactCapacity=e,this.m_jointCapacity=i,this.m_jointCount=this.m_contactCount=this.m_bodyCount=0,this.m_allocator=n,this.m_listener=o,this.m_contactSolver=s,r=this.m_bodies.length;t>r;r++)this.m_bodies[r]=null;for(r=this.m_contacts.length;e>r;r++)this.m_contacts[r]=null;for(r=this.m_joints.length;i>r;r++)this.m_joints[r]=null},A.prototype.Clear=function(){this.m_jointCount=this.m_contactCount=this.m_bodyCount=0},A.prototype.Solve=function(e,i,n){var o,r=0,a=0;for(r=0;r<this.m_bodyCount;++r)a=this.m_bodies[r],a.GetType()==f.b2_dynamicBody&&(a.m_linearVelocity.x+=e.dt*(i.x+a.m_invMass*a.m_force.x),a.m_linearVelocity.y+=e.dt*(i.y+a.m_invMass*a.m_force.y),a.m_angularVelocity+=e.dt*a.m_invI*a.m_torque,a.m_linearVelocity.Multiply(t.Clamp(1-e.dt*a.m_linearDamping,0,1)),a.m_angularVelocity*=t.Clamp(1-e.dt*a.m_angularDamping,0,1));for(this.m_contactSolver.Initialize(e,this.m_contacts,this.m_contactCount,this.m_allocator),i=this.m_contactSolver,i.InitVelocityConstraints(e),r=0;r<this.m_jointCount;++r)o=this.m_joints[r],o.InitVelocityConstraints(e);for(r=0;r<e.velocityIterations;++r){for(a=0;a<this.m_jointCount;++a)o=this.m_joints[a],o.SolveVelocityConstraints(e);i.SolveVelocityConstraints()}for(r=0;r<this.m_jointCount;++r)o=this.m_joints[r],o.FinalizeVelocityConstraints();for(i.FinalizeVelocityConstraints(),r=0;r<this.m_bodyCount;++r)if(a=this.m_bodies[r],a.GetType()!=f.b2_staticBody){var l=e.dt*a.m_linearVelocity.x,c=e.dt*a.m_linearVelocity.y;l*l+c*c>s.b2_maxTranslationSquared&&(a.m_linearVelocity.Normalize(),a.m_linearVelocity.x*=s.b2_maxTranslation*e.inv_dt,a.m_linearVelocity.y*=s.b2_maxTranslation*e.inv_dt),l=e.dt*a.m_angularVelocity,l*l>s.b2_maxRotationSquared&&(a.m_angularVelocity=a.m_angularVelocity<0?-s.b2_maxRotation*e.inv_dt:s.b2_maxRotation*e.inv_dt),a.m_sweep.c0.SetV(a.m_sweep.c),a.m_sweep.a0=a.m_sweep.a,a.m_sweep.c.x+=e.dt*a.m_linearVelocity.x,a.m_sweep.c.y+=e.dt*a.m_linearVelocity.y,a.m_sweep.a+=e.dt*a.m_angularVelocity,a.SynchronizeTransform()}for(r=0;r<e.positionIterations;++r){for(l=i.SolvePositionConstraints(s.b2_contactBaumgarte),c=!0,a=0;a<this.m_jointCount;++a)o=this.m_joints[a],o=o.SolvePositionConstraints(s.b2_contactBaumgarte),c=c&&o;if(l&&c)break}if(this.Report(i.m_constraints),n){for(n=Number.MAX_VALUE,i=s.b2_linearSleepTolerance*s.b2_linearSleepTolerance,l=s.b2_angularSleepTolerance*s.b2_angularSleepTolerance,r=0;r<this.m_bodyCount;++r)a=this.m_bodies[r],a.GetType()!=f.b2_staticBody&&(0==(a.m_flags&f.e_allowSleepFlag)&&(n=a.m_sleepTime=0),0==(a.m_flags&f.e_allowSleepFlag)||a.m_angularVelocity*a.m_angularVelocity>l||t.Dot(a.m_linearVelocity,a.m_linearVelocity)>i?n=a.m_sleepTime=0:(a.m_sleepTime+=e.dt,n=t.Min(n,a.m_sleepTime)));if(n>=s.b2_timeToSleep)for(r=0;r<this.m_bodyCount;++r)a=this.m_bodies[r],a.SetAwake(!1)}},A.prototype.SolveTOI=function(t){var e=0,i=0;this.m_contactSolver.Initialize(t,this.m_contacts,this.m_contactCount,this.m_allocator);var n=this.m_contactSolver;for(e=0;e<this.m_jointCount;++e)this.m_joints[e].InitVelocityConstraints(t);for(e=0;e<t.velocityIterations;++e)for(n.SolveVelocityConstraints(),i=0;i<this.m_jointCount;++i)this.m_joints[i].SolveVelocityConstraints(t);for(e=0;e<this.m_bodyCount;++e)if(i=this.m_bodies[e],i.GetType()!=f.b2_staticBody){var o=t.dt*i.m_linearVelocity.x,r=t.dt*i.m_linearVelocity.y;o*o+r*r>s.b2_maxTranslationSquared&&(i.m_linearVelocity.Normalize(),i.m_linearVelocity.x*=s.b2_maxTranslation*t.inv_dt,i.m_linearVelocity.y*=s.b2_maxTranslation*t.inv_dt),o=t.dt*i.m_angularVelocity,o*o>s.b2_maxRotationSquared&&(i.m_angularVelocity=i.m_angularVelocity<0?-s.b2_maxRotation*t.inv_dt:s.b2_maxRotation*t.inv_dt),i.m_sweep.c0.SetV(i.m_sweep.c),i.m_sweep.a0=i.m_sweep.a,i.m_sweep.c.x+=t.dt*i.m_linearVelocity.x,i.m_sweep.c.y+=t.dt*i.m_linearVelocity.y,i.m_sweep.a+=t.dt*i.m_angularVelocity,i.SynchronizeTransform()}for(e=0;e<t.positionIterations;++e){for(o=n.SolvePositionConstraints(.75),r=!0,i=0;i<this.m_jointCount;++i){var a=this.m_joints[i].SolvePositionConstraints(s.b2_contactBaumgarte);r=r&&a}if(o&&r)break}this.Report(n.m_constraints)},A.prototype.Report=function(t){if(null!=this.m_listener)for(var e=0;e<this.m_contactCount;++e){for(var i=this.m_contacts[e],n=t[e],o=0;o<n.pointCount;++o)A.s_impulse.normalImpulses[o]=n.points[o].normalImpulse,A.s_impulse.tangentImpulses[o]=n.points[o].tangentImpulse;this.m_listener.PostSolve(i,A.s_impulse)}},A.prototype.AddBody=function(t){t.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=t},A.prototype.AddContact=function(t){this.m_contacts[this.m_contactCount++]=t},A.prototype.AddJoint=function(t){this.m_joints[this.m_jointCount++]=t},Box2D.postDefs.push(function(){Box2D.Dynamics.b2Island.s_impulse=new g}),M.b2TimeStep=function(){},M.prototype.Set=function(t){this.dt=t.dt,this.inv_dt=t.inv_dt,this.positionIterations=t.positionIterations,this.velocityIterations=t.velocityIterations,this.warmStarting=t.warmStarting},T.b2World=function(){this.s_stack=new Vector,this.m_contactManager=new b,this.m_contactSolver=new L,this.m_island=new A},T.prototype.b2World=function(t,e){this.m_controllerList=this.m_jointList=this.m_contactList=this.m_bodyList=this.m_debugDraw=this.m_destructionListener=null,this.m_controllerCount=this.m_jointCount=this.m_contactCount=this.m_bodyCount=0,T.m_warmStarting=!0,T.m_continuousPhysics=!0,this.m_allowSleep=e,this.m_gravity=t,this.m_inv_dt0=0,this.m_contactManager.m_world=this,this.m_groundBody=this.CreateBody(new y)},T.prototype.SetDestructionListener=function(t){this.m_destructionListener=t},T.prototype.SetContactFilter=function(t){this.m_contactManager.m_contactFilter=t},T.prototype.SetContactListener=function(t){this.m_contactManager.m_contactListener=t},T.prototype.SetDebugDraw=function(t){this.m_debugDraw=t},T.prototype.SetBroadPhase=function(t){var e=this.m_contactManager.m_broadPhase;this.m_contactManager.m_broadPhase=t;for(var i=this.m_bodyList;i;i=i.m_next)for(var n=i.m_fixtureList;n;n=n.m_next)n.m_proxy=t.CreateProxy(e.GetFatAABB(n.m_proxy),n)},T.prototype.Validate=function(){this.m_contactManager.m_broadPhase.Validate()},T.prototype.GetProxyCount=function(){return this.m_contactManager.m_broadPhase.GetProxyCount()},T.prototype.CreateBody=function(t){return 1==this.IsLocked()?null:(t=new f(t,this),t.m_prev=null,(t.m_next=this.m_bodyList)&&(this.m_bodyList.m_prev=t),this.m_bodyList=t,++this.m_bodyCount,t)},T.prototype.DestroyBody=function(t){if(1!=this.IsLocked()){for(var e=t.m_jointList;e;){var i=e;e=e.next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(i.joint),this.DestroyJoint(i.joint)}for(e=t.m_controllerList;e;)i=e,e=e.nextController,i.controller.RemoveBody(t);for(e=t.m_contactList;e;)i=e,e=e.next,this.m_contactManager.Destroy(i.contact);for(t.m_contactList=null,e=t.m_fixtureList;e;)i=e,e=e.m_next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(i),i.DestroyProxy(this.m_contactManager.m_broadPhase),i.Destroy();t.m_fixtureList=null,t.m_fixtureCount=0,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_bodyList&&(this.m_bodyList=t.m_next),--this.m_bodyCount}},T.prototype.CreateJoint=function(t){var e=E.Create(t,null);e.m_prev=null,(e.m_next=this.m_jointList)&&(this.m_jointList.m_prev=e),this.m_jointList=e,++this.m_jointCount,e.m_edgeA.joint=e,e.m_edgeA.other=e.m_bodyB,e.m_edgeA.prev=null,(e.m_edgeA.next=e.m_bodyA.m_jointList)&&(e.m_bodyA.m_jointList.prev=e.m_edgeA),e.m_bodyA.m_jointList=e.m_edgeA,e.m_edgeB.joint=e,e.m_edgeB.other=e.m_bodyA,e.m_edgeB.prev=null,(e.m_edgeB.next=e.m_bodyB.m_jointList)&&(e.m_bodyB.m_jointList.prev=e.m_edgeB),e.m_bodyB.m_jointList=e.m_edgeB;var i=t.bodyA,n=t.bodyB;if(0==t.collideConnected)for(t=n.GetContactList();t;)t.other==i&&t.contact.FlagForFiltering(),t=t.next;return e},T.prototype.DestroyJoint=function(t){var e=t.m_collideConnected;t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_jointList&&(this.m_jointList=t.m_next);var i=t.m_bodyA,n=t.m_bodyB;if(i.SetAwake(!0),n.SetAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA==i.m_jointList&&(i.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB==n.m_jointList&&(n.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,E.Destroy(t,null),--this.m_jointCount,0==e)for(t=n.GetContactList();t;)t.other==i&&t.contact.FlagForFiltering(),t=t.next},T.prototype.AddController=function(t){return t.m_next=this.m_controllerList,t.m_prev=null,this.m_controllerList=t,t.m_world=this,this.m_controllerCount++,t},T.prototype.RemoveController=function(t){t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),this.m_controllerList==t&&(this.m_controllerList=t.m_next),this.m_controllerCount--},T.prototype.CreateController=function(t){if(t.m_world!=this)throw Error("Controller can only be a member of one world");return t.m_next=this.m_controllerList,t.m_prev=null,this.m_controllerList&&(this.m_controllerList.m_prev=t),this.m_controllerList=t,++this.m_controllerCount,t.m_world=this,t},T.prototype.DestroyController=function(t){t.Clear(),t.m_next&&(t.m_next.m_prev=t.m_prev),t.m_prev&&(t.m_prev.m_next=t.m_next),t==this.m_controllerList&&(this.m_controllerList=t.m_next),--this.m_controllerCount},T.prototype.SetWarmStarting=function(t){T.m_warmStarting=t},T.prototype.SetContinuousPhysics=function(t){T.m_continuousPhysics=t},T.prototype.GetBodyCount=function(){return this.m_bodyCount},T.prototype.GetJointCount=function(){return this.m_jointCount},T.prototype.GetContactCount=function(){return this.m_contactCount},T.prototype.SetGravity=function(t){this.m_gravity=t},T.prototype.GetGravity=function(){return this.m_gravity},T.prototype.GetGroundBody=function(){return this.m_groundBody},T.prototype.Step=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.m_flags&T.e_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_flags&=~T.e_newFixture),this.m_flags|=T.e_locked;var n=T.s_timestep2;n.dt=t,n.velocityIterations=e,n.positionIterations=i,n.inv_dt=t>0?1/t:0,n.dtRatio=this.m_inv_dt0*t,n.warmStarting=T.m_warmStarting,this.m_contactManager.Collide(),n.dt>0&&this.Solve(n),T.m_continuousPhysics&&n.dt>0&&this.SolveTOI(n),n.dt>0&&(this.m_inv_dt0=n.inv_dt),this.m_flags&=~T.e_locked},T.prototype.ClearForces=function(){for(var t=this.m_bodyList;t;t=t.m_next)t.m_force.SetZero(),t.m_torque=0},T.prototype.DrawDebugData=function(){if(null!=this.m_debugDraw){this.m_debugDraw.m_sprite.graphics.clear();var t,e,i,s=this.m_debugDraw.GetFlags();new n,new n,new n;var a;new r,new r,a=[new n,new n,new n,new n];var l=new o(0,0,0);if(s&w.e_shapeBit)for(t=this.m_bodyList;t;t=t.m_next)for(a=t.m_xf,e=t.GetFixtureList();e;e=e.m_next)i=e.GetShape(),0==t.IsActive()?l.Set(.5,.5,.3):t.GetType()==f.b2_staticBody?l.Set(.5,.9,.5):t.GetType()==f.b2_kinematicBody?l.Set(.5,.5,.9):0==t.IsAwake()?l.Set(.6,.6,.6):l.Set(.9,.7,.7),this.DrawShape(i,a,l);if(s&w.e_jointBit)for(t=this.m_jointList;t;t=t.m_next)this.DrawJoint(t);if(s&w.e_controllerBit)for(t=this.m_controllerList;t;t=t.m_next)t.Draw(this.m_debugDraw);if(s&w.e_pairBit)for(l.Set(.3,.9,.9),t=this.m_contactManager.m_contactList;t;t=t.GetNext())i=t.GetFixtureA(),e=t.GetFixtureB(),i=i.GetAABB().GetCenter(),e=e.GetAABB().GetCenter(),this.m_debugDraw.DrawSegment(i,e,l);if(s&w.e_aabbBit)for(i=this.m_contactManager.m_broadPhase,a=[new n,new n,new n,new n],t=this.m_bodyList;t;t=t.GetNext())if(0!=t.IsActive())for(e=t.GetFixtureList();e;e=e.GetNext()){var c=i.GetFatAABB(e.m_proxy);a[0].Set(c.lowerBound.x,c.lowerBound.y),a[1].Set(c.upperBound.x,c.lowerBound.y),a[2].Set(c.upperBound.x,c.upperBound.y),a[3].Set(c.lowerBound.x,c.upperBound.y),this.m_debugDraw.DrawPolygon(a,4,l)}if(s&w.e_centerOfMassBit)for(t=this.m_bodyList;t;t=t.m_next)a=T.s_xf,a.R=t.m_xf.R,a.position=t.GetWorldCenter(),this.m_debugDraw.DrawTransform(a)}},T.prototype.QueryAABB=function(t,e){var i=this.m_contactManager.m_broadPhase;i.Query(function(e){return t(i.GetUserData(e))},e)},T.prototype.QueryShape=function(t,e,n){void 0===n&&(n=null),null==n&&(n=new i,n.SetIdentity());var o=this.m_contactManager.m_broadPhase,s=new r;e.ComputeAABB(s,n),o.Query(function(i){return i=o.GetUserData(i)instanceof S?o.GetUserData(i):null,d.TestOverlap(e,n,i.GetShape(),i.GetBody().GetTransform())?t(i):!0},s)},T.prototype.QueryPoint=function(t,e){var i=this.m_contactManager.m_broadPhase,n=new r;n.lowerBound.Set(e.x-s.b2_linearSlop,e.y-s.b2_linearSlop),n.upperBound.Set(e.x+s.b2_linearSlop,e.y+s.b2_linearSlop),i.Query(function(n){return n=i.GetUserData(n)instanceof S?i.GetUserData(n):null,n.TestPoint(e)?t(n):!0},n)},T.prototype.RayCast=function(t,e,i){var o=this.m_contactManager.m_broadPhase,s=new h,r=new c(e,i);o.RayCast(function(r,a){var l=o.GetUserData(a);if(l=l instanceof S?l:null,l.RayCast(s,r)){var c=s.fraction,h=new n((1-c)*e.x+c*i.x,(1-c)*e.y+c*i.y);return t(l,h,s.normal,c)}return r.maxFraction},r)},T.prototype.RayCastOne=function(t,e){var i;return this.RayCast(function(t,e,n,o){return void 0===o&&(o=0),i=t,o},t,e),i},T.prototype.RayCastAll=function(t,e){var i=new Vector;return this.RayCast(function(t){return i[i.length]=t,1},t,e),i},T.prototype.GetBodyList=function(){return this.m_bodyList},T.prototype.GetJointList=function(){return this.m_jointList},T.prototype.GetContactList=function(){return this.m_contactList},T.prototype.IsLocked=function(){return(this.m_flags&T.e_locked)>0},T.prototype.Solve=function(t){for(var e,i=this.m_controllerList;i;i=i.m_next)i.Step(t);for(i=this.m_island,i.Initialize(this.m_bodyCount,this.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener,this.m_contactSolver),e=this.m_bodyList;e;e=e.m_next)e.m_flags&=~f.e_islandFlag;for(var n=this.m_contactList;n;n=n.m_next)n.m_flags&=~I.e_islandFlag;for(n=this.m_jointList;n;n=n.m_next)n.m_islandFlag=!1;parseInt(this.m_bodyCount),n=this.s_stack;for(var o=this.m_bodyList;o;o=o.m_next)if(!(o.m_flags&f.e_islandFlag)&&0!=o.IsAwake()&&0!=o.IsActive()&&o.GetType()!=f.b2_staticBody){i.Clear();var s=0;for(n[s++]=o,o.m_flags|=f.e_islandFlag;s>0;)if(e=n[--s],i.AddBody(e),0==e.IsAwake()&&e.SetAwake(!0),e.GetType()!=f.b2_staticBody){for(var r,a=e.m_contactList;a;a=a.next)a.contact.m_flags&I.e_islandFlag||1!=a.contact.IsSensor()&&0!=a.contact.IsEnabled()&&0!=a.contact.IsTouching()&&(i.AddContact(a.contact),a.contact.m_flags|=I.e_islandFlag,r=a.other,r.m_flags&f.e_islandFlag||(n[s++]=r,r.m_flags|=f.e_islandFlag));for(e=e.m_jointList;e;e=e.next)1!=e.joint.m_islandFlag&&(r=e.other,0!=r.IsActive()&&(i.AddJoint(e.joint),e.joint.m_islandFlag=!0,r.m_flags&f.e_islandFlag||(n[s++]=r,r.m_flags|=f.e_islandFlag)))}for(i.Solve(t,this.m_gravity,this.m_allowSleep),s=0;s<i.m_bodyCount;++s)e=i.m_bodies[s],e.GetType()==f.b2_staticBody&&(e.m_flags&=~f.e_islandFlag)}for(s=0;s<n.length&&n[s];++s)n[s]=null;for(e=this.m_bodyList;e;e=e.m_next)0==e.IsAwake()||0==e.IsActive()||e.GetType()!=f.b2_staticBody&&e.SynchronizeFixtures();this.m_contactManager.FindNewContacts()},T.prototype.SolveTOI=function(t){var e,i,n,o=this.m_island;o.Initialize(this.m_bodyCount,s.b2_maxTOIContactsPerIsland,s.b2_maxTOIJointsPerIsland,null,this.m_contactManager.m_contactListener,this.m_contactSolver);var r=T.s_queue;for(e=this.m_bodyList;e;e=e.m_next)e.m_flags&=~f.e_islandFlag,e.m_sweep.t0=0;for(n=this.m_contactList;n;n=n.m_next)n.m_flags&=~(I.e_toiFlag|I.e_islandFlag);for(n=this.m_jointList;n;n=n.m_next)n.m_islandFlag=!1;for(;;){var a=null,l=1;for(n=this.m_contactList;n;n=n.m_next)if(1!=n.IsSensor()&&0!=n.IsEnabled()&&0!=n.IsContinuous()){if(e=1,n.m_flags&I.e_toiFlag)e=n.m_toi;else{if(e=n.m_fixtureA,i=n.m_fixtureB,e=e.m_body,i=i.m_body,!(e.GetType()==f.b2_dynamicBody&&0!=e.IsAwake()||i.GetType()==f.b2_dynamicBody&&0!=i.IsAwake()))continue;var c=e.m_sweep.t0;e.m_sweep.t0<i.m_sweep.t0?(c=i.m_sweep.t0,e.m_sweep.Advance(c)):i.m_sweep.t0<e.m_sweep.t0&&(c=e.m_sweep.t0,i.m_sweep.Advance(c)),e=n.ComputeTOI(e.m_sweep,i.m_sweep),s.b2Assert(e>=0&&1>=e),e>0&&1>e&&(e=(1-e)*c+e,e>1&&(e=1)),n.m_toi=e,n.m_flags|=I.e_toiFlag}Number.MIN_VALUE<e&&l>e&&(a=n,l=e)}if(null==a||1-100*Number.MIN_VALUE<l)break;if(e=a.m_fixtureA,i=a.m_fixtureB,e=e.m_body,i=i.m_body,T.s_backupA.Set(e.m_sweep),T.s_backupB.Set(i.m_sweep),e.Advance(l),i.Advance(l),a.Update(this.m_contactManager.m_contactListener),a.m_flags&=~I.e_toiFlag,1==a.IsSensor()||0==a.IsEnabled())e.m_sweep.Set(T.s_backupA),i.m_sweep.Set(T.s_backupB),e.SynchronizeTransform(),i.SynchronizeTransform();else if(0!=a.IsTouching()){for(e=e,e.GetType()!=f.b2_dynamicBody&&(e=i),o.Clear(),a=n=0,r[n+a++]=e,e.m_flags|=f.e_islandFlag;a>0;)if(e=r[n++],--a,o.AddBody(e),0==e.IsAwake()&&e.SetAwake(!0),e.GetType()==f.b2_dynamicBody){for(i=e.m_contactList;i&&o.m_contactCount!=o.m_contactCapacity;i=i.next)i.contact.m_flags&I.e_islandFlag||1!=i.contact.IsSensor()&&0!=i.contact.IsEnabled()&&0!=i.contact.IsTouching()&&(o.AddContact(i.contact),i.contact.m_flags|=I.e_islandFlag,c=i.other,c.m_flags&f.e_islandFlag||(c.GetType()!=f.b2_staticBody&&(c.Advance(l),c.SetAwake(!0)),r[n+a]=c,++a,c.m_flags|=f.e_islandFlag));for(e=e.m_jointList;e;e=e.next)o.m_jointCount!=o.m_jointCapacity&&1!=e.joint.m_islandFlag&&(c=e.other,0!=c.IsActive()&&(o.AddJoint(e.joint),e.joint.m_islandFlag=!0,c.m_flags&f.e_islandFlag||(c.GetType()!=f.b2_staticBody&&(c.Advance(l),c.SetAwake(!0)),r[n+a]=c,++a,c.m_flags|=f.e_islandFlag)))}for(n=T.s_timestep,n.warmStarting=!1,n.dt=(1-l)*t.dt,n.inv_dt=1/n.dt,n.dtRatio=0,n.velocityIterations=t.velocityIterations,n.positionIterations=t.positionIterations,o.SolveTOI(n),l=l=0;l<o.m_bodyCount;++l)if(e=o.m_bodies[l],e.m_flags&=~f.e_islandFlag,0!=e.IsAwake()&&e.GetType()==f.b2_dynamicBody)for(e.SynchronizeFixtures(),i=e.m_contactList;i;i=i.next)i.contact.m_flags&=~I.e_toiFlag;for(l=0;l<o.m_contactCount;++l)n=o.m_contacts[l],n.m_flags&=~(I.e_toiFlag|I.e_islandFlag);for(l=0;l<o.m_jointCount;++l)n=o.m_joints[l],n.m_islandFlag=!1;this.m_contactManager.FindNewContacts()}}},T.prototype.DrawJoint=function(t){var e=t.GetBodyA(),i=t.GetBodyB(),n=e.m_xf.position,o=i.m_xf.position,s=t.GetAnchorA(),r=t.GetAnchorB(),a=T.s_jointColor;switch(t.m_type){case E.e_distanceJoint:this.m_debugDraw.DrawSegment(s,r,a);break;case E.e_pulleyJoint:e=t instanceof P?t:null,t=e.GetGroundAnchorA(),e=e.GetGroundAnchorB(),this.m_debugDraw.DrawSegment(t,s,a),this.m_debugDraw.DrawSegment(e,r,a),this.m_debugDraw.DrawSegment(t,e,a);break;case E.e_mouseJoint:this.m_debugDraw.DrawSegment(s,r,a);break;default:e!=this.m_groundBody&&this.m_debugDraw.DrawSegment(n,s,a),this.m_debugDraw.DrawSegment(s,r,a),i!=this.m_groundBody&&this.m_debugDraw.DrawSegment(o,r,a)}},T.prototype.DrawShape=function(e,i,n){switch(e.m_type){case d.e_circleShape:var o=e instanceof u?e:null;this.m_debugDraw.DrawSolidCircle(t.MulX(i,o.m_p),o.m_radius,i.R.col1,n);break;case d.e_polygonShape:o=0,o=e instanceof _?e:null,e=parseInt(o.GetVertexCount());var s=o.GetVertices(),r=new Vector(e);for(o=0;e>o;++o)r[o]=t.MulX(i,s[o]);this.m_debugDraw.DrawSolidPolygon(r,e,n);break;case d.e_edgeShape:o=e instanceof m?e:null,this.m_debugDraw.DrawSegment(t.MulX(i,o.GetVertex1()),t.MulX(i,o.GetVertex2()),n)}},Box2D.postDefs.push(function(){Box2D.Dynamics.b2World.s_timestep2=new M,Box2D.Dynamics.b2World.s_xf=new i,Box2D.Dynamics.b2World.s_backupA=new e,Box2D.Dynamics.b2World.s_backupB=new e,Box2D.Dynamics.b2World.s_timestep=new M,Box2D.Dynamics.b2World.s_queue=new Vector,Box2D.Dynamics.b2World.s_jointColor=new o(.5,.8,.8),Box2D.Dynamics.b2World.e_newFixture=1,Box2D.Dynamics.b2World.e_locked=2})}(),function(){var t=Box2D.Collision.Shapes.b2CircleShape,e=Box2D.Collision.Shapes.b2EdgeShape,i=Box2D.Collision.Shapes.b2PolygonShape,n=Box2D.Collision.Shapes.b2Shape,o=Box2D.Dynamics.Contacts.b2CircleContact,s=Box2D.Dynamics.Contacts.b2Contact,r=Box2D.Dynamics.Contacts.b2ContactConstraint,a=Box2D.Dynamics.Contacts.b2ContactConstraintPoint,l=Box2D.Dynamics.Contacts.b2ContactEdge,c=Box2D.Dynamics.Contacts.b2ContactFactory,h=Box2D.Dynamics.Contacts.b2ContactRegister,u=Box2D.Dynamics.Contacts.b2ContactResult,m=Box2D.Dynamics.Contacts.b2ContactSolver,p=Box2D.Dynamics.Contacts.b2EdgeAndCircleContact,_=Box2D.Dynamics.Contacts.b2NullContact,d=Box2D.Dynamics.Contacts.b2PolyAndCircleContact,f=Box2D.Dynamics.Contacts.b2PolyAndEdgeContact,y=Box2D.Dynamics.Contacts.b2PolygonContact,x=Box2D.Dynamics.Contacts.b2PositionSolverManifold,g=Box2D.Dynamics.b2Body,v=Box2D.Dynamics.b2TimeStep,b=Box2D.Common.b2Settings,w=Box2D.Common.Math.b2Mat22,C=Box2D.Common.Math.b2Math,D=Box2D.Common.Math.b2Vec2,S=Box2D.Collision.b2Collision,B=Box2D.Collision.b2ContactID,A=Box2D.Collision.b2Manifold,M=Box2D.Collision.b2TimeOfImpact,T=Box2D.Collision.b2TOIInput,I=Box2D.Collision.b2WorldManifold;Box2D.inherit(o,Box2D.Dynamics.Contacts.b2Contact),o.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype,o.b2CircleContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},o.Create=function(){return new o},o.Destroy=function(){},o.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e)},o.prototype.Evaluate=function(){var e=this.m_fixtureA.GetBody(),i=this.m_fixtureB.GetBody();S.CollideCircles(this.m_manifold,this.m_fixtureA.GetShape()instanceof t?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof t?this.m_fixtureB.GetShape():null,i.m_xf)},s.b2Contact=function(){this.m_nodeA=new l,this.m_nodeB=new l,this.m_manifold=new A,this.m_oldManifold=new A},s.prototype.GetManifold=function(){return this.m_manifold},s.prototype.GetWorldManifold=function(t){var e=this.m_fixtureA.GetBody(),i=this.m_fixtureB.GetBody(),n=this.m_fixtureA.GetShape(),o=this.m_fixtureB.GetShape();t.Initialize(this.m_manifold,e.GetTransform(),n.m_radius,i.GetTransform(),o.m_radius)},s.prototype.IsTouching=function(){return(this.m_flags&s.e_touchingFlag)==s.e_touchingFlag},s.prototype.IsContinuous=function(){return(this.m_flags&s.e_continuousFlag)==s.e_continuousFlag},s.prototype.SetSensor=function(t){t?this.m_flags|=s.e_sensorFlag:this.m_flags&=~s.e_sensorFlag},s.prototype.IsSensor=function(){return(this.m_flags&s.e_sensorFlag)==s.e_sensorFlag},s.prototype.SetEnabled=function(t){t?this.m_flags|=s.e_enabledFlag:this.m_flags&=~s.e_enabledFlag},s.prototype.IsEnabled=function(){return(this.m_flags&s.e_enabledFlag)==s.e_enabledFlag},s.prototype.GetNext=function(){return this.m_next},s.prototype.GetFixtureA=function(){return this.m_fixtureA},s.prototype.GetFixtureB=function(){return this.m_fixtureB},s.prototype.FlagForFiltering=function(){this.m_flags|=s.e_filterFlag},s.prototype.b2Contact=function(){},s.prototype.Reset=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=null),this.m_flags=s.e_enabledFlag,t&&e){(t.IsSensor()||e.IsSensor())&&(this.m_flags|=s.e_sensorFlag);var i=t.GetBody(),n=e.GetBody();(i.GetType()!=g.b2_dynamicBody||i.IsBullet()||n.GetType()!=g.b2_dynamicBody||n.IsBullet())&&(this.m_flags|=s.e_continuousFlag),this.m_fixtureA=t,this.m_fixtureB=e,this.m_manifold.m_pointCount=0,this.m_next=this.m_prev=null,this.m_nodeA.contact=null,this.m_nodeA.prev=null,this.m_nodeA.next=null,this.m_nodeA.other=null,this.m_nodeB.contact=null,this.m_nodeB.prev=null,this.m_nodeB.next=null,this.m_nodeB.other=null}else this.m_fixtureB=this.m_fixtureA=null},s.prototype.Update=function(t){var e=this.m_oldManifold;this.m_oldManifold=this.m_manifold,this.m_manifold=e,this.m_flags|=s.e_enabledFlag;var i=!1;e=(this.m_flags&s.e_touchingFlag)==s.e_touchingFlag;var o=this.m_fixtureA.m_body,r=this.m_fixtureB.m_body,a=this.m_fixtureA.m_aabb.TestOverlap(this.m_fixtureB.m_aabb);if(this.m_flags&s.e_sensorFlag)a&&(i=this.m_fixtureA.GetShape(),a=this.m_fixtureB.GetShape(),o=o.GetTransform(),r=r.GetTransform(),i=n.TestOverlap(i,o,a,r)),this.m_manifold.m_pointCount=0;else{if(o.GetType()!=g.b2_dynamicBody||o.IsBullet()||r.GetType()!=g.b2_dynamicBody||r.IsBullet()?this.m_flags|=s.e_continuousFlag:this.m_flags&=~s.e_continuousFlag,a)for(this.Evaluate(),i=this.m_manifold.m_pointCount>0,a=0;a<this.m_manifold.m_pointCount;++a){var l=this.m_manifold.m_points[a];l.m_normalImpulse=0,l.m_tangentImpulse=0;for(var c=l.m_id,h=0;h<this.m_oldManifold.m_pointCount;++h){var u=this.m_oldManifold.m_points[h];if(u.m_id.key==c.key){l.m_normalImpulse=u.m_normalImpulse,l.m_tangentImpulse=u.m_tangentImpulse;break}}}else this.m_manifold.m_pointCount=0;i!=e&&(o.SetAwake(!0),r.SetAwake(!0))}i?this.m_flags|=s.e_touchingFlag:this.m_flags&=~s.e_touchingFlag,0==e&&1==i&&t.BeginContact(this),1==e&&0==i&&t.EndContact(this),0==(this.m_flags&s.e_sensorFlag)&&t.PreSolve(this,this.m_oldManifold)},s.prototype.Evaluate=function(){},s.prototype.ComputeTOI=function(t,e){return s.s_input.proxyA.Set(this.m_fixtureA.GetShape()),s.s_input.proxyB.Set(this.m_fixtureB.GetShape()),s.s_input.sweepA=t,s.s_input.sweepB=e,s.s_input.tolerance=b.b2_linearSlop,M.TimeOfImpact(s.s_input)},Box2D.postDefs.push(function(){Box2D.Dynamics.Contacts.b2Contact.e_sensorFlag=1,Box2D.Dynamics.Contacts.b2Contact.e_continuousFlag=2,Box2D.Dynamics.Contacts.b2Contact.e_islandFlag=4,Box2D.Dynamics.Contacts.b2Contact.e_toiFlag=8,Box2D.Dynamics.Contacts.b2Contact.e_touchingFlag=16,Box2D.Dynamics.Contacts.b2Contact.e_enabledFlag=32,Box2D.Dynamics.Contacts.b2Contact.e_filterFlag=64,Box2D.Dynamics.Contacts.b2Contact.s_input=new T}),r.b2ContactConstraint=function(){this.localPlaneNormal=new D,this.localPoint=new D,this.normal=new D,this.normalMass=new w,this.K=new w},r.prototype.b2ContactConstraint=function(){this.points=new Vector(b.b2_maxManifoldPoints);for(var t=0;t<b.b2_maxManifoldPoints;t++)this.points[t]=new a},a.b2ContactConstraintPoint=function(){this.localPoint=new D,this.rA=new D,this.rB=new D},l.b2ContactEdge=function(){},c.b2ContactFactory=function(){},c.prototype.b2ContactFactory=function(t){this.m_allocator=t,this.InitializeRegisters()},c.prototype.AddType=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this.m_registers[i][n].createFcn=t,this.m_registers[i][n].destroyFcn=e,this.m_registers[i][n].primary=!0,i!=n&&(this.m_registers[n][i].createFcn=t,this.m_registers[n][i].destroyFcn=e,this.m_registers[n][i].primary=!1)},c.prototype.InitializeRegisters=function(){this.m_registers=new Vector(n.e_shapeTypeCount);for(var t=0;t<n.e_shapeTypeCount;t++){this.m_registers[t]=new Vector(n.e_shapeTypeCount);for(var e=0;e<n.e_shapeTypeCount;e++)this.m_registers[t][e]=new h}this.AddType(o.Create,o.Destroy,n.e_circleShape,n.e_circleShape),this.AddType(d.Create,d.Destroy,n.e_polygonShape,n.e_circleShape),this.AddType(y.Create,y.Destroy,n.e_polygonShape,n.e_polygonShape),this.AddType(p.Create,p.Destroy,n.e_edgeShape,n.e_circleShape),this.AddType(f.Create,f.Destroy,n.e_polygonShape,n.e_edgeShape);
},c.prototype.Create=function(t,e){var i=parseInt(t.GetType()),n=parseInt(e.GetType());return i=this.m_registers[i][n],i.pool?(n=i.pool,i.pool=n.m_next,i.poolCount--,n.Reset(t,e),n):(n=i.createFcn,null!=n?(i.primary?(n=n(this.m_allocator),n.Reset(t,e)):(n=n(this.m_allocator),n.Reset(e,t)),n):null)},c.prototype.Destroy=function(t){t.m_manifold.m_pointCount>0&&(t.m_fixtureA.m_body.SetAwake(!0),t.m_fixtureB.m_body.SetAwake(!0));var e=parseInt(t.m_fixtureA.GetType()),i=parseInt(t.m_fixtureB.GetType());e=this.m_registers[e][i],e.poolCount++,t.m_next=e.pool,e.pool=t,(e=e.destroyFcn)(t,this.m_allocator)},h.b2ContactRegister=function(){},u.b2ContactResult=function(){this.position=new D,this.normal=new D,this.id=new B},m.b2ContactSolver=function(){this.m_step=new v,this.m_constraints=new Vector},m.prototype.b2ContactSolver=function(){},m.prototype.Initialize=function(t,e,i,n){void 0===i&&(i=0);var o;for(this.m_step.Set(t),this.m_allocator=n,t=0,this.m_constraintCount=i;this.m_constraints.length<this.m_constraintCount;)this.m_constraints[this.m_constraints.length]=new r;for(t=0;i>t;++t){o=e[t],n=o.m_fixtureA;var s=o.m_fixtureB,a=n.m_shape.m_radius,l=s.m_shape.m_radius,c=n.m_body,h=s.m_body,u=o.GetManifold(),p=b.b2MixFriction(n.GetFriction(),s.GetFriction()),_=b.b2MixRestitution(n.GetRestitution(),s.GetRestitution()),d=c.m_linearVelocity.x,f=c.m_linearVelocity.y,y=h.m_linearVelocity.x,x=h.m_linearVelocity.y,g=c.m_angularVelocity,v=h.m_angularVelocity;for(b.b2Assert(u.m_pointCount>0),m.s_worldManifold.Initialize(u,c.m_xf,a,h.m_xf,l),s=m.s_worldManifold.m_normal.x,o=m.s_worldManifold.m_normal.y,n=this.m_constraints[t],n.bodyA=c,n.bodyB=h,n.manifold=u,n.normal.x=s,n.normal.y=o,n.pointCount=u.m_pointCount,n.friction=p,n.restitution=_,n.localPlaneNormal.x=u.m_localPlaneNormal.x,n.localPlaneNormal.y=u.m_localPlaneNormal.y,n.localPoint.x=u.m_localPoint.x,n.localPoint.y=u.m_localPoint.y,n.radius=a+l,n.type=u.m_type,a=0;a<n.pointCount;++a){p=u.m_points[a],l=n.points[a],l.normalImpulse=p.m_normalImpulse,l.tangentImpulse=p.m_tangentImpulse,l.localPoint.SetV(p.m_localPoint),p=l.rA.x=m.s_worldManifold.m_points[a].x-c.m_sweep.c.x,_=l.rA.y=m.s_worldManifold.m_points[a].y-c.m_sweep.c.y;var w=l.rB.x=m.s_worldManifold.m_points[a].x-h.m_sweep.c.x,C=l.rB.y=m.s_worldManifold.m_points[a].y-h.m_sweep.c.y,D=p*o-_*s,S=w*o-C*s;D*=D,S*=S,l.normalMass=1/(c.m_invMass+h.m_invMass+c.m_invI*D+h.m_invI*S);var B=c.m_mass*c.m_invMass+h.m_mass*h.m_invMass;B+=c.m_mass*c.m_invI*D+h.m_mass*h.m_invI*S,l.equalizedMass=1/B,S=o,B=-s,D=p*B-_*S,S=w*B-C*S,D*=D,S*=S,l.tangentMass=1/(c.m_invMass+h.m_invMass+c.m_invI*D+h.m_invI*S),l.velocityBias=0,p=n.normal.x*(y+-v*C-d- -g*_)+n.normal.y*(x+v*w-f-g*p),p<-b.b2_velocityThreshold&&(l.velocityBias+=-n.restitution*p)}2==n.pointCount&&(x=n.points[0],y=n.points[1],u=c.m_invMass,c=c.m_invI,d=h.m_invMass,h=h.m_invI,f=x.rA.x*o-x.rA.y*s,x=x.rB.x*o-x.rB.y*s,g=y.rA.x*o-y.rA.y*s,y=y.rB.x*o-y.rB.y*s,s=u+d+c*f*f+h*x*x,o=u+d+c*g*g+h*y*y,h=u+d+c*f*g+h*x*y,100*(s*o-h*h)>s*s?(n.K.col1.Set(s,h),n.K.col2.Set(h,o),n.K.GetInverse(n.normalMass)):n.pointCount=1)}},m.prototype.InitVelocityConstraints=function(t){for(var e=0;e<this.m_constraintCount;++e){var i=this.m_constraints[e],n=i.bodyA,o=i.bodyB,s=n.m_invMass,r=n.m_invI,a=o.m_invMass,l=o.m_invI,c=i.normal.x,h=i.normal.y,u=h,m=-c,p=0,_=0;if(t.warmStarting)for(_=i.pointCount,p=0;_>p;++p){var d=i.points[p];d.normalImpulse*=t.dtRatio,d.tangentImpulse*=t.dtRatio;var f=d.normalImpulse*c+d.tangentImpulse*u,y=d.normalImpulse*h+d.tangentImpulse*m;n.m_angularVelocity-=r*(d.rA.x*y-d.rA.y*f),n.m_linearVelocity.x-=s*f,n.m_linearVelocity.y-=s*y,o.m_angularVelocity+=l*(d.rB.x*y-d.rB.y*f),o.m_linearVelocity.x+=a*f,o.m_linearVelocity.y+=a*y}else for(_=i.pointCount,p=0;_>p;++p)n=i.points[p],n.normalImpulse=0,n.tangentImpulse=0}},m.prototype.SolveVelocityConstraints=function(){for(var t,e,i=0,n=0,o=0,s=0,r=o=o=n=n=0,a=n=n=0,l=n=s=0,c=0,h=0;h<this.m_constraintCount;++h){s=this.m_constraints[h];var u=s.bodyA,m=s.bodyB,p=u.m_angularVelocity,_=m.m_angularVelocity,d=u.m_linearVelocity,f=m.m_linearVelocity,y=u.m_invMass,x=u.m_invI,g=m.m_invMass,v=m.m_invI;l=s.normal.x;var b=c=s.normal.y;for(e=-l,a=s.friction,i=0;i<s.pointCount;i++)t=s.points[i],n=f.x-_*t.rB.y-d.x+p*t.rA.y,o=f.y+_*t.rB.x-d.y-p*t.rA.x,n=n*b+o*e,n=t.tangentMass*-n,o=a*t.normalImpulse,o=C.Clamp(t.tangentImpulse+n,-o,o),n=o-t.tangentImpulse,r=n*b,n*=e,d.x-=y*r,d.y-=y*n,p-=x*(t.rA.x*n-t.rA.y*r),f.x+=g*r,f.y+=g*n,_+=v*(t.rB.x*n-t.rB.y*r),t.tangentImpulse=o;if(parseInt(s.pointCount),1==s.pointCount)t=s.points[0],n=f.x+-_*t.rB.y-d.x- -p*t.rA.y,o=f.y+_*t.rB.x-d.y-p*t.rA.x,s=n*l+o*c,n=-t.normalMass*(s-t.velocityBias),o=t.normalImpulse+n,o=o>0?o:0,n=o-t.normalImpulse,r=n*l,n*=c,d.x-=y*r,d.y-=y*n,p-=x*(t.rA.x*n-t.rA.y*r),f.x+=g*r,f.y+=g*n,_+=v*(t.rB.x*n-t.rB.y*r),t.normalImpulse=o;else{t=s.points[0],i=s.points[1],n=t.normalImpulse,a=i.normalImpulse;var w=(f.x-_*t.rB.y-d.x+p*t.rA.y)*l+(f.y+_*t.rB.x-d.y-p*t.rA.x)*c,D=(f.x-_*i.rB.y-d.x+p*i.rA.y)*l+(f.y+_*i.rB.x-d.y-p*i.rA.x)*c;for(o=w-t.velocityBias,r=D-i.velocityBias,e=s.K,o-=e.col1.x*n+e.col2.x*a,r-=e.col1.y*n+e.col2.y*a;;){if(e=s.normalMass,b=-(e.col1.x*o+e.col2.x*r),e=-(e.col1.y*o+e.col2.y*r),b>=0&&e>=0){n=b-n,a=e-a,s=n*l,n*=c,l=a*l,c=a*c,d.x-=y*(s+l),d.y-=y*(n+c),p-=x*(t.rA.x*n-t.rA.y*s+i.rA.x*c-i.rA.y*l),f.x+=g*(s+l),f.y+=g*(n+c),_+=v*(t.rB.x*n-t.rB.y*s+i.rB.x*c-i.rB.y*l),t.normalImpulse=b,i.normalImpulse=e;break}if(b=-t.normalMass*o,e=0,D=s.K.col1.y*b+r,b>=0&&D>=0){n=b-n,a=e-a,s=n*l,n*=c,l=a*l,c=a*c,d.x-=y*(s+l),d.y-=y*(n+c),p-=x*(t.rA.x*n-t.rA.y*s+i.rA.x*c-i.rA.y*l),f.x+=g*(s+l),f.y+=g*(n+c),_+=v*(t.rB.x*n-t.rB.y*s+i.rB.x*c-i.rB.y*l),t.normalImpulse=b,i.normalImpulse=e;break}if(b=0,e=-i.normalMass*r,w=s.K.col2.x*e+o,e>=0&&w>=0){n=b-n,a=e-a,s=n*l,n*=c,l=a*l,c=a*c,d.x-=y*(s+l),d.y-=y*(n+c),p-=x*(t.rA.x*n-t.rA.y*s+i.rA.x*c-i.rA.y*l),f.x+=g*(s+l),f.y+=g*(n+c),_+=v*(t.rB.x*n-t.rB.y*s+i.rB.x*c-i.rB.y*l),t.normalImpulse=b,i.normalImpulse=e;break}if(e=b=0,w=o,D=r,w>=0&&D>=0){n=b-n,a=e-a,s=n*l,n*=c,l=a*l,c=a*c,d.x-=y*(s+l),d.y-=y*(n+c),p-=x*(t.rA.x*n-t.rA.y*s+i.rA.x*c-i.rA.y*l),f.x+=g*(s+l),f.y+=g*(n+c),_+=v*(t.rB.x*n-t.rB.y*s+i.rB.x*c-i.rB.y*l),t.normalImpulse=b,i.normalImpulse=e;break}break}}u.m_angularVelocity=p,m.m_angularVelocity=_}},m.prototype.FinalizeVelocityConstraints=function(){for(var t=0;t<this.m_constraintCount;++t)for(var e=this.m_constraints[t],i=e.manifold,n=0;n<e.pointCount;++n){var o=i.m_points[n],s=e.points[n];o.m_normalImpulse=s.normalImpulse,o.m_tangentImpulse=s.tangentImpulse}},m.prototype.SolvePositionConstraints=function(t){void 0===t&&(t=0);for(var e=0,i=0;i<this.m_constraintCount;i++){var n=this.m_constraints[i],o=n.bodyA,s=n.bodyB,r=o.m_mass*o.m_invMass,a=o.m_mass*o.m_invI,l=s.m_mass*s.m_invMass,c=s.m_mass*s.m_invI;m.s_psm.Initialize(n);for(var h=m.s_psm.m_normal,u=0;u<n.pointCount;u++){var p=n.points[u],_=m.s_psm.m_points[u],d=m.s_psm.m_separations[u],f=_.x-o.m_sweep.c.x,y=_.y-o.m_sweep.c.y,x=_.x-s.m_sweep.c.x;_=_.y-s.m_sweep.c.y,e=d>e?e:d,d=C.Clamp(t*(d+b.b2_linearSlop),-b.b2_maxLinearCorrection,0),d=-p.equalizedMass*d,p=d*h.x,d*=h.y,o.m_sweep.c.x-=r*p,o.m_sweep.c.y-=r*d,o.m_sweep.a-=a*(f*d-y*p),o.SynchronizeTransform(),s.m_sweep.c.x+=l*p,s.m_sweep.c.y+=l*d,s.m_sweep.a+=c*(x*d-_*p),s.SynchronizeTransform()}}return e>-1.5*b.b2_linearSlop},Box2D.postDefs.push(function(){Box2D.Dynamics.Contacts.b2ContactSolver.s_worldManifold=new I,Box2D.Dynamics.Contacts.b2ContactSolver.s_psm=new x}),Box2D.inherit(p,Box2D.Dynamics.Contacts.b2Contact),p.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype,p.b2EdgeAndCircleContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},p.Create=function(){return new p},p.Destroy=function(){},p.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e)},p.prototype.Evaluate=function(){var i=this.m_fixtureA.GetBody(),n=this.m_fixtureB.GetBody();this.b2CollideEdgeAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof e?this.m_fixtureA.GetShape():null,i.m_xf,this.m_fixtureB.GetShape()instanceof t?this.m_fixtureB.GetShape():null,n.m_xf)},p.prototype.b2CollideEdgeAndCircle=function(){},Box2D.inherit(_,Box2D.Dynamics.Contacts.b2Contact),_.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype,_.b2NullContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},_.prototype.b2NullContact=function(){this.__super.b2Contact.call(this)},_.prototype.Evaluate=function(){},Box2D.inherit(d,Box2D.Dynamics.Contacts.b2Contact),d.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype,d.b2PolyAndCircleContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},d.Create=function(){return new d},d.Destroy=function(){},d.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e),b.b2Assert(t.GetType()==n.e_polygonShape),b.b2Assert(e.GetType()==n.e_circleShape)},d.prototype.Evaluate=function(){var e=this.m_fixtureA.m_body,n=this.m_fixtureB.m_body;S.CollidePolygonAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof i?this.m_fixtureA.GetShape():null,e.m_xf,this.m_fixtureB.GetShape()instanceof t?this.m_fixtureB.GetShape():null,n.m_xf)},Box2D.inherit(f,Box2D.Dynamics.Contacts.b2Contact),f.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype,f.b2PolyAndEdgeContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},f.Create=function(){return new f},f.Destroy=function(){},f.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e),b.b2Assert(t.GetType()==n.e_polygonShape),b.b2Assert(e.GetType()==n.e_edgeShape)},f.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody(),n=this.m_fixtureB.GetBody();this.b2CollidePolyAndEdge(this.m_manifold,this.m_fixtureA.GetShape()instanceof i?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof e?this.m_fixtureB.GetShape():null,n.m_xf)},f.prototype.b2CollidePolyAndEdge=function(){},Box2D.inherit(y,Box2D.Dynamics.Contacts.b2Contact),y.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype,y.b2PolygonContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)},y.Create=function(){return new y},y.Destroy=function(){},y.prototype.Reset=function(t,e){this.__super.Reset.call(this,t,e)},y.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody(),e=this.m_fixtureB.GetBody();S.CollidePolygons(this.m_manifold,this.m_fixtureA.GetShape()instanceof i?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof i?this.m_fixtureB.GetShape():null,e.m_xf)},x.b2PositionSolverManifold=function(){},x.prototype.b2PositionSolverManifold=function(){this.m_normal=new D,this.m_separations=new Vector_a2j_Number(b.b2_maxManifoldPoints),this.m_points=new Vector(b.b2_maxManifoldPoints);for(var t=0;t<b.b2_maxManifoldPoints;t++)this.m_points[t]=new D},x.prototype.Initialize=function(t){b.b2Assert(t.pointCount>0);var e,i=0,n=0,o=0,s=0,r=0;switch(t.type){case A.e_circles:e=t.bodyA.m_xf.R,o=t.localPoint,i=t.bodyA.m_xf.position.x+(e.col1.x*o.x+e.col2.x*o.y),n=t.bodyA.m_xf.position.y+(e.col1.y*o.x+e.col2.y*o.y),e=t.bodyB.m_xf.R,o=t.points[0].localPoint,s=t.bodyB.m_xf.position.x+(e.col1.x*o.x+e.col2.x*o.y),e=t.bodyB.m_xf.position.y+(e.col1.y*o.x+e.col2.y*o.y),o=s-i,r=e-n;var a=o*o+r*r;a>Number.MIN_VALUE*Number.MIN_VALUE?(a=Math.sqrt(a),this.m_normal.x=o/a,this.m_normal.y=r/a):(this.m_normal.x=1,this.m_normal.y=0),this.m_points[0].x=.5*(i+s),this.m_points[0].y=.5*(n+e),this.m_separations[0]=o*this.m_normal.x+r*this.m_normal.y-t.radius;break;case A.e_faceA:for(e=t.bodyA.m_xf.R,o=t.localPlaneNormal,this.m_normal.x=e.col1.x*o.x+e.col2.x*o.y,this.m_normal.y=e.col1.y*o.x+e.col2.y*o.y,e=t.bodyA.m_xf.R,o=t.localPoint,s=t.bodyA.m_xf.position.x+(e.col1.x*o.x+e.col2.x*o.y),r=t.bodyA.m_xf.position.y+(e.col1.y*o.x+e.col2.y*o.y),e=t.bodyB.m_xf.R,i=0;i<t.pointCount;++i)o=t.points[i].localPoint,n=t.bodyB.m_xf.position.x+(e.col1.x*o.x+e.col2.x*o.y),o=t.bodyB.m_xf.position.y+(e.col1.y*o.x+e.col2.y*o.y),this.m_separations[i]=(n-s)*this.m_normal.x+(o-r)*this.m_normal.y-t.radius,this.m_points[i].x=n,this.m_points[i].y=o;break;case A.e_faceB:for(e=t.bodyB.m_xf.R,o=t.localPlaneNormal,this.m_normal.x=e.col1.x*o.x+e.col2.x*o.y,this.m_normal.y=e.col1.y*o.x+e.col2.y*o.y,e=t.bodyB.m_xf.R,o=t.localPoint,s=t.bodyB.m_xf.position.x+(e.col1.x*o.x+e.col2.x*o.y),r=t.bodyB.m_xf.position.y+(e.col1.y*o.x+e.col2.y*o.y),e=t.bodyA.m_xf.R,i=0;i<t.pointCount;++i)o=t.points[i].localPoint,n=t.bodyA.m_xf.position.x+(e.col1.x*o.x+e.col2.x*o.y),o=t.bodyA.m_xf.position.y+(e.col1.y*o.x+e.col2.y*o.y),this.m_separations[i]=(n-s)*this.m_normal.x+(o-r)*this.m_normal.y-t.radius,this.m_points[i].Set(n,o);this.m_normal.x*=-1,this.m_normal.y*=-1}},Box2D.postDefs.push(function(){Box2D.Dynamics.Contacts.b2PositionSolverManifold.circlePointA=new D,Box2D.Dynamics.Contacts.b2PositionSolverManifold.circlePointB=new D})}(),function(){var t=Box2D.Common.Math.b2Mat22,e=Box2D.Common.Math.b2Math,i=Box2D.Common.Math.b2Vec2,n=Box2D.Common.b2Color,o=Box2D.Dynamics.Controllers.b2BuoyancyController,s=Box2D.Dynamics.Controllers.b2ConstantAccelController,r=Box2D.Dynamics.Controllers.b2ConstantForceController,a=Box2D.Dynamics.Controllers.b2Controller,l=Box2D.Dynamics.Controllers.b2ControllerEdge,c=Box2D.Dynamics.Controllers.b2GravityController,h=Box2D.Dynamics.Controllers.b2TensorDampingController;Box2D.inherit(o,Box2D.Dynamics.Controllers.b2Controller),o.prototype.__super=Box2D.Dynamics.Controllers.b2Controller.prototype,o.b2BuoyancyController=function(){Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.normal=new i(0,-1),this.density=this.offset=0,this.velocity=new i(0,0),this.linearDrag=2,this.angularDrag=1,this.useDensity=!1,this.useWorldGravity=!0,this.gravity=null},o.prototype.Step=function(){if(this.m_bodyList){this.useWorldGravity&&(this.gravity=this.GetWorld().GetGravity().Copy());for(var t=this.m_bodyList;t;t=t.nextBody){var e=t.body;if(0!=e.IsAwake()){for(var n=new i,o=new i,s=0,r=0,a=e.GetFixtureList();a;a=a.GetNext()){var l=new i,c=a.GetShape().ComputeSubmergedArea(this.normal,this.offset,e.GetTransform(),l);s+=c,n.x+=c*l.x,n.y+=c*l.y;var h=0;h=1,r+=c*h,o.x+=c*l.x*h,o.y+=c*l.y*h}n.x/=s,n.y/=s,o.x/=r,o.y/=r,s<Number.MIN_VALUE||(r=this.gravity.GetNegative(),r.Multiply(this.density*s),e.ApplyForce(r,o),o=e.GetLinearVelocityFromWorldPoint(n),o.Subtract(this.velocity),o.Multiply(-this.linearDrag*s),e.ApplyForce(o,n),e.ApplyTorque(-e.GetInertia()/e.GetMass()*s*e.GetAngularVelocity()*this.angularDrag))}}}},o.prototype.Draw=function(t){var e=new i,o=new i;e.x=this.normal.x*this.offset+1e3*this.normal.y,e.y=this.normal.y*this.offset-1e3*this.normal.x,o.x=this.normal.x*this.offset-1e3*this.normal.y,o.y=this.normal.y*this.offset+1e3*this.normal.x;var s=new n(0,0,1);t.DrawSegment(e,o,s)},Box2D.inherit(s,Box2D.Dynamics.Controllers.b2Controller),s.prototype.__super=Box2D.Dynamics.Controllers.b2Controller.prototype,s.b2ConstantAccelController=function(){Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.A=new i(0,0)},s.prototype.Step=function(t){t=new i(this.A.x*t.dt,this.A.y*t.dt);for(var e=this.m_bodyList;e;e=e.nextBody){var n=e.body;n.IsAwake()&&n.SetLinearVelocity(new i(n.GetLinearVelocity().x+t.x,n.GetLinearVelocity().y+t.y))}},Box2D.inherit(r,Box2D.Dynamics.Controllers.b2Controller),r.prototype.__super=Box2D.Dynamics.Controllers.b2Controller.prototype,r.b2ConstantForceController=function(){Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.F=new i(0,0)},r.prototype.Step=function(){for(var t=this.m_bodyList;t;t=t.nextBody){var e=t.body;e.IsAwake()&&e.ApplyForce(this.F,e.GetWorldCenter())}},a.b2Controller=function(){},a.prototype.Step=function(){},a.prototype.Draw=function(){},a.prototype.AddBody=function(t){var e=new l;e.controller=this,e.body=t,e.nextBody=this.m_bodyList,e.prevBody=null,this.m_bodyList=e,e.nextBody&&(e.nextBody.prevBody=e),this.m_bodyCount++,e.nextController=t.m_controllerList,e.prevController=null,t.m_controllerList=e,e.nextController&&(e.nextController.prevController=e),t.m_controllerCount++},a.prototype.RemoveBody=function(t){for(var e=t.m_controllerList;e&&e.controller!=this;)e=e.nextController;e.prevBody&&(e.prevBody.nextBody=e.nextBody),e.nextBody&&(e.nextBody.prevBody=e.prevBody),e.nextController&&(e.nextController.prevController=e.prevController),e.prevController&&(e.prevController.nextController=e.nextController),this.m_bodyList==e&&(this.m_bodyList=e.nextBody),t.m_controllerList==e&&(t.m_controllerList=e.nextController),t.m_controllerCount--,this.m_bodyCount--},a.prototype.Clear=function(){for(;this.m_bodyList;)this.RemoveBody(this.m_bodyList.body)},a.prototype.GetNext=function(){return this.m_next},a.prototype.GetWorld=function(){return this.m_world},a.prototype.GetBodyList=function(){return this.m_bodyList},l.b2ControllerEdge=function(){},Box2D.inherit(c,Box2D.Dynamics.Controllers.b2Controller),c.prototype.__super=Box2D.Dynamics.Controllers.b2Controller.prototype,c.b2GravityController=function(){Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.G=1,this.invSqr=!0},c.prototype.Step=function(){var t=null,e=null,n=null,o=0,s=null,r=null,a=null,l=0,c=0,h=0;if(l=null,this.invSqr)for(t=this.m_bodyList;t;t=t.nextBody)for(e=t.body,n=e.GetWorldCenter(),o=e.GetMass(),s=this.m_bodyList;s!=t;s=s.nextBody)r=s.body,a=r.GetWorldCenter(),l=a.x-n.x,c=a.y-n.y,h=l*l+c*c,h<Number.MIN_VALUE||(l=new i(l,c),l.Multiply(this.G/h/Math.sqrt(h)*o*r.GetMass()),e.IsAwake()&&e.ApplyForce(l,n),l.Multiply(-1),r.IsAwake()&&r.ApplyForce(l,a));else for(t=this.m_bodyList;t;t=t.nextBody)for(e=t.body,n=e.GetWorldCenter(),o=e.GetMass(),s=this.m_bodyList;s!=t;s=s.nextBody)r=s.body,a=r.GetWorldCenter(),l=a.x-n.x,c=a.y-n.y,h=l*l+c*c,h<Number.MIN_VALUE||(l=new i(l,c),l.Multiply(this.G/h*o*r.GetMass()),e.IsAwake()&&e.ApplyForce(l,n),l.Multiply(-1),r.IsAwake()&&r.ApplyForce(l,a))},Box2D.inherit(h,Box2D.Dynamics.Controllers.b2Controller),h.prototype.__super=Box2D.Dynamics.Controllers.b2Controller.prototype,h.b2TensorDampingController=function(){Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments),this.T=new t,this.maxTimestep=0},h.prototype.SetAxisAligned=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.T.col1.x=-t,this.T.col1.y=0,this.T.col2.x=0,this.T.col2.y=-e,this.maxTimestep=t>0||e>0?1/Math.max(t,e):0},h.prototype.Step=function(t){if(t=t.dt,!(t<=Number.MIN_VALUE)){t>this.maxTimestep&&this.maxTimestep>0&&(t=this.maxTimestep);for(var n=this.m_bodyList;n;n=n.nextBody){var o=n.body;if(o.IsAwake()){var s=o.GetWorldVector(e.MulMV(this.T,o.GetLocalVector(o.GetLinearVelocity())));o.SetLinearVelocity(new i(o.GetLinearVelocity().x+s.x*t,o.GetLinearVelocity().y+s.y*t))}}}}}(),function(){var t=Box2D.Common.b2Settings,e=Box2D.Common.Math.b2Mat22,i=Box2D.Common.Math.b2Mat33,n=Box2D.Common.Math.b2Math,o=Box2D.Common.Math.b2Vec2,s=Box2D.Common.Math.b2Vec3,r=Box2D.Dynamics.Joints.b2DistanceJoint,a=Box2D.Dynamics.Joints.b2DistanceJointDef,l=Box2D.Dynamics.Joints.b2FrictionJoint,c=Box2D.Dynamics.Joints.b2FrictionJointDef,h=Box2D.Dynamics.Joints.b2GearJoint,u=Box2D.Dynamics.Joints.b2GearJointDef,m=Box2D.Dynamics.Joints.b2Jacobian,p=Box2D.Dynamics.Joints.b2Joint,_=Box2D.Dynamics.Joints.b2JointDef,d=Box2D.Dynamics.Joints.b2JointEdge,f=Box2D.Dynamics.Joints.b2LineJoint,y=Box2D.Dynamics.Joints.b2LineJointDef,x=Box2D.Dynamics.Joints.b2MouseJoint,g=Box2D.Dynamics.Joints.b2MouseJointDef,v=Box2D.Dynamics.Joints.b2PrismaticJoint,b=Box2D.Dynamics.Joints.b2PrismaticJointDef,w=Box2D.Dynamics.Joints.b2PulleyJoint,C=Box2D.Dynamics.Joints.b2PulleyJointDef,D=Box2D.Dynamics.Joints.b2RevoluteJoint,S=Box2D.Dynamics.Joints.b2RevoluteJointDef,B=Box2D.Dynamics.Joints.b2WeldJoint,A=Box2D.Dynamics.Joints.b2WeldJointDef;Box2D.inherit(r,Box2D.Dynamics.Joints.b2Joint),r.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,r.b2DistanceJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_u=new o},r.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},r.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},r.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse*this.m_u.x,t*this.m_impulse*this.m_u.y)},r.prototype.GetReactionTorque=function(){return 0},r.prototype.GetLength=function(){return this.m_length},r.prototype.SetLength=function(t){void 0===t&&(t=0),this.m_length=t},r.prototype.GetFrequency=function(){return this.m_frequencyHz},r.prototype.SetFrequency=function(t){void 0===t&&(t=0),this.m_frequencyHz=t},r.prototype.GetDampingRatio=function(){return this.m_dampingRatio},r.prototype.SetDampingRatio=function(t){void 0===t&&(t=0),this.m_dampingRatio=t},r.prototype.b2DistanceJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_length=t.length,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_bias=this.m_gamma=this.m_impulse=0},r.prototype.InitVelocityConstraints=function(e){var i,n=0,o=this.m_bodyA,s=this.m_bodyB;i=o.m_xf.R;var r=this.m_localAnchor1.x-o.m_sweep.localCenter.x,a=this.m_localAnchor1.y-o.m_sweep.localCenter.y;n=i.col1.x*r+i.col2.x*a,a=i.col1.y*r+i.col2.y*a,r=n,i=s.m_xf.R;var l=this.m_localAnchor2.x-s.m_sweep.localCenter.x,c=this.m_localAnchor2.y-s.m_sweep.localCenter.y;n=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=n,this.m_u.x=s.m_sweep.c.x+l-o.m_sweep.c.x-r,this.m_u.y=s.m_sweep.c.y+c-o.m_sweep.c.y-a,n=Math.sqrt(this.m_u.x*this.m_u.x+this.m_u.y*this.m_u.y),n>t.b2_linearSlop?this.m_u.Multiply(1/n):this.m_u.SetZero(),i=r*this.m_u.y-a*this.m_u.x;var h=l*this.m_u.y-c*this.m_u.x;if(i=o.m_invMass+o.m_invI*i*i+s.m_invMass+s.m_invI*h*h,this.m_mass=0!=i?1/i:0,this.m_frequencyHz>0){n-=this.m_length,h=2*Math.PI*this.m_frequencyHz;var u=this.m_mass*h*h;this.m_gamma=e.dt*(2*this.m_mass*this.m_dampingRatio*h+e.dt*u),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=n*e.dt*u*this.m_gamma,this.m_mass=i+this.m_gamma,this.m_mass=0!=this.m_mass?1/this.m_mass:0}e.warmStarting?(this.m_impulse*=e.dtRatio,e=this.m_impulse*this.m_u.x,i=this.m_impulse*this.m_u.y,o.m_linearVelocity.x-=o.m_invMass*e,o.m_linearVelocity.y-=o.m_invMass*i,o.m_angularVelocity-=o.m_invI*(r*i-a*e),s.m_linearVelocity.x+=s.m_invMass*e,s.m_linearVelocity.y+=s.m_invMass*i,s.m_angularVelocity+=s.m_invI*(l*i-c*e)):this.m_impulse=0},r.prototype.SolveVelocityConstraints=function(){var t,e=this.m_bodyA,i=this.m_bodyB;t=e.m_xf.R;var n=this.m_localAnchor1.x-e.m_sweep.localCenter.x,o=this.m_localAnchor1.y-e.m_sweep.localCenter.y,s=t.col1.x*n+t.col2.x*o;o=t.col1.y*n+t.col2.y*o,n=s,t=i.m_xf.R;var r=this.m_localAnchor2.x-i.m_sweep.localCenter.x,a=this.m_localAnchor2.y-i.m_sweep.localCenter.y;s=t.col1.x*r+t.col2.x*a,a=t.col1.y*r+t.col2.y*a,r=s,s=-this.m_mass*(this.m_u.x*(i.m_linearVelocity.x+-i.m_angularVelocity*a-(e.m_linearVelocity.x+-e.m_angularVelocity*o))+this.m_u.y*(i.m_linearVelocity.y+i.m_angularVelocity*r-(e.m_linearVelocity.y+e.m_angularVelocity*n))+this.m_bias+this.m_gamma*this.m_impulse),this.m_impulse+=s,t=s*this.m_u.x,s*=this.m_u.y,e.m_linearVelocity.x-=e.m_invMass*t,e.m_linearVelocity.y-=e.m_invMass*s,e.m_angularVelocity-=e.m_invI*(n*s-o*t),i.m_linearVelocity.x+=i.m_invMass*t,i.m_linearVelocity.y+=i.m_invMass*s,i.m_angularVelocity+=i.m_invI*(r*s-a*t)},r.prototype.SolvePositionConstraints=function(){var e;if(this.m_frequencyHz>0)return!0;var i=this.m_bodyA,o=this.m_bodyB;e=i.m_xf.R;var s=this.m_localAnchor1.x-i.m_sweep.localCenter.x,r=this.m_localAnchor1.y-i.m_sweep.localCenter.y,a=e.col1.x*s+e.col2.x*r;r=e.col1.y*s+e.col2.y*r,s=a,e=o.m_xf.R;var l=this.m_localAnchor2.x-o.m_sweep.localCenter.x,c=this.m_localAnchor2.y-o.m_sweep.localCenter.y;a=e.col1.x*l+e.col2.x*c,c=e.col1.y*l+e.col2.y*c,l=a,a=o.m_sweep.c.x+l-i.m_sweep.c.x-s;var h=o.m_sweep.c.y+c-i.m_sweep.c.y-r;e=Math.sqrt(a*a+h*h),a/=e,h/=e,e-=this.m_length,e=n.Clamp(e,-t.b2_maxLinearCorrection,t.b2_maxLinearCorrection);var u=-this.m_mass*e;return this.m_u.Set(a,h),a=u*this.m_u.x,h=u*this.m_u.y,i.m_sweep.c.x-=i.m_invMass*a,i.m_sweep.c.y-=i.m_invMass*h,i.m_sweep.a-=i.m_invI*(s*h-r*a),o.m_sweep.c.x+=o.m_invMass*a,o.m_sweep.c.y+=o.m_invMass*h,o.m_sweep.a+=o.m_invI*(l*h-c*a),i.SynchronizeTransform(),o.SynchronizeTransform(),n.Abs(e)<t.b2_linearSlop},Box2D.inherit(a,Box2D.Dynamics.Joints.b2JointDef),a.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,a.b2DistanceJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o},a.prototype.b2DistanceJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_distanceJoint,this.length=1,this.dampingRatio=this.frequencyHz=0},a.prototype.Initialize=function(t,e,i,n){this.bodyA=t,this.bodyB=e,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(i)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(n)),t=n.x-i.x,i=n.y-i.y,this.length=Math.sqrt(t*t+i*i),this.dampingRatio=this.frequencyHz=0},Box2D.inherit(l,Box2D.Dynamics.Joints.b2Joint),l.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,l.b2FrictionJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchorA=new o,this.m_localAnchorB=new o,this.m_linearMass=new e,this.m_linearImpulse=new o},l.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},l.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},l.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_linearImpulse.x,t*this.m_linearImpulse.y)},l.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_angularImpulse},l.prototype.SetMaxForce=function(t){void 0===t&&(t=0),this.m_maxForce=t},l.prototype.GetMaxForce=function(){return this.m_maxForce},l.prototype.SetMaxTorque=function(t){void 0===t&&(t=0),this.m_maxTorque=t},l.prototype.GetMaxTorque=function(){return this.m_maxTorque},l.prototype.b2FrictionJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchorA.SetV(t.localAnchorA),this.m_localAnchorB.SetV(t.localAnchorB),this.m_linearMass.SetZero(),this.m_angularMass=0,this.m_linearImpulse.SetZero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque},l.prototype.InitVelocityConstraints=function(t){var i,n=0,o=this.m_bodyA,s=this.m_bodyB;i=o.m_xf.R;var r=this.m_localAnchorA.x-o.m_sweep.localCenter.x,a=this.m_localAnchorA.y-o.m_sweep.localCenter.y;n=i.col1.x*r+i.col2.x*a,a=i.col1.y*r+i.col2.y*a,r=n,i=s.m_xf.R;var l=this.m_localAnchorB.x-s.m_sweep.localCenter.x,c=this.m_localAnchorB.y-s.m_sweep.localCenter.y;n=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=n,i=o.m_invMass,n=s.m_invMass;var h=o.m_invI,u=s.m_invI,m=new e;m.col1.x=i+n,m.col2.x=0,m.col1.y=0,m.col2.y=i+n,m.col1.x+=h*a*a,m.col2.x+=-h*r*a,m.col1.y+=-h*r*a,m.col2.y+=h*r*r,m.col1.x+=u*c*c,m.col2.x+=-u*l*c,m.col1.y+=-u*l*c,m.col2.y+=u*l*l,m.GetInverse(this.m_linearMass),this.m_angularMass=h+u,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.warmStarting?(this.m_linearImpulse.x*=t.dtRatio,this.m_linearImpulse.y*=t.dtRatio,this.m_angularImpulse*=t.dtRatio,t=this.m_linearImpulse,o.m_linearVelocity.x-=i*t.x,o.m_linearVelocity.y-=i*t.y,o.m_angularVelocity-=h*(r*t.y-a*t.x+this.m_angularImpulse),s.m_linearVelocity.x+=n*t.x,s.m_linearVelocity.y+=n*t.y,s.m_angularVelocity+=u*(l*t.y-c*t.x+this.m_angularImpulse)):(this.m_linearImpulse.SetZero(),this.m_angularImpulse=0)},l.prototype.SolveVelocityConstraints=function(t){var e,i=0,s=this.m_bodyA,r=this.m_bodyB,a=s.m_linearVelocity,l=s.m_angularVelocity,c=r.m_linearVelocity,h=r.m_angularVelocity,u=s.m_invMass,m=r.m_invMass,p=s.m_invI,_=r.m_invI;e=s.m_xf.R;var d=this.m_localAnchorA.x-s.m_sweep.localCenter.x,f=this.m_localAnchorA.y-s.m_sweep.localCenter.y;i=e.col1.x*d+e.col2.x*f,f=e.col1.y*d+e.col2.y*f,d=i,e=r.m_xf.R;var y=this.m_localAnchorB.x-r.m_sweep.localCenter.x,x=this.m_localAnchorB.y-r.m_sweep.localCenter.y;i=e.col1.x*y+e.col2.x*x,x=e.col1.y*y+e.col2.y*x,y=i,e=0,i=-this.m_angularMass*(h-l);var g=this.m_angularImpulse;e=t.dt*this.m_maxTorque,this.m_angularImpulse=n.Clamp(this.m_angularImpulse+i,-e,e),i=this.m_angularImpulse-g,l-=p*i,h+=_*i,e=n.MulMV(this.m_linearMass,new o(-(c.x-h*x-a.x+l*f),-(c.y+h*y-a.y-l*d))),i=this.m_linearImpulse.Copy(),this.m_linearImpulse.Add(e),e=t.dt*this.m_maxForce,this.m_linearImpulse.LengthSquared()>e*e&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.Multiply(e)),e=n.SubtractVV(this.m_linearImpulse,i),a.x-=u*e.x,a.y-=u*e.y,l-=p*(d*e.y-f*e.x),c.x+=m*e.x,c.y+=m*e.y,h+=_*(y*e.y-x*e.x),s.m_angularVelocity=l,r.m_angularVelocity=h},l.prototype.SolvePositionConstraints=function(){return!0},Box2D.inherit(c,Box2D.Dynamics.Joints.b2JointDef),c.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,c.b2FrictionJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o},c.prototype.b2FrictionJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_frictionJoint,this.maxTorque=this.maxForce=0},c.prototype.Initialize=function(t,e,i){this.bodyA=t,this.bodyB=e,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(i)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(i))},Box2D.inherit(h,Box2D.Dynamics.Joints.b2Joint),h.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,h.b2GearJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_groundAnchor1=new o,this.m_groundAnchor2=new o,this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_J=new m},h.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},h.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},h.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse*this.m_J.linearB.x,t*this.m_impulse*this.m_J.linearB.y)},h.prototype.GetReactionTorque=function(t){void 0===t&&(t=0);var e=this.m_bodyB.m_xf.R,i=this.m_localAnchor1.x-this.m_bodyB.m_sweep.localCenter.x,n=this.m_localAnchor1.y-this.m_bodyB.m_sweep.localCenter.y,o=e.col1.x*i+e.col2.x*n;return n=e.col1.y*i+e.col2.y*n,i=o,t*(this.m_impulse*this.m_J.angularB-i*this.m_impulse*this.m_J.linearB.y+n*this.m_impulse*this.m_J.linearB.x)},h.prototype.GetRatio=function(){return this.m_ratio},h.prototype.SetRatio=function(t){void 0===t&&(t=0),this.m_ratio=t},h.prototype.b2GearJoint=function(t){this.__super.b2Joint.call(this,t);var e=parseInt(t.joint1.m_type),i=parseInt(t.joint2.m_type);this.m_prismatic2=this.m_revolute2=this.m_prismatic1=this.m_revolute1=null;var n=0,o=0;this.m_ground1=t.joint1.GetBodyA(),this.m_bodyA=t.joint1.GetBodyB(),e==p.e_revoluteJoint?(this.m_revolute1=t.joint1 instanceof D?t.joint1:null,this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1),this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2),n=this.m_revolute1.GetJointAngle()):(this.m_prismatic1=t.joint1 instanceof v?t.joint1:null,this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1),this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2),n=this.m_prismatic1.GetJointTranslation()),this.m_ground2=t.joint2.GetBodyA(),this.m_bodyB=t.joint2.GetBodyB(),i==p.e_revoluteJoint?(this.m_revolute2=t.joint2 instanceof D?t.joint2:null,this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2),o=this.m_revolute2.GetJointAngle()):(this.m_prismatic2=t.joint2 instanceof v?t.joint2:null,this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1),this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2),o=this.m_prismatic2.GetJointTranslation()),this.m_ratio=t.ratio,this.m_constant=n+this.m_ratio*o,this.m_impulse=0},h.prototype.InitVelocityConstraints=function(t){var e=this.m_ground1,i=this.m_ground2,n=this.m_bodyA,o=this.m_bodyB,s=0,r=0,a=0,l=0,c=a=0,h=0;this.m_J.SetZero(),this.m_revolute1?(this.m_J.angularA=-1,h+=n.m_invI):(e=e.m_xf.R,r=this.m_prismatic1.m_localXAxis1,s=e.col1.x*r.x+e.col2.x*r.y,r=e.col1.y*r.x+e.col2.y*r.y,e=n.m_xf.R,a=this.m_localAnchor1.x-n.m_sweep.localCenter.x,l=this.m_localAnchor1.y-n.m_sweep.localCenter.y,c=e.col1.x*a+e.col2.x*l,l=e.col1.y*a+e.col2.y*l,a=c,a=a*r-l*s,this.m_J.linearA.Set(-s,-r),this.m_J.angularA=-a,h+=n.m_invMass+n.m_invI*a*a),this.m_revolute2?(this.m_J.angularB=-this.m_ratio,h+=this.m_ratio*this.m_ratio*o.m_invI):(e=i.m_xf.R,r=this.m_prismatic2.m_localXAxis1,s=e.col1.x*r.x+e.col2.x*r.y,r=e.col1.y*r.x+e.col2.y*r.y,e=o.m_xf.R,a=this.m_localAnchor2.x-o.m_sweep.localCenter.x,l=this.m_localAnchor2.y-o.m_sweep.localCenter.y,c=e.col1.x*a+e.col2.x*l,l=e.col1.y*a+e.col2.y*l,a=c,a=a*r-l*s,this.m_J.linearB.Set(-this.m_ratio*s,-this.m_ratio*r),
this.m_J.angularB=-this.m_ratio*a,h+=this.m_ratio*this.m_ratio*(o.m_invMass+o.m_invI*a*a)),this.m_mass=h>0?1/h:0,t.warmStarting?(n.m_linearVelocity.x+=n.m_invMass*this.m_impulse*this.m_J.linearA.x,n.m_linearVelocity.y+=n.m_invMass*this.m_impulse*this.m_J.linearA.y,n.m_angularVelocity+=n.m_invI*this.m_impulse*this.m_J.angularA,o.m_linearVelocity.x+=o.m_invMass*this.m_impulse*this.m_J.linearB.x,o.m_linearVelocity.y+=o.m_invMass*this.m_impulse*this.m_J.linearB.y,o.m_angularVelocity+=o.m_invI*this.m_impulse*this.m_J.angularB):this.m_impulse=0},h.prototype.SolveVelocityConstraints=function(){var t=this.m_bodyA,e=this.m_bodyB,i=-this.m_mass*this.m_J.Compute(t.m_linearVelocity,t.m_angularVelocity,e.m_linearVelocity,e.m_angularVelocity);this.m_impulse+=i,t.m_linearVelocity.x+=t.m_invMass*i*this.m_J.linearA.x,t.m_linearVelocity.y+=t.m_invMass*i*this.m_J.linearA.y,t.m_angularVelocity+=t.m_invI*i*this.m_J.angularA,e.m_linearVelocity.x+=e.m_invMass*i*this.m_J.linearB.x,e.m_linearVelocity.y+=e.m_invMass*i*this.m_J.linearB.y,e.m_angularVelocity+=e.m_invI*i*this.m_J.angularB},h.prototype.SolvePositionConstraints=function(){var e=this.m_bodyA,i=this.m_bodyB,n=0,o=0;return n=this.m_revolute1?this.m_revolute1.GetJointAngle():this.m_prismatic1.GetJointTranslation(),o=this.m_revolute2?this.m_revolute2.GetJointAngle():this.m_prismatic2.GetJointTranslation(),n=-this.m_mass*(this.m_constant-(n+this.m_ratio*o)),e.m_sweep.c.x+=e.m_invMass*n*this.m_J.linearA.x,e.m_sweep.c.y+=e.m_invMass*n*this.m_J.linearA.y,e.m_sweep.a+=e.m_invI*n*this.m_J.angularA,i.m_sweep.c.x+=i.m_invMass*n*this.m_J.linearB.x,i.m_sweep.c.y+=i.m_invMass*n*this.m_J.linearB.y,i.m_sweep.a+=i.m_invI*n*this.m_J.angularB,e.SynchronizeTransform(),i.SynchronizeTransform(),0<t.b2_linearSlop},Box2D.inherit(u,Box2D.Dynamics.Joints.b2JointDef),u.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,u.b2GearJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments)},u.prototype.b2GearJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_gearJoint,this.joint2=this.joint1=null,this.ratio=1},m.b2Jacobian=function(){this.linearA=new o,this.linearB=new o},m.prototype.SetZero=function(){this.linearA.SetZero(),this.angularA=0,this.linearB.SetZero(),this.angularB=0},m.prototype.Set=function(t,e,i,n){void 0===e&&(e=0),void 0===n&&(n=0),this.linearA.SetV(t),this.angularA=e,this.linearB.SetV(i),this.angularB=n},m.prototype.Compute=function(t,e,i,n){return void 0===e&&(e=0),void 0===n&&(n=0),this.linearA.x*t.x+this.linearA.y*t.y+this.angularA*e+(this.linearB.x*i.x+this.linearB.y*i.y)+this.angularB*n},p.b2Joint=function(){this.m_edgeA=new d,this.m_edgeB=new d,this.m_localCenterA=new o,this.m_localCenterB=new o},p.prototype.GetType=function(){return this.m_type},p.prototype.GetAnchorA=function(){return null},p.prototype.GetAnchorB=function(){return null},p.prototype.GetReactionForce=function(){return null},p.prototype.GetReactionTorque=function(){return 0},p.prototype.GetBodyA=function(){return this.m_bodyA},p.prototype.GetBodyB=function(){return this.m_bodyB},p.prototype.GetNext=function(){return this.m_next},p.prototype.GetUserData=function(){return this.m_userData},p.prototype.SetUserData=function(t){this.m_userData=t},p.prototype.IsActive=function(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()},p.Create=function(t){var e=null;switch(t.type){case p.e_distanceJoint:e=new r(t instanceof a?t:null);break;case p.e_mouseJoint:e=new x(t instanceof g?t:null);break;case p.e_prismaticJoint:e=new v(t instanceof b?t:null);break;case p.e_revoluteJoint:e=new D(t instanceof S?t:null);break;case p.e_pulleyJoint:e=new w(t instanceof C?t:null);break;case p.e_gearJoint:e=new h(t instanceof u?t:null);break;case p.e_lineJoint:e=new f(t instanceof y?t:null);break;case p.e_weldJoint:e=new B(t instanceof A?t:null);break;case p.e_frictionJoint:e=new l(t instanceof c?t:null)}return e},p.Destroy=function(){},p.prototype.b2Joint=function(e){t.b2Assert(e.bodyA!=e.bodyB),this.m_type=e.type,this.m_next=this.m_prev=null,this.m_bodyA=e.bodyA,this.m_bodyB=e.bodyB,this.m_collideConnected=e.collideConnected,this.m_islandFlag=!1,this.m_userData=e.userData},p.prototype.InitVelocityConstraints=function(){},p.prototype.SolveVelocityConstraints=function(){},p.prototype.FinalizeVelocityConstraints=function(){},p.prototype.SolvePositionConstraints=function(){return!1},Box2D.postDefs.push(function(){Box2D.Dynamics.Joints.b2Joint.e_unknownJoint=0,Box2D.Dynamics.Joints.b2Joint.e_revoluteJoint=1,Box2D.Dynamics.Joints.b2Joint.e_prismaticJoint=2,Box2D.Dynamics.Joints.b2Joint.e_distanceJoint=3,Box2D.Dynamics.Joints.b2Joint.e_pulleyJoint=4,Box2D.Dynamics.Joints.b2Joint.e_mouseJoint=5,Box2D.Dynamics.Joints.b2Joint.e_gearJoint=6,Box2D.Dynamics.Joints.b2Joint.e_lineJoint=7,Box2D.Dynamics.Joints.b2Joint.e_weldJoint=8,Box2D.Dynamics.Joints.b2Joint.e_frictionJoint=9,Box2D.Dynamics.Joints.b2Joint.e_inactiveLimit=0,Box2D.Dynamics.Joints.b2Joint.e_atLowerLimit=1,Box2D.Dynamics.Joints.b2Joint.e_atUpperLimit=2,Box2D.Dynamics.Joints.b2Joint.e_equalLimits=3}),_.b2JointDef=function(){},_.prototype.b2JointDef=function(){this.type=p.e_unknownJoint,this.bodyB=this.bodyA=this.userData=null,this.collideConnected=!1},d.b2JointEdge=function(){},Box2D.inherit(f,Box2D.Dynamics.Joints.b2Joint),f.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,f.b2LineJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_localXAxis1=new o,this.m_localYAxis1=new o,this.m_axis=new o,this.m_perp=new o,this.m_K=new e,this.m_impulse=new o},f.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},f.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},f.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y))},f.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.y},f.prototype.GetJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,i=t.GetWorldPoint(this.m_localAnchor1),n=e.GetWorldPoint(this.m_localAnchor2);return e=n.x-i.x,i=n.y-i.y,t=t.GetWorldVector(this.m_localXAxis1),t.x*e+t.y*i},f.prototype.GetJointSpeed=function(){var t,e=this.m_bodyA,i=this.m_bodyB;t=e.m_xf.R;var n=this.m_localAnchor1.x-e.m_sweep.localCenter.x,o=this.m_localAnchor1.y-e.m_sweep.localCenter.y,s=t.col1.x*n+t.col2.x*o;o=t.col1.y*n+t.col2.y*o,n=s,t=i.m_xf.R;var r=this.m_localAnchor2.x-i.m_sweep.localCenter.x,a=this.m_localAnchor2.y-i.m_sweep.localCenter.y;s=t.col1.x*r+t.col2.x*a,a=t.col1.y*r+t.col2.y*a,r=s,t=i.m_sweep.c.x+r-(e.m_sweep.c.x+n),s=i.m_sweep.c.y+a-(e.m_sweep.c.y+o);var l=e.GetWorldVector(this.m_localXAxis1),c=e.m_linearVelocity,h=i.m_linearVelocity;return e=e.m_angularVelocity,i=i.m_angularVelocity,t*-e*l.y+s*e*l.x+(l.x*(h.x+-i*a-c.x- -e*o)+l.y*(h.y+i*r-c.y-e*n))},f.prototype.IsLimitEnabled=function(){return this.m_enableLimit},f.prototype.EnableLimit=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t},f.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},f.prototype.GetUpperLimit=function(){return this.m_upperTranslation},f.prototype.SetLimits=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e},f.prototype.IsMotorEnabled=function(){return this.m_enableMotor},f.prototype.EnableMotor=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t},f.prototype.SetMotorSpeed=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},f.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},f.prototype.SetMaxMotorForce=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=t},f.prototype.GetMaxMotorForce=function(){return this.m_maxMotorForce},f.prototype.GetMotorForce=function(){return this.m_motorImpulse},f.prototype.b2LineJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_localXAxis1.SetV(t.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_impulse.SetZero(),this.m_motorImpulse=this.m_motorMass=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=p.e_inactiveLimit,this.m_axis.SetZero(),this.m_perp.SetZero()},f.prototype.InitVelocityConstraints=function(e){var i,o=this.m_bodyA,s=this.m_bodyB,r=0;this.m_localCenterA.SetV(o.GetLocalCenter()),this.m_localCenterB.SetV(s.GetLocalCenter());var a=o.GetTransform();s.GetTransform(),i=o.m_xf.R;var l=this.m_localAnchor1.x-this.m_localCenterA.x,c=this.m_localAnchor1.y-this.m_localCenterA.y;r=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=r,i=s.m_xf.R;var h=this.m_localAnchor2.x-this.m_localCenterB.x,u=this.m_localAnchor2.y-this.m_localCenterB.y;r=i.col1.x*h+i.col2.x*u,u=i.col1.y*h+i.col2.y*u,h=r,i=s.m_sweep.c.x+h-o.m_sweep.c.x-l,r=s.m_sweep.c.y+u-o.m_sweep.c.y-c,this.m_invMassA=o.m_invMass,this.m_invMassB=s.m_invMass,this.m_invIA=o.m_invI,this.m_invIB=s.m_invI,this.m_axis.SetV(n.MulMV(a.R,this.m_localXAxis1)),this.m_a1=(i+l)*this.m_axis.y-(r+c)*this.m_axis.x,this.m_a2=h*this.m_axis.y-u*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass=this.m_motorMass>Number.MIN_VALUE?1/this.m_motorMass:0,this.m_perp.SetV(n.MulMV(a.R,this.m_localYAxis1)),this.m_s1=(i+l)*this.m_perp.y-(r+c)*this.m_perp.x,this.m_s2=h*this.m_perp.y-u*this.m_perp.x,a=this.m_invMassA,l=this.m_invMassB,c=this.m_invIA,h=this.m_invIB,this.m_K.col1.x=a+l+c*this.m_s1*this.m_s1+h*this.m_s2*this.m_s2,this.m_K.col1.y=c*this.m_s1*this.m_a1+h*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=a+l+c*this.m_a1*this.m_a1+h*this.m_a2*this.m_a2,this.m_enableLimit?(i=this.m_axis.x*i+this.m_axis.y*r,n.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?this.m_limitState=p.e_equalLimits:i<=this.m_lowerTranslation?this.m_limitState!=p.e_atLowerLimit&&(this.m_limitState=p.e_atLowerLimit,this.m_impulse.y=0):i>=this.m_upperTranslation?this.m_limitState!=p.e_atUpperLimit&&(this.m_limitState=p.e_atUpperLimit,this.m_impulse.y=0):(this.m_limitState=p.e_inactiveLimit,this.m_impulse.y=0)):this.m_limitState=p.e_inactiveLimit,0==this.m_enableMotor&&(this.m_motorImpulse=0),e.warmStarting?(this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio,e=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x,i=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y,r=this.m_impulse.x*this.m_s1+(this.m_motorImpulse+this.m_impulse.y)*this.m_a1,a=this.m_impulse.x*this.m_s2+(this.m_motorImpulse+this.m_impulse.y)*this.m_a2,o.m_linearVelocity.x-=this.m_invMassA*e,o.m_linearVelocity.y-=this.m_invMassA*i,o.m_angularVelocity-=this.m_invIA*r,s.m_linearVelocity.x+=this.m_invMassB*e,s.m_linearVelocity.y+=this.m_invMassB*i,s.m_angularVelocity+=this.m_invIB*a):(this.m_impulse.SetZero(),this.m_motorImpulse=0)},f.prototype.SolveVelocityConstraints=function(t){var e=this.m_bodyA,i=this.m_bodyB,s=e.m_linearVelocity,r=e.m_angularVelocity,a=i.m_linearVelocity,l=i.m_angularVelocity,c=0,h=0,u=0,m=0;this.m_enableMotor&&this.m_limitState!=p.e_equalLimits&&(m=this.m_motorMass*(this.m_motorSpeed-(this.m_axis.x*(a.x-s.x)+this.m_axis.y*(a.y-s.y)+this.m_a2*l-this.m_a1*r)),c=this.m_motorImpulse,h=t.dt*this.m_maxMotorForce,this.m_motorImpulse=n.Clamp(this.m_motorImpulse+m,-h,h),m=this.m_motorImpulse-c,c=m*this.m_axis.x,h=m*this.m_axis.y,u=m*this.m_a1,m*=this.m_a2,s.x-=this.m_invMassA*c,s.y-=this.m_invMassA*h,r-=this.m_invIA*u,a.x+=this.m_invMassB*c,a.y+=this.m_invMassB*h,l+=this.m_invIB*m),h=this.m_perp.x*(a.x-s.x)+this.m_perp.y*(a.y-s.y)+this.m_s2*l-this.m_s1*r,this.m_enableLimit&&this.m_limitState!=p.e_inactiveLimit?(u=this.m_axis.x*(a.x-s.x)+this.m_axis.y*(a.y-s.y)+this.m_a2*l-this.m_a1*r,c=this.m_impulse.Copy(),t=this.m_K.Solve(new o,-h,-u),this.m_impulse.Add(t),this.m_limitState==p.e_atLowerLimit?this.m_impulse.y=n.Max(this.m_impulse.y,0):this.m_limitState==p.e_atUpperLimit&&(this.m_impulse.y=n.Min(this.m_impulse.y,0)),h=-h-(this.m_impulse.y-c.y)*this.m_K.col2.x,u=0,u=0!=this.m_K.col1.x?h/this.m_K.col1.x+c.x:c.x,this.m_impulse.x=u,t.x=this.m_impulse.x-c.x,t.y=this.m_impulse.y-c.y,c=t.x*this.m_perp.x+t.y*this.m_axis.x,h=t.x*this.m_perp.y+t.y*this.m_axis.y,u=t.x*this.m_s1+t.y*this.m_a1,m=t.x*this.m_s2+t.y*this.m_a2):(t=0,t=0!=this.m_K.col1.x?-h/this.m_K.col1.x:0,this.m_impulse.x+=t,c=t*this.m_perp.x,h=t*this.m_perp.y,u=t*this.m_s1,m=t*this.m_s2),s.x-=this.m_invMassA*c,s.y-=this.m_invMassA*h,r-=this.m_invIA*u,a.x+=this.m_invMassB*c,a.y+=this.m_invMassB*h,l+=this.m_invIB*m,e.m_linearVelocity.SetV(s),e.m_angularVelocity=r,i.m_linearVelocity.SetV(a),i.m_angularVelocity=l},f.prototype.SolvePositionConstraints=function(){var i,s=this.m_bodyA,r=this.m_bodyB,a=s.m_sweep.c,l=s.m_sweep.a,c=r.m_sweep.c,h=r.m_sweep.a,u=0,m=0,p=0,_=0,d=i=0,f=0;m=!1;var y=0,x=e.FromAngle(l);p=e.FromAngle(h),i=x,f=this.m_localAnchor1.x-this.m_localCenterA.x;var g=this.m_localAnchor1.y-this.m_localCenterA.y;if(u=i.col1.x*f+i.col2.x*g,g=i.col1.y*f+i.col2.y*g,f=u,i=p,p=this.m_localAnchor2.x-this.m_localCenterB.x,_=this.m_localAnchor2.y-this.m_localCenterB.y,u=i.col1.x*p+i.col2.x*_,_=i.col1.y*p+i.col2.y*_,p=u,i=c.x+p-a.x-f,u=c.y+_-a.y-g,this.m_enableLimit){this.m_axis=n.MulMV(x,this.m_localXAxis1),this.m_a1=(i+f)*this.m_axis.y-(u+g)*this.m_axis.x,this.m_a2=p*this.m_axis.y-_*this.m_axis.x;var v=this.m_axis.x*i+this.m_axis.y*u;n.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?(y=n.Clamp(v,-t.b2_maxLinearCorrection,t.b2_maxLinearCorrection),d=n.Abs(v),m=!0):v<=this.m_lowerTranslation?(y=n.Clamp(v-this.m_lowerTranslation+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),d=this.m_lowerTranslation-v,m=!0):v>=this.m_upperTranslation&&(y=n.Clamp(v-this.m_upperTranslation+t.b2_linearSlop,0,t.b2_maxLinearCorrection),d=v-this.m_upperTranslation,m=!0)}return this.m_perp=n.MulMV(x,this.m_localYAxis1),this.m_s1=(i+f)*this.m_perp.y-(u+g)*this.m_perp.x,this.m_s2=p*this.m_perp.y-_*this.m_perp.x,x=new o,g=this.m_perp.x*i+this.m_perp.y*u,d=n.Max(d,n.Abs(g)),f=0,m?(m=this.m_invMassA,p=this.m_invMassB,_=this.m_invIA,i=this.m_invIB,this.m_K.col1.x=m+p+_*this.m_s1*this.m_s1+i*this.m_s2*this.m_s2,this.m_K.col1.y=_*this.m_s1*this.m_a1+i*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=m+p+_*this.m_a1*this.m_a1+i*this.m_a2*this.m_a2,this.m_K.Solve(x,-g,-y)):(m=this.m_invMassA,p=this.m_invMassB,_=this.m_invIA,i=this.m_invIB,y=m+p+_*this.m_s1*this.m_s1+i*this.m_s2*this.m_s2,m=0,m=0!=y?-g/y:0,x.x=m,x.y=0),y=x.x*this.m_perp.x+x.y*this.m_axis.x,m=x.x*this.m_perp.y+x.y*this.m_axis.y,g=x.x*this.m_s1+x.y*this.m_a1,x=x.x*this.m_s2+x.y*this.m_a2,a.x-=this.m_invMassA*y,a.y-=this.m_invMassA*m,l-=this.m_invIA*g,c.x+=this.m_invMassB*y,c.y+=this.m_invMassB*m,h+=this.m_invIB*x,s.m_sweep.a=l,r.m_sweep.a=h,s.SynchronizeTransform(),r.SynchronizeTransform(),d<=t.b2_linearSlop&&f<=t.b2_angularSlop},Box2D.inherit(y,Box2D.Dynamics.Joints.b2JointDef),y.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,y.b2LineJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o,this.localAxisA=new o},y.prototype.b2LineJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_lineJoint,this.localAxisA.Set(1,0),this.enableLimit=!1,this.upperTranslation=this.lowerTranslation=0,this.enableMotor=!1,this.motorSpeed=this.maxMotorForce=0},y.prototype.Initialize=function(t,e,i,n){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.GetLocalPoint(i),this.localAnchorB=this.bodyB.GetLocalPoint(i),this.localAxisA=this.bodyA.GetLocalVector(n)},Box2D.inherit(x,Box2D.Dynamics.Joints.b2Joint),x.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,x.b2MouseJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.K=new e,this.K1=new e,this.K2=new e,this.m_localAnchor=new o,this.m_target=new o,this.m_impulse=new o,this.m_mass=new e,this.m_C=new o},x.prototype.GetAnchorA=function(){return this.m_target},x.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor)},x.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse.x,t*this.m_impulse.y)},x.prototype.GetReactionTorque=function(){return 0},x.prototype.GetTarget=function(){return this.m_target},x.prototype.SetTarget=function(t){0==this.m_bodyB.IsAwake()&&this.m_bodyB.SetAwake(!0),this.m_target=t},x.prototype.GetMaxForce=function(){return this.m_maxForce},x.prototype.SetMaxForce=function(t){void 0===t&&(t=0),this.m_maxForce=t},x.prototype.GetFrequency=function(){return this.m_frequencyHz},x.prototype.SetFrequency=function(t){void 0===t&&(t=0),this.m_frequencyHz=t},x.prototype.GetDampingRatio=function(){return this.m_dampingRatio},x.prototype.SetDampingRatio=function(t){void 0===t&&(t=0),this.m_dampingRatio=t},x.prototype.b2MouseJoint=function(t){this.__super.b2Joint.call(this,t),this.m_target.SetV(t.target);var e=this.m_target.x-this.m_bodyB.m_xf.position.x,i=this.m_target.y-this.m_bodyB.m_xf.position.y,n=this.m_bodyB.m_xf.R;this.m_localAnchor.x=e*n.col1.x+i*n.col1.y,this.m_localAnchor.y=e*n.col2.x+i*n.col2.y,this.m_maxForce=t.maxForce,this.m_impulse.SetZero(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_gamma=this.m_beta=0},x.prototype.InitVelocityConstraints=function(t){var e=this.m_bodyB,i=e.GetMass(),n=2*Math.PI*this.m_frequencyHz,o=i*n*n;this.m_gamma=t.dt*(2*i*this.m_dampingRatio*n+t.dt*o),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_beta=t.dt*o*this.m_gamma,o=e.m_xf.R,i=this.m_localAnchor.x-e.m_sweep.localCenter.x,n=this.m_localAnchor.y-e.m_sweep.localCenter.y;var s=o.col1.x*i+o.col2.x*n;n=o.col1.y*i+o.col2.y*n,i=s,o=e.m_invMass,s=e.m_invI,this.K1.col1.x=o,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=o,this.K2.col1.x=s*n*n,this.K2.col2.x=-s*i*n,this.K2.col1.y=-s*i*n,this.K2.col2.y=s*i*i,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.col1.x+=this.m_gamma,this.K.col2.y+=this.m_gamma,this.K.GetInverse(this.m_mass),this.m_C.x=e.m_sweep.c.x+i-this.m_target.x,this.m_C.y=e.m_sweep.c.y+n-this.m_target.y,e.m_angularVelocity*=.98,this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,e.m_linearVelocity.x+=o*this.m_impulse.x,e.m_linearVelocity.y+=o*this.m_impulse.y,e.m_angularVelocity+=s*(i*this.m_impulse.y-n*this.m_impulse.x)},x.prototype.SolveVelocityConstraints=function(t){var e,i=this.m_bodyB,n=0,o=0;e=i.m_xf.R;var s=this.m_localAnchor.x-i.m_sweep.localCenter.x,r=this.m_localAnchor.y-i.m_sweep.localCenter.y;n=e.col1.x*s+e.col2.x*r,r=e.col1.y*s+e.col2.y*r,s=n,n=i.m_linearVelocity.x+-i.m_angularVelocity*r;var a=i.m_linearVelocity.y+i.m_angularVelocity*s;e=this.m_mass,n=n+this.m_beta*this.m_C.x+this.m_gamma*this.m_impulse.x,o=a+this.m_beta*this.m_C.y+this.m_gamma*this.m_impulse.y,a=-(e.col1.x*n+e.col2.x*o),o=-(e.col1.y*n+e.col2.y*o),e=this.m_impulse.x,n=this.m_impulse.y,this.m_impulse.x+=a,this.m_impulse.y+=o,t=t.dt*this.m_maxForce,this.m_impulse.LengthSquared()>t*t&&this.m_impulse.Multiply(t/this.m_impulse.Length()),a=this.m_impulse.x-e,o=this.m_impulse.y-n,i.m_linearVelocity.x+=i.m_invMass*a,i.m_linearVelocity.y+=i.m_invMass*o,i.m_angularVelocity+=i.m_invI*(s*o-r*a)},x.prototype.SolvePositionConstraints=function(){return!0},Box2D.inherit(g,Box2D.Dynamics.Joints.b2JointDef),g.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,g.b2MouseJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.target=new o},g.prototype.b2MouseJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_mouseJoint,this.maxForce=0,this.frequencyHz=5,this.dampingRatio=.7},Box2D.inherit(v,Box2D.Dynamics.Joints.b2Joint),v.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,v.b2PrismaticJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_localXAxis1=new o,this.m_localYAxis1=new o,this.m_axis=new o,this.m_perp=new o,this.m_K=new i,this.m_impulse=new s},v.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},v.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},v.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y))},v.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.y},v.prototype.GetJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,i=t.GetWorldPoint(this.m_localAnchor1),n=e.GetWorldPoint(this.m_localAnchor2);return e=n.x-i.x,i=n.y-i.y,t=t.GetWorldVector(this.m_localXAxis1),t.x*e+t.y*i},v.prototype.GetJointSpeed=function(){var t,e=this.m_bodyA,i=this.m_bodyB;t=e.m_xf.R;var n=this.m_localAnchor1.x-e.m_sweep.localCenter.x,o=this.m_localAnchor1.y-e.m_sweep.localCenter.y,s=t.col1.x*n+t.col2.x*o;o=t.col1.y*n+t.col2.y*o,n=s,t=i.m_xf.R;var r=this.m_localAnchor2.x-i.m_sweep.localCenter.x,a=this.m_localAnchor2.y-i.m_sweep.localCenter.y;s=t.col1.x*r+t.col2.x*a,a=t.col1.y*r+t.col2.y*a,r=s,t=i.m_sweep.c.x+r-(e.m_sweep.c.x+n),s=i.m_sweep.c.y+a-(e.m_sweep.c.y+o);var l=e.GetWorldVector(this.m_localXAxis1),c=e.m_linearVelocity,h=i.m_linearVelocity;return e=e.m_angularVelocity,i=i.m_angularVelocity,t*-e*l.y+s*e*l.x+(l.x*(h.x+-i*a-c.x- -e*o)+l.y*(h.y+i*r-c.y-e*n))},v.prototype.IsLimitEnabled=function(){return this.m_enableLimit},v.prototype.EnableLimit=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t},v.prototype.GetLowerLimit=function(){return this.m_lowerTranslation},v.prototype.GetUpperLimit=function(){return this.m_upperTranslation},v.prototype.SetLimits=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e},v.prototype.IsMotorEnabled=function(){return this.m_enableMotor},v.prototype.EnableMotor=function(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t},v.prototype.SetMotorSpeed=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},v.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},v.prototype.SetMaxMotorForce=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=t},v.prototype.GetMotorForce=function(){return this.m_motorImpulse},v.prototype.b2PrismaticJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_localXAxis1.SetV(t.localAxisA),this.m_localYAxis1.x=-this.m_localXAxis1.y,this.m_localYAxis1.y=this.m_localXAxis1.x,this.m_refAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_motorImpulse=this.m_motorMass=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=p.e_inactiveLimit,this.m_axis.SetZero(),this.m_perp.SetZero()},v.prototype.InitVelocityConstraints=function(e){var i,o=this.m_bodyA,s=this.m_bodyB,r=0;this.m_localCenterA.SetV(o.GetLocalCenter()),this.m_localCenterB.SetV(s.GetLocalCenter());var a=o.GetTransform();s.GetTransform(),i=o.m_xf.R;var l=this.m_localAnchor1.x-this.m_localCenterA.x,c=this.m_localAnchor1.y-this.m_localCenterA.y;r=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=r,i=s.m_xf.R;var h=this.m_localAnchor2.x-this.m_localCenterB.x,u=this.m_localAnchor2.y-this.m_localCenterB.y;r=i.col1.x*h+i.col2.x*u,u=i.col1.y*h+i.col2.y*u,h=r,i=s.m_sweep.c.x+h-o.m_sweep.c.x-l,r=s.m_sweep.c.y+u-o.m_sweep.c.y-c,this.m_invMassA=o.m_invMass,this.m_invMassB=s.m_invMass,this.m_invIA=o.m_invI,this.m_invIB=s.m_invI,this.m_axis.SetV(n.MulMV(a.R,this.m_localXAxis1)),this.m_a1=(i+l)*this.m_axis.y-(r+c)*this.m_axis.x,this.m_a2=h*this.m_axis.y-u*this.m_axis.x,this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2,this.m_motorMass>Number.MIN_VALUE&&(this.m_motorMass=1/this.m_motorMass),this.m_perp.SetV(n.MulMV(a.R,this.m_localYAxis1)),this.m_s1=(i+l)*this.m_perp.y-(r+c)*this.m_perp.x,this.m_s2=h*this.m_perp.y-u*this.m_perp.x,a=this.m_invMassA,l=this.m_invMassB,c=this.m_invIA,h=this.m_invIB,this.m_K.col1.x=a+l+c*this.m_s1*this.m_s1+h*this.m_s2*this.m_s2,this.m_K.col1.y=c*this.m_s1+h*this.m_s2,this.m_K.col1.z=c*this.m_s1*this.m_a1+h*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=c+h,this.m_K.col2.z=c*this.m_a1+h*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=a+l+c*this.m_a1*this.m_a1+h*this.m_a2*this.m_a2,this.m_enableLimit?(i=this.m_axis.x*i+this.m_axis.y*r,n.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?this.m_limitState=p.e_equalLimits:i<=this.m_lowerTranslation?this.m_limitState!=p.e_atLowerLimit&&(this.m_limitState=p.e_atLowerLimit,this.m_impulse.z=0):i>=this.m_upperTranslation?this.m_limitState!=p.e_atUpperLimit&&(this.m_limitState=p.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=p.e_inactiveLimit,this.m_impulse.z=0)):this.m_limitState=p.e_inactiveLimit,0==this.m_enableMotor&&(this.m_motorImpulse=0),e.warmStarting?(this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio,e=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x,i=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y,r=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,a=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2,o.m_linearVelocity.x-=this.m_invMassA*e,o.m_linearVelocity.y-=this.m_invMassA*i,o.m_angularVelocity-=this.m_invIA*r,s.m_linearVelocity.x+=this.m_invMassB*e,s.m_linearVelocity.y+=this.m_invMassB*i,s.m_angularVelocity+=this.m_invIB*a):(this.m_impulse.SetZero(),this.m_motorImpulse=0)},v.prototype.SolveVelocityConstraints=function(t){var e=this.m_bodyA,i=this.m_bodyB,r=e.m_linearVelocity,a=e.m_angularVelocity,l=i.m_linearVelocity,c=i.m_angularVelocity,h=0,u=0,m=0,_=0;this.m_enableMotor&&this.m_limitState!=p.e_equalLimits&&(_=this.m_motorMass*(this.m_motorSpeed-(this.m_axis.x*(l.x-r.x)+this.m_axis.y*(l.y-r.y)+this.m_a2*c-this.m_a1*a)),h=this.m_motorImpulse,t=t.dt*this.m_maxMotorForce,this.m_motorImpulse=n.Clamp(this.m_motorImpulse+_,-t,t),_=this.m_motorImpulse-h,h=_*this.m_axis.x,u=_*this.m_axis.y,m=_*this.m_a1,_*=this.m_a2,r.x-=this.m_invMassA*h,r.y-=this.m_invMassA*u,a-=this.m_invIA*m,l.x+=this.m_invMassB*h,l.y+=this.m_invMassB*u,c+=this.m_invIB*_),m=this.m_perp.x*(l.x-r.x)+this.m_perp.y*(l.y-r.y)+this.m_s2*c-this.m_s1*a,u=c-a,this.m_enableLimit&&this.m_limitState!=p.e_inactiveLimit?(t=this.m_axis.x*(l.x-r.x)+this.m_axis.y*(l.y-r.y)+this.m_a2*c-this.m_a1*a,h=this.m_impulse.Copy(),t=this.m_K.Solve33(new s,-m,-u,-t),this.m_impulse.Add(t),this.m_limitState==p.e_atLowerLimit?this.m_impulse.z=n.Max(this.m_impulse.z,0):this.m_limitState==p.e_atUpperLimit&&(this.m_impulse.z=n.Min(this.m_impulse.z,0)),m=-m-(this.m_impulse.z-h.z)*this.m_K.col3.x,u=-u-(this.m_impulse.z-h.z)*this.m_K.col3.y,u=this.m_K.Solve22(new o,m,u),u.x+=h.x,u.y+=h.y,this.m_impulse.x=u.x,this.m_impulse.y=u.y,t.x=this.m_impulse.x-h.x,t.y=this.m_impulse.y-h.y,t.z=this.m_impulse.z-h.z,h=t.x*this.m_perp.x+t.z*this.m_axis.x,u=t.x*this.m_perp.y+t.z*this.m_axis.y,m=t.x*this.m_s1+t.y+t.z*this.m_a1,_=t.x*this.m_s2+t.y+t.z*this.m_a2):(t=this.m_K.Solve22(new o,-m,-u),this.m_impulse.x+=t.x,this.m_impulse.y+=t.y,h=t.x*this.m_perp.x,u=t.x*this.m_perp.y,m=t.x*this.m_s1+t.y,_=t.x*this.m_s2+t.y),r.x-=this.m_invMassA*h,r.y-=this.m_invMassA*u,a-=this.m_invIA*m,l.x+=this.m_invMassB*h,l.y+=this.m_invMassB*u,c+=this.m_invIB*_,e.m_linearVelocity.SetV(r),e.m_angularVelocity=a,i.m_linearVelocity.SetV(l),i.m_angularVelocity=c},v.prototype.SolvePositionConstraints=function(){var i,r=this.m_bodyA,a=this.m_bodyB,l=r.m_sweep.c,c=r.m_sweep.a,h=a.m_sweep.c,u=a.m_sweep.a,m=0,p=0,_=0,d=m=i=0,f=0;p=!1;var y=0,x=e.FromAngle(c),g=e.FromAngle(u);i=x,f=this.m_localAnchor1.x-this.m_localCenterA.x;var v=this.m_localAnchor1.y-this.m_localCenterA.y;if(m=i.col1.x*f+i.col2.x*v,v=i.col1.y*f+i.col2.y*v,f=m,i=g,g=this.m_localAnchor2.x-this.m_localCenterB.x,_=this.m_localAnchor2.y-this.m_localCenterB.y,m=i.col1.x*g+i.col2.x*_,_=i.col1.y*g+i.col2.y*_,g=m,i=h.x+g-l.x-f,m=h.y+_-l.y-v,this.m_enableLimit){this.m_axis=n.MulMV(x,this.m_localXAxis1),this.m_a1=(i+f)*this.m_axis.y-(m+v)*this.m_axis.x,this.m_a2=g*this.m_axis.y-_*this.m_axis.x;var b=this.m_axis.x*i+this.m_axis.y*m;n.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*t.b2_linearSlop?(y=n.Clamp(b,-t.b2_maxLinearCorrection,t.b2_maxLinearCorrection),d=n.Abs(b),p=!0):b<=this.m_lowerTranslation?(y=n.Clamp(b-this.m_lowerTranslation+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),d=this.m_lowerTranslation-b,p=!0):b>=this.m_upperTranslation&&(y=n.Clamp(b-this.m_upperTranslation+t.b2_linearSlop,0,t.b2_maxLinearCorrection),d=b-this.m_upperTranslation,p=!0)}return this.m_perp=n.MulMV(x,this.m_localYAxis1),this.m_s1=(i+f)*this.m_perp.y-(m+v)*this.m_perp.x,this.m_s2=g*this.m_perp.y-_*this.m_perp.x,x=new s,v=this.m_perp.x*i+this.m_perp.y*m,g=u-c-this.m_refAngle,d=n.Max(d,n.Abs(v)),f=n.Abs(g),p?(p=this.m_invMassA,_=this.m_invMassB,i=this.m_invIA,m=this.m_invIB,this.m_K.col1.x=p+_+i*this.m_s1*this.m_s1+m*this.m_s2*this.m_s2,this.m_K.col1.y=i*this.m_s1+m*this.m_s2,this.m_K.col1.z=i*this.m_s1*this.m_a1+m*this.m_s2*this.m_a2,this.m_K.col2.x=this.m_K.col1.y,this.m_K.col2.y=i+m,this.m_K.col2.z=i*this.m_a1+m*this.m_a2,this.m_K.col3.x=this.m_K.col1.z,this.m_K.col3.y=this.m_K.col2.z,this.m_K.col3.z=p+_+i*this.m_a1*this.m_a1+m*this.m_a2*this.m_a2,this.m_K.Solve33(x,-v,-g,-y)):(p=this.m_invMassA,_=this.m_invMassB,i=this.m_invIA,m=this.m_invIB,y=i*this.m_s1+m*this.m_s2,b=i+m,this.m_K.col1.Set(p+_+i*this.m_s1*this.m_s1+m*this.m_s2*this.m_s2,y,0),this.m_K.col2.Set(y,b,0),y=this.m_K.Solve22(new o,-v,-g),x.x=y.x,x.y=y.y,x.z=0),y=x.x*this.m_perp.x+x.z*this.m_axis.x,p=x.x*this.m_perp.y+x.z*this.m_axis.y,v=x.x*this.m_s1+x.y+x.z*this.m_a1,x=x.x*this.m_s2+x.y+x.z*this.m_a2,l.x-=this.m_invMassA*y,l.y-=this.m_invMassA*p,c-=this.m_invIA*v,h.x+=this.m_invMassB*y,h.y+=this.m_invMassB*p,u+=this.m_invIB*x,r.m_sweep.a=c,a.m_sweep.a=u,r.SynchronizeTransform(),a.SynchronizeTransform(),d<=t.b2_linearSlop&&f<=t.b2_angularSlop},Box2D.inherit(b,Box2D.Dynamics.Joints.b2JointDef),b.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,b.b2PrismaticJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o,this.localAxisA=new o},b.prototype.b2PrismaticJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_prismaticJoint,this.localAxisA.Set(1,0),this.referenceAngle=0,this.enableLimit=!1,this.upperTranslation=this.lowerTranslation=0,this.enableMotor=!1,this.motorSpeed=this.maxMotorForce=0},b.prototype.Initialize=function(t,e,i,n){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.GetLocalPoint(i),this.localAnchorB=this.bodyB.GetLocalPoint(i),this.localAxisA=this.bodyA.GetLocalVector(n),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},Box2D.inherit(w,Box2D.Dynamics.Joints.b2Joint),w.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,w.b2PulleyJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_groundAnchor1=new o,this.m_groundAnchor2=new o,this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_u1=new o,this.m_u2=new o},w.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},w.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},w.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse*this.m_u2.x,t*this.m_impulse*this.m_u2.y)},w.prototype.GetReactionTorque=function(){return 0},w.prototype.GetGroundAnchorA=function(){var t=this.m_ground.m_xf.position.Copy();
return t.Add(this.m_groundAnchor1),t},w.prototype.GetGroundAnchorB=function(){var t=this.m_ground.m_xf.position.Copy();return t.Add(this.m_groundAnchor2),t},w.prototype.GetLength1=function(){var t=this.m_bodyA.GetWorldPoint(this.m_localAnchor1),e=t.x-(this.m_ground.m_xf.position.x+this.m_groundAnchor1.x);return t=t.y-(this.m_ground.m_xf.position.y+this.m_groundAnchor1.y),Math.sqrt(e*e+t*t)},w.prototype.GetLength2=function(){var t=this.m_bodyB.GetWorldPoint(this.m_localAnchor2),e=t.x-(this.m_ground.m_xf.position.x+this.m_groundAnchor2.x);return t=t.y-(this.m_ground.m_xf.position.y+this.m_groundAnchor2.y),Math.sqrt(e*e+t*t)},w.prototype.GetRatio=function(){return this.m_ratio},w.prototype.b2PulleyJoint=function(t){this.__super.b2Joint.call(this,t),this.m_ground=this.m_bodyA.m_world.m_groundBody,this.m_groundAnchor1.x=t.groundAnchorA.x-this.m_ground.m_xf.position.x,this.m_groundAnchor1.y=t.groundAnchorA.y-this.m_ground.m_xf.position.y,this.m_groundAnchor2.x=t.groundAnchorB.x-this.m_ground.m_xf.position.x,this.m_groundAnchor2.y=t.groundAnchorB.y-this.m_ground.m_xf.position.y,this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_ratio=t.ratio,this.m_constant=t.lengthA+this.m_ratio*t.lengthB,this.m_maxLength1=n.Min(t.maxLengthA,this.m_constant-this.m_ratio*w.b2_minPulleyLength),this.m_maxLength2=n.Min(t.maxLengthB,(this.m_constant-w.b2_minPulleyLength)/this.m_ratio),this.m_limitImpulse2=this.m_limitImpulse1=this.m_impulse=0},w.prototype.InitVelocityConstraints=function(e){var i,n=this.m_bodyA,o=this.m_bodyB;i=n.m_xf.R;var s=this.m_localAnchor1.x-n.m_sweep.localCenter.x,r=this.m_localAnchor1.y-n.m_sweep.localCenter.y,a=i.col1.x*s+i.col2.x*r;r=i.col1.y*s+i.col2.y*r,s=a,i=o.m_xf.R;var l=this.m_localAnchor2.x-o.m_sweep.localCenter.x,c=this.m_localAnchor2.y-o.m_sweep.localCenter.y;a=i.col1.x*l+i.col2.x*c,c=i.col1.y*l+i.col2.y*c,l=a,i=o.m_sweep.c.x+l,a=o.m_sweep.c.y+c;var h=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,u=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y;this.m_u1.Set(n.m_sweep.c.x+s-(this.m_ground.m_xf.position.x+this.m_groundAnchor1.x),n.m_sweep.c.y+r-(this.m_ground.m_xf.position.y+this.m_groundAnchor1.y)),this.m_u2.Set(i-h,a-u),i=this.m_u1.Length(),a=this.m_u2.Length(),i>t.b2_linearSlop?this.m_u1.Multiply(1/i):this.m_u1.SetZero(),a>t.b2_linearSlop?this.m_u2.Multiply(1/a):this.m_u2.SetZero(),this.m_constant-i-this.m_ratio*a>0?(this.m_state=p.e_inactiveLimit,this.m_impulse=0):this.m_state=p.e_atUpperLimit,i<this.m_maxLength1?(this.m_limitState1=p.e_inactiveLimit,this.m_limitImpulse1=0):this.m_limitState1=p.e_atUpperLimit,a<this.m_maxLength2?(this.m_limitState2=p.e_inactiveLimit,this.m_limitImpulse2=0):this.m_limitState2=p.e_atUpperLimit,i=s*this.m_u1.y-r*this.m_u1.x,a=l*this.m_u2.y-c*this.m_u2.x,this.m_limitMass1=n.m_invMass+n.m_invI*i*i,this.m_limitMass2=o.m_invMass+o.m_invI*a*a,this.m_pulleyMass=this.m_limitMass1+this.m_ratio*this.m_ratio*this.m_limitMass2,this.m_limitMass1=1/this.m_limitMass1,this.m_limitMass2=1/this.m_limitMass2,this.m_pulleyMass=1/this.m_pulleyMass,e.warmStarting?(this.m_impulse*=e.dtRatio,this.m_limitImpulse1*=e.dtRatio,this.m_limitImpulse2*=e.dtRatio,e=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.x,i=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.y,a=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.x,h=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.y,n.m_linearVelocity.x+=n.m_invMass*e,n.m_linearVelocity.y+=n.m_invMass*i,n.m_angularVelocity+=n.m_invI*(s*i-r*e),o.m_linearVelocity.x+=o.m_invMass*a,o.m_linearVelocity.y+=o.m_invMass*h,o.m_angularVelocity+=o.m_invI*(l*h-c*a)):this.m_limitImpulse2=this.m_limitImpulse1=this.m_impulse=0},w.prototype.SolveVelocityConstraints=function(){var t,e=this.m_bodyA,i=this.m_bodyB;t=e.m_xf.R;var o=this.m_localAnchor1.x-e.m_sweep.localCenter.x,s=this.m_localAnchor1.y-e.m_sweep.localCenter.y,r=t.col1.x*o+t.col2.x*s;s=t.col1.y*o+t.col2.y*s,o=r,t=i.m_xf.R;var a=this.m_localAnchor2.x-i.m_sweep.localCenter.x,l=this.m_localAnchor2.y-i.m_sweep.localCenter.y;r=t.col1.x*a+t.col2.x*l,l=t.col1.y*a+t.col2.y*l,a=r;var c=r=t=0,h=0;t=h=t=h=c=r=t=0,this.m_state==p.e_atUpperLimit&&(t=e.m_linearVelocity.x+-e.m_angularVelocity*s,r=e.m_linearVelocity.y+e.m_angularVelocity*o,c=i.m_linearVelocity.x+-i.m_angularVelocity*l,h=i.m_linearVelocity.y+i.m_angularVelocity*a,t=-(this.m_u1.x*t+this.m_u1.y*r)-this.m_ratio*(this.m_u2.x*c+this.m_u2.y*h),h=this.m_pulleyMass*-t,t=this.m_impulse,this.m_impulse=n.Max(0,this.m_impulse+h),h=this.m_impulse-t,t=-h*this.m_u1.x,r=-h*this.m_u1.y,c=-this.m_ratio*h*this.m_u2.x,h=-this.m_ratio*h*this.m_u2.y,e.m_linearVelocity.x+=e.m_invMass*t,e.m_linearVelocity.y+=e.m_invMass*r,e.m_angularVelocity+=e.m_invI*(o*r-s*t),i.m_linearVelocity.x+=i.m_invMass*c,i.m_linearVelocity.y+=i.m_invMass*h,i.m_angularVelocity+=i.m_invI*(a*h-l*c)),this.m_limitState1==p.e_atUpperLimit&&(t=e.m_linearVelocity.x+-e.m_angularVelocity*s,r=e.m_linearVelocity.y+e.m_angularVelocity*o,t=-(this.m_u1.x*t+this.m_u1.y*r),h=-this.m_limitMass1*t,t=this.m_limitImpulse1,this.m_limitImpulse1=n.Max(0,this.m_limitImpulse1+h),h=this.m_limitImpulse1-t,t=-h*this.m_u1.x,r=-h*this.m_u1.y,e.m_linearVelocity.x+=e.m_invMass*t,e.m_linearVelocity.y+=e.m_invMass*r,e.m_angularVelocity+=e.m_invI*(o*r-s*t)),this.m_limitState2==p.e_atUpperLimit&&(c=i.m_linearVelocity.x+-i.m_angularVelocity*l,h=i.m_linearVelocity.y+i.m_angularVelocity*a,t=-(this.m_u2.x*c+this.m_u2.y*h),h=-this.m_limitMass2*t,t=this.m_limitImpulse2,this.m_limitImpulse2=n.Max(0,this.m_limitImpulse2+h),h=this.m_limitImpulse2-t,c=-h*this.m_u2.x,h=-h*this.m_u2.y,i.m_linearVelocity.x+=i.m_invMass*c,i.m_linearVelocity.y+=i.m_invMass*h,i.m_angularVelocity+=i.m_invI*(a*h-l*c))},w.prototype.SolvePositionConstraints=function(){var e,i=this.m_bodyA,o=this.m_bodyB,s=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,r=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,a=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,l=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,c=0,h=0,u=0,m=0,_=e=0,d=0,f=0,y=_=f=e=_=e=0;return this.m_state==p.e_atUpperLimit&&(e=i.m_xf.R,c=this.m_localAnchor1.x-i.m_sweep.localCenter.x,h=this.m_localAnchor1.y-i.m_sweep.localCenter.y,_=e.col1.x*c+e.col2.x*h,h=e.col1.y*c+e.col2.y*h,c=_,e=o.m_xf.R,u=this.m_localAnchor2.x-o.m_sweep.localCenter.x,m=this.m_localAnchor2.y-o.m_sweep.localCenter.y,_=e.col1.x*u+e.col2.x*m,m=e.col1.y*u+e.col2.y*m,u=_,e=i.m_sweep.c.x+c,_=i.m_sweep.c.y+h,d=o.m_sweep.c.x+u,f=o.m_sweep.c.y+m,this.m_u1.Set(e-s,_-r),this.m_u2.Set(d-a,f-l),e=this.m_u1.Length(),_=this.m_u2.Length(),e>t.b2_linearSlop?this.m_u1.Multiply(1/e):this.m_u1.SetZero(),_>t.b2_linearSlop?this.m_u2.Multiply(1/_):this.m_u2.SetZero(),e=this.m_constant-e-this.m_ratio*_,y=n.Max(y,-e),e=n.Clamp(e+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),f=-this.m_pulleyMass*e,e=-f*this.m_u1.x,_=-f*this.m_u1.y,d=-this.m_ratio*f*this.m_u2.x,f=-this.m_ratio*f*this.m_u2.y,i.m_sweep.c.x+=i.m_invMass*e,i.m_sweep.c.y+=i.m_invMass*_,i.m_sweep.a+=i.m_invI*(c*_-h*e),o.m_sweep.c.x+=o.m_invMass*d,o.m_sweep.c.y+=o.m_invMass*f,o.m_sweep.a+=o.m_invI*(u*f-m*d),i.SynchronizeTransform(),o.SynchronizeTransform()),this.m_limitState1==p.e_atUpperLimit&&(e=i.m_xf.R,c=this.m_localAnchor1.x-i.m_sweep.localCenter.x,h=this.m_localAnchor1.y-i.m_sweep.localCenter.y,_=e.col1.x*c+e.col2.x*h,h=e.col1.y*c+e.col2.y*h,c=_,e=i.m_sweep.c.x+c,_=i.m_sweep.c.y+h,this.m_u1.Set(e-s,_-r),e=this.m_u1.Length(),e>t.b2_linearSlop?(this.m_u1.x*=1/e,this.m_u1.y*=1/e):this.m_u1.SetZero(),e=this.m_maxLength1-e,y=n.Max(y,-e),e=n.Clamp(e+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),f=-this.m_limitMass1*e,e=-f*this.m_u1.x,_=-f*this.m_u1.y,i.m_sweep.c.x+=i.m_invMass*e,i.m_sweep.c.y+=i.m_invMass*_,i.m_sweep.a+=i.m_invI*(c*_-h*e),i.SynchronizeTransform()),this.m_limitState2==p.e_atUpperLimit&&(e=o.m_xf.R,u=this.m_localAnchor2.x-o.m_sweep.localCenter.x,m=this.m_localAnchor2.y-o.m_sweep.localCenter.y,_=e.col1.x*u+e.col2.x*m,m=e.col1.y*u+e.col2.y*m,u=_,d=o.m_sweep.c.x+u,f=o.m_sweep.c.y+m,this.m_u2.Set(d-a,f-l),_=this.m_u2.Length(),_>t.b2_linearSlop?(this.m_u2.x*=1/_,this.m_u2.y*=1/_):this.m_u2.SetZero(),e=this.m_maxLength2-_,y=n.Max(y,-e),e=n.Clamp(e+t.b2_linearSlop,-t.b2_maxLinearCorrection,0),f=-this.m_limitMass2*e,d=-f*this.m_u2.x,f=-f*this.m_u2.y,o.m_sweep.c.x+=o.m_invMass*d,o.m_sweep.c.y+=o.m_invMass*f,o.m_sweep.a+=o.m_invI*(u*f-m*d),o.SynchronizeTransform()),y<t.b2_linearSlop},Box2D.postDefs.push(function(){Box2D.Dynamics.Joints.b2PulleyJoint.b2_minPulleyLength=2}),Box2D.inherit(C,Box2D.Dynamics.Joints.b2JointDef),C.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,C.b2PulleyJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.groundAnchorA=new o,this.groundAnchorB=new o,this.localAnchorA=new o,this.localAnchorB=new o},C.prototype.b2PulleyJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_pulleyJoint,this.groundAnchorA.Set(-1,1),this.groundAnchorB.Set(1,1),this.localAnchorA.Set(-1,0),this.localAnchorB.Set(1,0),this.maxLengthB=this.lengthB=this.maxLengthA=this.lengthA=0,this.ratio=1,this.collideConnected=!0},C.prototype.Initialize=function(t,e,i,n,o,s,r){void 0===r&&(r=0),this.bodyA=t,this.bodyB=e,this.groundAnchorA.SetV(i),this.groundAnchorB.SetV(n),this.localAnchorA=this.bodyA.GetLocalPoint(o),this.localAnchorB=this.bodyB.GetLocalPoint(s),t=o.x-i.x,i=o.y-i.y,this.lengthA=Math.sqrt(t*t+i*i),i=s.x-n.x,n=s.y-n.y,this.lengthB=Math.sqrt(i*i+n*n),this.ratio=r,r=this.lengthA+this.ratio*this.lengthB,this.maxLengthA=r-this.ratio*w.b2_minPulleyLength,this.maxLengthB=(r-w.b2_minPulleyLength)/this.ratio},Box2D.inherit(D,Box2D.Dynamics.Joints.b2Joint),D.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,D.b2RevoluteJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.K=new e,this.K1=new e,this.K2=new e,this.K3=new e,this.impulse3=new s,this.impulse2=new o,this.reduced=new o,this.m_localAnchor1=new o,this.m_localAnchor2=new o,this.m_impulse=new s,this.m_mass=new i},D.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)},D.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)},D.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse.x,t*this.m_impulse.y)},D.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.z},D.prototype.GetJointAngle=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle},D.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity},D.prototype.IsLimitEnabled=function(){return this.m_enableLimit},D.prototype.EnableLimit=function(t){this.m_enableLimit=t},D.prototype.GetLowerLimit=function(){return this.m_lowerAngle},D.prototype.GetUpperLimit=function(){return this.m_upperAngle},D.prototype.SetLimits=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.m_lowerAngle=t,this.m_upperAngle=e},D.prototype.IsMotorEnabled=function(){return this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor},D.prototype.EnableMotor=function(t){this.m_enableMotor=t},D.prototype.SetMotorSpeed=function(t){void 0===t&&(t=0),this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t},D.prototype.GetMotorSpeed=function(){return this.m_motorSpeed},D.prototype.SetMaxMotorTorque=function(t){void 0===t&&(t=0),this.m_maxMotorTorque=t},D.prototype.GetMotorTorque=function(){return this.m_maxMotorTorque},D.prototype.b2RevoluteJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchor1.SetV(t.localAnchorA),this.m_localAnchor2.SetV(t.localAnchorB),this.m_referenceAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_motorImpulse=0,this.m_lowerAngle=t.lowerAngle,this.m_upperAngle=t.upperAngle,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=p.e_inactiveLimit},D.prototype.InitVelocityConstraints=function(e){var i,o=this.m_bodyA,s=this.m_bodyB,r=0;i=o.m_xf.R;var a=this.m_localAnchor1.x-o.m_sweep.localCenter.x,l=this.m_localAnchor1.y-o.m_sweep.localCenter.y;r=i.col1.x*a+i.col2.x*l,l=i.col1.y*a+i.col2.y*l,a=r,i=s.m_xf.R;var c=this.m_localAnchor2.x-s.m_sweep.localCenter.x,h=this.m_localAnchor2.y-s.m_sweep.localCenter.y;r=i.col1.x*c+i.col2.x*h,h=i.col1.y*c+i.col2.y*h,c=r,i=o.m_invMass,r=s.m_invMass;var u=o.m_invI,m=s.m_invI;if(this.m_mass.col1.x=i+r+l*l*u+h*h*m,this.m_mass.col2.x=-l*a*u-h*c*m,this.m_mass.col3.x=-l*u-h*m,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=i+r+a*a*u+c*c*m,this.m_mass.col3.y=a*u+c*m,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=u+m,this.m_motorMass=1/(u+m),0==this.m_enableMotor&&(this.m_motorImpulse=0),this.m_enableLimit){var _=s.m_sweep.a-o.m_sweep.a-this.m_referenceAngle;n.Abs(this.m_upperAngle-this.m_lowerAngle)<2*t.b2_angularSlop?this.m_limitState=p.e_equalLimits:_<=this.m_lowerAngle?(this.m_limitState!=p.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=p.e_atLowerLimit):_>=this.m_upperAngle?(this.m_limitState!=p.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=p.e_atUpperLimit):(this.m_limitState=p.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=p.e_inactiveLimit;e.warmStarting?(this.m_impulse.x*=e.dtRatio,this.m_impulse.y*=e.dtRatio,this.m_motorImpulse*=e.dtRatio,e=this.m_impulse.x,_=this.m_impulse.y,o.m_linearVelocity.x-=i*e,o.m_linearVelocity.y-=i*_,o.m_angularVelocity-=u*(a*_-l*e+this.m_motorImpulse+this.m_impulse.z),s.m_linearVelocity.x+=r*e,s.m_linearVelocity.y+=r*_,s.m_angularVelocity+=m*(c*_-h*e+this.m_motorImpulse+this.m_impulse.z)):(this.m_impulse.SetZero(),this.m_motorImpulse=0)},D.prototype.SolveVelocityConstraints=function(t){var e=this.m_bodyA,i=this.m_bodyB,o=0,s=o=0,r=0,a=0,l=0,c=e.m_linearVelocity,h=e.m_angularVelocity,u=i.m_linearVelocity,m=i.m_angularVelocity,_=e.m_invMass,d=i.m_invMass,f=e.m_invI,y=i.m_invI;if(this.m_enableMotor&&this.m_limitState!=p.e_equalLimits&&(s=this.m_motorMass*-(m-h-this.m_motorSpeed),r=this.m_motorImpulse,a=t.dt*this.m_maxMotorTorque,this.m_motorImpulse=n.Clamp(this.m_motorImpulse+s,-a,a),s=this.m_motorImpulse-r,h-=f*s,m+=y*s),this.m_enableLimit&&this.m_limitState!=p.e_inactiveLimit){t=e.m_xf.R,s=this.m_localAnchor1.x-e.m_sweep.localCenter.x,r=this.m_localAnchor1.y-e.m_sweep.localCenter.y,o=t.col1.x*s+t.col2.x*r,r=t.col1.y*s+t.col2.y*r,s=o,t=i.m_xf.R,a=this.m_localAnchor2.x-i.m_sweep.localCenter.x,l=this.m_localAnchor2.y-i.m_sweep.localCenter.y,o=t.col1.x*a+t.col2.x*l,l=t.col1.y*a+t.col2.y*l,a=o,t=u.x+-m*l-c.x- -h*r;var x=u.y+m*a-c.y-h*s;this.m_mass.Solve33(this.impulse3,-t,-x,-(m-h)),this.m_limitState==p.e_equalLimits?this.m_impulse.Add(this.impulse3):this.m_limitState==p.e_atLowerLimit?(o=this.m_impulse.z+this.impulse3.z,0>o&&(this.m_mass.Solve22(this.reduced,-t,-x),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0)):this.m_limitState==p.e_atUpperLimit&&(o=this.m_impulse.z+this.impulse3.z,o>0&&(this.m_mass.Solve22(this.reduced,-t,-x),this.impulse3.x=this.reduced.x,this.impulse3.y=this.reduced.y,this.impulse3.z=-this.m_impulse.z,this.m_impulse.x+=this.reduced.x,this.m_impulse.y+=this.reduced.y,this.m_impulse.z=0)),c.x-=_*this.impulse3.x,c.y-=_*this.impulse3.y,h-=f*(s*this.impulse3.y-r*this.impulse3.x+this.impulse3.z),u.x+=d*this.impulse3.x,u.y+=d*this.impulse3.y,m+=y*(a*this.impulse3.y-l*this.impulse3.x+this.impulse3.z)}else t=e.m_xf.R,s=this.m_localAnchor1.x-e.m_sweep.localCenter.x,r=this.m_localAnchor1.y-e.m_sweep.localCenter.y,o=t.col1.x*s+t.col2.x*r,r=t.col1.y*s+t.col2.y*r,s=o,t=i.m_xf.R,a=this.m_localAnchor2.x-i.m_sweep.localCenter.x,l=this.m_localAnchor2.y-i.m_sweep.localCenter.y,o=t.col1.x*a+t.col2.x*l,l=t.col1.y*a+t.col2.y*l,a=o,this.m_mass.Solve22(this.impulse2,-(u.x+-m*l-c.x- -h*r),-(u.y+m*a-c.y-h*s)),this.m_impulse.x+=this.impulse2.x,this.m_impulse.y+=this.impulse2.y,c.x-=_*this.impulse2.x,c.y-=_*this.impulse2.y,h-=f*(s*this.impulse2.y-r*this.impulse2.x),u.x+=d*this.impulse2.x,u.y+=d*this.impulse2.y,m+=y*(a*this.impulse2.y-l*this.impulse2.x);e.m_linearVelocity.SetV(c),e.m_angularVelocity=h,i.m_linearVelocity.SetV(u),i.m_angularVelocity=m},D.prototype.SolvePositionConstraints=function(){var e,i=0,o=this.m_bodyA,s=this.m_bodyB,r=0,a=e=0,l=0,c=0;if(this.m_enableLimit&&this.m_limitState!=p.e_inactiveLimit){i=s.m_sweep.a-o.m_sweep.a-this.m_referenceAngle;var h=0;this.m_limitState==p.e_equalLimits?(i=n.Clamp(i-this.m_lowerAngle,-t.b2_maxAngularCorrection,t.b2_maxAngularCorrection),h=-this.m_motorMass*i,r=n.Abs(i)):this.m_limitState==p.e_atLowerLimit?(i-=this.m_lowerAngle,r=-i,i=n.Clamp(i+t.b2_angularSlop,-t.b2_maxAngularCorrection,0),h=-this.m_motorMass*i):this.m_limitState==p.e_atUpperLimit&&(r=i-=this.m_upperAngle,i=n.Clamp(i-t.b2_angularSlop,0,t.b2_maxAngularCorrection),h=-this.m_motorMass*i),o.m_sweep.a-=o.m_invI*h,s.m_sweep.a+=s.m_invI*h,o.SynchronizeTransform(),s.SynchronizeTransform()}e=o.m_xf.R,h=this.m_localAnchor1.x-o.m_sweep.localCenter.x,i=this.m_localAnchor1.y-o.m_sweep.localCenter.y,a=e.col1.x*h+e.col2.x*i,i=e.col1.y*h+e.col2.y*i,h=a,e=s.m_xf.R;var u=this.m_localAnchor2.x-s.m_sweep.localCenter.x,m=this.m_localAnchor2.y-s.m_sweep.localCenter.y;a=e.col1.x*u+e.col2.x*m,m=e.col1.y*u+e.col2.y*m,u=a,l=s.m_sweep.c.x+u-o.m_sweep.c.x-h,c=s.m_sweep.c.y+m-o.m_sweep.c.y-i;var _=l*l+c*c;e=Math.sqrt(_),a=o.m_invMass;var d=s.m_invMass,f=o.m_invI,y=s.m_invI,x=10*t.b2_linearSlop;return _>x*x&&(_=1/(a+d),l=_*-l,c=_*-c,o.m_sweep.c.x-=.5*a*l,o.m_sweep.c.y-=.5*a*c,s.m_sweep.c.x+=.5*d*l,s.m_sweep.c.y+=.5*d*c,l=s.m_sweep.c.x+u-o.m_sweep.c.x-h,c=s.m_sweep.c.y+m-o.m_sweep.c.y-i),this.K1.col1.x=a+d,this.K1.col2.x=0,this.K1.col1.y=0,this.K1.col2.y=a+d,this.K2.col1.x=f*i*i,this.K2.col2.x=-f*h*i,this.K2.col1.y=-f*h*i,this.K2.col2.y=f*h*h,this.K3.col1.x=y*m*m,this.K3.col2.x=-y*u*m,this.K3.col1.y=-y*u*m,this.K3.col2.y=y*u*u,this.K.SetM(this.K1),this.K.AddM(this.K2),this.K.AddM(this.K3),this.K.Solve(D.tImpulse,-l,-c),l=D.tImpulse.x,c=D.tImpulse.y,o.m_sweep.c.x-=o.m_invMass*l,o.m_sweep.c.y-=o.m_invMass*c,o.m_sweep.a-=o.m_invI*(h*c-i*l),s.m_sweep.c.x+=s.m_invMass*l,s.m_sweep.c.y+=s.m_invMass*c,s.m_sweep.a+=s.m_invI*(u*c-m*l),o.SynchronizeTransform(),s.SynchronizeTransform(),e<=t.b2_linearSlop&&r<=t.b2_angularSlop},Box2D.postDefs.push(function(){Box2D.Dynamics.Joints.b2RevoluteJoint.tImpulse=new o}),Box2D.inherit(S,Box2D.Dynamics.Joints.b2JointDef),S.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,S.b2RevoluteJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o},S.prototype.b2RevoluteJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_revoluteJoint,this.localAnchorA.Set(0,0),this.localAnchorB.Set(0,0),this.motorSpeed=this.maxMotorTorque=this.upperAngle=this.lowerAngle=this.referenceAngle=0,this.enableMotor=this.enableLimit=!1},S.prototype.Initialize=function(t,e,i){this.bodyA=t,this.bodyB=e,this.localAnchorA=this.bodyA.GetLocalPoint(i),this.localAnchorB=this.bodyB.GetLocalPoint(i),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()},Box2D.inherit(B,Box2D.Dynamics.Joints.b2Joint),B.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype,B.b2WeldJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments),this.m_localAnchorA=new o,this.m_localAnchorB=new o,this.m_impulse=new s,this.m_mass=new i},B.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)},B.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)},B.prototype.GetReactionForce=function(t){return void 0===t&&(t=0),new o(t*this.m_impulse.x,t*this.m_impulse.y)},B.prototype.GetReactionTorque=function(t){return void 0===t&&(t=0),t*this.m_impulse.z},B.prototype.b2WeldJoint=function(t){this.__super.b2Joint.call(this,t),this.m_localAnchorA.SetV(t.localAnchorA),this.m_localAnchorB.SetV(t.localAnchorB),this.m_referenceAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_mass=new i},B.prototype.InitVelocityConstraints=function(t){var e,i=0,n=this.m_bodyA,o=this.m_bodyB;e=n.m_xf.R;var s=this.m_localAnchorA.x-n.m_sweep.localCenter.x,r=this.m_localAnchorA.y-n.m_sweep.localCenter.y;i=e.col1.x*s+e.col2.x*r,r=e.col1.y*s+e.col2.y*r,s=i,e=o.m_xf.R;var a=this.m_localAnchorB.x-o.m_sweep.localCenter.x,l=this.m_localAnchorB.y-o.m_sweep.localCenter.y;i=e.col1.x*a+e.col2.x*l,l=e.col1.y*a+e.col2.y*l,a=i,e=n.m_invMass,i=o.m_invMass;var c=n.m_invI,h=o.m_invI;this.m_mass.col1.x=e+i+r*r*c+l*l*h,this.m_mass.col2.x=-r*s*c-l*a*h,this.m_mass.col3.x=-r*c-l*h,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=e+i+s*s*c+a*a*h,this.m_mass.col3.y=s*c+a*h,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=c+h,t.warmStarting?(this.m_impulse.x*=t.dtRatio,this.m_impulse.y*=t.dtRatio,this.m_impulse.z*=t.dtRatio,n.m_linearVelocity.x-=e*this.m_impulse.x,n.m_linearVelocity.y-=e*this.m_impulse.y,n.m_angularVelocity-=c*(s*this.m_impulse.y-r*this.m_impulse.x+this.m_impulse.z),o.m_linearVelocity.x+=i*this.m_impulse.x,o.m_linearVelocity.y+=i*this.m_impulse.y,o.m_angularVelocity+=h*(a*this.m_impulse.y-l*this.m_impulse.x+this.m_impulse.z)):this.m_impulse.SetZero()},B.prototype.SolveVelocityConstraints=function(){var t,e=0,i=this.m_bodyA,n=this.m_bodyB,o=i.m_linearVelocity,r=i.m_angularVelocity,a=n.m_linearVelocity,l=n.m_angularVelocity,c=i.m_invMass,h=n.m_invMass,u=i.m_invI,m=n.m_invI;t=i.m_xf.R;var p=this.m_localAnchorA.x-i.m_sweep.localCenter.x,_=this.m_localAnchorA.y-i.m_sweep.localCenter.y;e=t.col1.x*p+t.col2.x*_,_=t.col1.y*p+t.col2.y*_,p=e,t=n.m_xf.R;var d=this.m_localAnchorB.x-n.m_sweep.localCenter.x,f=this.m_localAnchorB.y-n.m_sweep.localCenter.y;e=t.col1.x*d+t.col2.x*f,f=t.col1.y*d+t.col2.y*f,d=e,t=a.x-l*f-o.x+r*_,e=a.y+l*d-o.y-r*p;var y=l-r,x=new s;this.m_mass.Solve33(x,-t,-e,-y),this.m_impulse.Add(x),o.x-=c*x.x,o.y-=c*x.y,r-=u*(p*x.y-_*x.x+x.z),a.x+=h*x.x,a.y+=h*x.y,l+=m*(d*x.y-f*x.x+x.z),i.m_angularVelocity=r,n.m_angularVelocity=l},B.prototype.SolvePositionConstraints=function(){var e,i=0,o=this.m_bodyA,r=this.m_bodyB;e=o.m_xf.R;var a=this.m_localAnchorA.x-o.m_sweep.localCenter.x,l=this.m_localAnchorA.y-o.m_sweep.localCenter.y;i=e.col1.x*a+e.col2.x*l,l=e.col1.y*a+e.col2.y*l,a=i,e=r.m_xf.R;var c=this.m_localAnchorB.x-r.m_sweep.localCenter.x,h=this.m_localAnchorB.y-r.m_sweep.localCenter.y;i=e.col1.x*c+e.col2.x*h,h=e.col1.y*c+e.col2.y*h,c=i,e=o.m_invMass,i=r.m_invMass;var u=o.m_invI,m=r.m_invI,p=r.m_sweep.c.x+c-o.m_sweep.c.x-a,_=r.m_sweep.c.y+h-o.m_sweep.c.y-l,d=r.m_sweep.a-o.m_sweep.a-this.m_referenceAngle,f=10*t.b2_linearSlop,y=Math.sqrt(p*p+_*_),x=n.Abs(d);return y>f&&(u*=1,m*=1),this.m_mass.col1.x=e+i+l*l*u+h*h*m,this.m_mass.col2.x=-l*a*u-h*c*m,this.m_mass.col3.x=-l*u-h*m,this.m_mass.col1.y=this.m_mass.col2.x,this.m_mass.col2.y=e+i+a*a*u+c*c*m,this.m_mass.col3.y=a*u+c*m,this.m_mass.col1.z=this.m_mass.col3.x,this.m_mass.col2.z=this.m_mass.col3.y,this.m_mass.col3.z=u+m,f=new s,this.m_mass.Solve33(f,-p,-_,-d),o.m_sweep.c.x-=e*f.x,o.m_sweep.c.y-=e*f.y,o.m_sweep.a-=u*(a*f.y-l*f.x+f.z),r.m_sweep.c.x+=i*f.x,r.m_sweep.c.y+=i*f.y,r.m_sweep.a+=m*(c*f.y-h*f.x+f.z),o.SynchronizeTransform(),r.SynchronizeTransform(),y<=t.b2_linearSlop&&x<=t.b2_angularSlop},Box2D.inherit(A,Box2D.Dynamics.Joints.b2JointDef),A.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype,A.b2WeldJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments),this.localAnchorA=new o,this.localAnchorB=new o},A.prototype.b2WeldJointDef=function(){this.__super.b2JointDef.call(this),this.type=p.e_weldJoint,this.referenceAngle=0},A.prototype.Initialize=function(t,e,i){this.bodyA=t,this.bodyB=e,this.localAnchorA.SetV(this.bodyA.GetLocalPoint(i)),this.localAnchorB.SetV(this.bodyB.GetLocalPoint(i)),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}}(),function(){var t=Box2D.Dynamics.b2DebugDraw;t.b2DebugDraw=function(){this.m_xformScale=this.m_fillAlpha=this.m_alpha=this.m_lineThickness=this.m_drawScale=1;var t=this;this.m_sprite={graphics:{clear:function(){t.m_ctx.clearRect(0,0,t.m_ctx.canvas.width,t.m_ctx.canvas.height)}}}},t.prototype._color=function(t,e){return"rgba("+((16711680&t)>>16)+","+((65280&t)>>8)+","+(255&t)+","+e+")"},t.prototype.b2DebugDraw=function(){this.m_drawFlags=0},t.prototype.SetFlags=function(t){void 0===t&&(t=0),this.m_drawFlags=t},t.prototype.GetFlags=function(){return this.m_drawFlags},t.prototype.AppendFlags=function(t){void 0===t&&(t=0),this.m_drawFlags|=t},t.prototype.ClearFlags=function(t){void 0===t&&(t=0),this.m_drawFlags&=~t},t.prototype.SetSprite=function(t){this.m_ctx=t},t.prototype.GetSprite=function(){return this.m_ctx},t.prototype.SetDrawScale=function(t){void 0===t&&(t=0),this.m_drawScale=t},t.prototype.GetDrawScale=function(){return this.m_drawScale},t.prototype.SetLineThickness=function(t){void 0===t&&(t=0),this.m_lineThickness=t,this.m_ctx.strokeWidth=t},t.prototype.GetLineThickness=function(){return this.m_lineThickness},t.prototype.SetAlpha=function(t){void 0===t&&(t=0),this.m_alpha=t},t.prototype.GetAlpha=function(){return this.m_alpha},t.prototype.SetFillAlpha=function(t){void 0===t&&(t=0),this.m_fillAlpha=t},t.prototype.GetFillAlpha=function(){return this.m_fillAlpha},t.prototype.SetXFormScale=function(t){void 0===t&&(t=0),this.m_xformScale=t},t.prototype.GetXFormScale=function(){return this.m_xformScale},t.prototype.DrawPolygon=function(t,e,i){if(e){var n=this.m_ctx,o=this.m_drawScale;for(n.beginPath(),n.strokeStyle=this._color(i.color,this.m_alpha),n.moveTo(t[0].x*o,t[0].y*o),i=1;e>i;i++)n.lineTo(t[i].x*o,t[i].y*o);n.lineTo(t[0].x*o,t[0].y*o),n.closePath(),n.stroke()}},t.prototype.DrawSolidPolygon=function(t,e,i){if(e){var n=this.m_ctx,o=this.m_drawScale;for(n.beginPath(),n.strokeStyle=this._color(i.color,this.m_alpha),n.fillStyle=this._color(i.color,this.m_fillAlpha),n.moveTo(t[0].x*o,t[0].y*o),i=1;e>i;i++)n.lineTo(t[i].x*o,t[i].y*o);n.lineTo(t[0].x*o,t[0].y*o),n.closePath(),n.fill(),n.stroke()}},t.prototype.DrawCircle=function(t,e,i){if(e){var n=this.m_ctx,o=this.m_drawScale;n.beginPath(),n.strokeStyle=this._color(i.color,this.m_alpha),n.arc(t.x*o,t.y*o,e*o,0,2*Math.PI,!0),n.closePath(),n.stroke()}},t.prototype.DrawSolidCircle=function(t,e,i,n){if(e){var o=this.m_ctx,s=this.m_drawScale,r=t.x*s,a=t.y*s;o.moveTo(0,0),o.beginPath(),o.strokeStyle=this._color(n.color,this.m_alpha),o.fillStyle=this._color(n.color,this.m_fillAlpha),o.arc(r,a,e*s,0,2*Math.PI,!0),o.moveTo(r,a),o.lineTo((t.x+i.x*e)*s,(t.y+i.y*e)*s),o.closePath(),o.fill(),o.stroke()}},t.prototype.DrawSegment=function(t,e,i){var n=this.m_ctx,o=this.m_drawScale;n.strokeStyle=this._color(i.color,this.m_alpha),n.beginPath(),n.moveTo(t.x*o,t.y*o),n.lineTo(e.x*o,e.y*o),n.closePath(),n.stroke()},t.prototype.DrawTransform=function(t){var e=this.m_ctx,i=this.m_drawScale;e.beginPath(),e.strokeStyle=this._color(16711680,this.m_alpha),e.moveTo(t.position.x*i,t.position.y*i),e.lineTo((t.position.x+this.m_xformScale*t.R.col1.x)*i,(t.position.y+this.m_xformScale*t.R.col1.y)*i),e.strokeStyle=this._color(65280,this.m_alpha),e.moveTo(t.position.x*i,t.position.y*i),e.lineTo((t.position.x+this.m_xformScale*t.R.col2.x)*i,(t.position.y+this.m_xformScale*t.R.col2.y)*i),e.closePath(),e.stroke()}}();var i;for(i=0;i<Box2D.postDefs.length;++i)Box2D.postDefs[i]();delete Box2D.postDefs,/*!
* @license EaselJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2013 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
this.createjs=this.createjs||{},createjs.extend=function(t,e){"use strict";function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){"use strict";var i=t.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(n){i[(e+="_")+"constructor"]=n.constructor;for(var o in n)i.hasOwnProperty(o)&&"function"==typeof n[o]&&(i[e+o]=n[o])}return t},this.createjs=this.createjs||{},createjs.indexOf=function(t,e){"use strict";for(var i=0,n=t.length;n>i;i++)if(e===t[i])return i;return-1},this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var n;n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var o=n[t];return o&&this.removeEventListener(t,e,i),o=n[t],o?o.push(e):n[t]=[e],e},e.on=function(t,e,i,n,o,s){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,o),n&&t.remove()},s)},e.removeEventListener=function(t,e,i){var n=i?this._captureListeners:this._listeners;if(n){var o=n[t];if(o)for(var s=0,r=o.length;r>s;s++)if(o[s]==e){1==r?delete n[t]:o.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t){if("string"==typeof t){var e=this._listeners;if(!e||!e[t])return!1;t=new createjs.Event(t)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(i){}if(t.bubbles&&this.parent){for(var n=this,o=[n];n.parent;)o.push(n=n.parent);var s,r=o.length;for(s=r-1;s>=0&&!t.propagationStopped;s--)o[s]._dispatchEvent(t,1+(0==s));for(s=1;r>s&&!t.propagationStopped;s++)o[s]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,n=1==e?this._captureListeners:this._listeners;if(t&&n){var o=n[t.type];if(!o||!(i=o.length))return;try{t.currentTarget=this}catch(s){}try{t.eventPhase=e}catch(s){}t.removed=!1,o=o.slice();for(var r=0;i>r&&!t.immediatePropagationStopped;r++){var a=o[r];a.handleEvent?a.handleEvent(t):a(t),t.removed&&(this.off(t.type,a,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Ticker cannot be instantiated."}t.RAF_SYNCHED="synched",t.RAF="raf",t.TIMEOUT="timeout",t.useRAF=!1,t.timingMode=null,t.maxDelta=0,t.paused=!1,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._addEventListener=t.addEventListener,t.addEventListener=function(){return!t._inited&&t.init(),t._addEventListener.apply(t,arguments)},t._inited=!1,t._startTime=0,t._pausedTime=0,t._ticks=0,t._pausedTicks=0,t._interval=50,t._lastTime=0,t._times=null,t._tickTimes=null,t._timerId=null,t._raf=!0,t.setInterval=function(e){t._interval=e,t._inited&&t._setupTick()},t.getInterval=function(){return t._interval},t.setFPS=function(e){t.setInterval(1e3/e)},t.getFPS=function(){return 1e3/t._interval};try{Object.defineProperties(t,{interval:{get:t.getInterval,set:t.setInterval},framerate:{get:t.getFPS,set:t.setFPS}})}catch(e){console.log(e)}t.init=function(){t._inited||(t._inited=!0,t._times=[],t._tickTimes=[],t._startTime=t._getTime(),t._times.push(t._lastTime=0),t.interval=t._interval)},t.reset=function(){if(t._raf){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;e&&e(t._timerId)}else clearTimeout(t._timerId);t.removeAllEventListeners("tick"),t._timerId=t._times=t._tickTimes=null,t._startTime=t._lastTime=t._ticks=0,t._inited=!1},t.getMeasuredTickTime=function(e){var i=0,n=t._tickTimes;if(!n||n.length<1)return-1;e=Math.min(n.length,e||0|t.getFPS());for(var o=0;e>o;o++)i+=n[o];return i/e},t.getMeasuredFPS=function(e){var i=t._times;return!i||i.length<2?-1:(e=Math.min(i.length-1,e||0|t.getFPS()),1e3/((i[0]-i[e])/e))},t.setPaused=function(e){t.paused=e},t.getPaused=function(){return t.paused},t.getTime=function(e){return t._startTime?t._getTime()-(e?t._pausedTime:0):-1},t.getEventTime=function(e){return t._startTime?(t._lastTime||t._startTime)-(e?t._pausedTime:0):-1},t.getTicks=function(e){return t._ticks-(e?t._pausedTicks:0)},t._handleSynch=function(){t._timerId=null,t._setupTick(),t._getTime()-t._lastTime>=.97*(t._interval-1)&&t._tick()},t._handleRAF=function(){t._timerId=null,t._setupTick(),t._tick()},t._handleTimeout=function(){t._timerId=null,t._setupTick(),t._tick()},t._setupTick=function(){if(null==t._timerId){var e=t.timingMode||t.useRAF&&t.RAF_SYNCHED;if(e==t.RAF_SYNCHED||e==t.RAF){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(i)return t._timerId=i(e==t.RAF?t._handleRAF:t._handleSynch),void(t._raf=!0)}t._raf=!1,t._timerId=setTimeout(t._handleTimeout,t._interval)}},t._tick=function(){var e=t.paused,i=t._getTime(),n=i-t._lastTime;if(t._lastTime=i,t._ticks++,e&&(t._pausedTicks++,t._pausedTime+=n),t.hasEventListener("tick")){var o=new createjs.Event("tick"),s=t.maxDelta;o.delta=s&&n>s?s:n,o.paused=e,o.time=i,o.runTime=i-t._pausedTime,t.dispatchEvent(o)}for(t._tickTimes.unshift(t._getTime()-i);t._tickTimes.length>100;)t._tickTimes.pop();for(t._times.unshift(i);t._times.length>100;)t._times.pop()};var i=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);t._getTime=function(){return(i&&i.call(performance)||(new Date).getTime())-t._startTime},createjs.Ticker=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"UID cannot be instantiated"}t._nextID=0,t.get=function(){return t._nextID++},createjs.UID=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,n,o,s,r,a,l,c){this.Event_constructor(t,e,i),this.stageX=n,this.stageY=o,this.rawX=null==l?n:l,this.rawY=null==c?o:c,this.nativeEvent=s,this.pointerID=r,this.primary=!!a}var e=createjs.extend(t,createjs.Event);e._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},e._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},e._get_isTouch=function(){return-1!==this.pointerID};try{Object.defineProperties(e,{localX:{get:e._get_localX},localY:{get:e._get_localY},isTouch:{get:e._get_isTouch}})}catch(i){}e.clone=function(){return new t(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},e.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,n,o,s){this.setValues(t,e,i,n,o,s)}var e=t.prototype;t.DEG_TO_RAD=Math.PI/180,t.identity=null,e.setValues=function(t,e,i,n,o,s){return this.a=null==t?1:t,this.b=e||0,this.c=i||0,this.d=null==n?1:n,this.tx=o||0,this.ty=s||0,this},e.append=function(t,e,i,n,o,s){var r=this.a,a=this.b,l=this.c,c=this.d;return(1!=t||0!=e||0!=i||1!=n)&&(this.a=r*t+l*e,this.b=a*t+c*e,this.c=r*i+l*n,this.d=a*i+c*n),this.tx=r*o+l*s+this.tx,this.ty=a*o+c*s+this.ty,this},e.prepend=function(t,e,i,n,o,s){var r=this.a,a=this.c,l=this.tx;return this.a=t*r+i*this.b,this.b=e*r+n*this.b,this.c=t*a+i*this.d,this.d=e*a+n*this.d,this.tx=t*l+i*this.ty+o,this.ty=e*l+n*this.ty+s,this},e.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.appendTransform=function(e,i,n,o,s,r,a,l,c){if(s%360)var h=s*t.DEG_TO_RAD,u=Math.cos(h),m=Math.sin(h);else u=1,m=0;return r||a?(r*=t.DEG_TO_RAD,a*=t.DEG_TO_RAD,this.append(Math.cos(a),Math.sin(a),-Math.sin(r),Math.cos(r),e,i),this.append(u*n,m*n,-m*o,u*o,0,0)):this.append(u*n,m*n,-m*o,u*o,e,i),(l||c)&&(this.tx-=l*this.a+c*this.c,this.ty-=l*this.b+c*this.d),this},e.prependTransform=function(e,i,n,o,s,r,a,l,c){if(s%360)var h=s*t.DEG_TO_RAD,u=Math.cos(h),m=Math.sin(h);else u=1,m=0;return(l||c)&&(this.tx-=l,this.ty-=c),r||a?(r*=t.DEG_TO_RAD,a*=t.DEG_TO_RAD,this.prepend(u*n,m*n,-m*o,u*o,0,0),this.prepend(Math.cos(a),Math.sin(a),-Math.sin(r),Math.cos(r),e,i)):this.prepend(u*n,m*n,-m*o,u*o,e,i),this},e.rotate=function(e){e*=t.DEG_TO_RAD;var i=Math.cos(e),n=Math.sin(e),o=this.a,s=this.b;return this.a=o*i+this.c*n,this.b=s*i+this.d*n,this.c=-o*n+this.c*i,this.d=-s*n+this.d*i,this},e.skew=function(e,i){return e*=t.DEG_TO_RAD,i*=t.DEG_TO_RAD,this.append(Math.cos(i),Math.sin(i),-Math.sin(e),Math.cos(e),0,0),this},e.scale=function(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this},e.translate=function(t,e){return this.tx+=this.a*t+this.c*e,this.ty+=this.b*t+this.d*e,this},e.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},e.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,o=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*o)/s,this.ty=-(t*this.ty-e*o)/s,this},e.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},e.equals=function(t){return this.tx===t.tx&&this.ty===t.ty&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d},e.transformPoint=function(t,e,i){return i=i||{},i.x=t*this.a+e*this.c+this.tx,i.y=t*this.b+e*this.d+this.ty,i},e.decompose=function(e){null==e&&(e={}),e.x=this.tx,e.y=this.ty,e.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),e.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var i=Math.atan2(-this.c,this.d),n=Math.atan2(this.b,this.a),o=Math.abs(1-i/n);return 1e-5>o?(e.rotation=n/t.DEG_TO_RAD,this.a<0&&this.d>=0&&(e.rotation+=e.rotation<=0?180:-180),e.skewX=e.skewY=0):(e.skewX=i/t.DEG_TO_RAD,e.skewY=n/t.DEG_TO_RAD),e},e.copy=function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.clone=function(){return new t(this.a,this.b,this.c,this.d,this.tx,this.ty)},e.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},t.identity=new t,createjs.Matrix2D=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,n,o){this.setValues(t,e,i,n,o)}var e=t.prototype;e.setValues=function(t,e,i,n,o){return this.visible=null==t?!0:!!t,this.alpha=null==e?1:e,this.shadow=i,this.compositeOperation=i,this.matrix=o||this.matrix&&this.matrix.identity()||new createjs.Matrix2D,this},e.append=function(t,e,i,n,o){return this.alpha*=e,this.shadow=i||this.shadow,this.compositeOperation=n||this.compositeOperation,this.visible=this.visible&&t,o&&this.matrix.appendMatrix(o),this},e.prepend=function(t,e,i,n,o){return this.alpha*=e,this.shadow=this.shadow||i,this.compositeOperation=this.compositeOperation||n,this.visible=this.visible&&t,o&&this.matrix.prependMatrix(o),this},e.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},e.clone=function(){return new t(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},createjs.DisplayProps=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.setValues(t,e)}var e=t.prototype;e.setValues=function(t,e){return this.x=t||0,this.y=e||0,this},e.copy=function(t){return this.x=t.x,this.y=t.y,this},e.clone=function(){return new t(this.x,this.y)},e.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,n){this.setValues(t,e,i,n)}var e=t.prototype;e.setValues=function(t,e,i,n){return this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0,this},e.extend=function(t,e,i,n){return i=i||0,n=n||0,t+i>this.x+this.width&&(this.width=t+i-this.x),e+n>this.y+this.height&&(this.height=e+n-this.y),t<this.x&&(this.width+=this.x-t,this.x=t),e<this.y&&(this.height+=this.y-e,this.y=e),this},e.pad=function(t,e,i,n){return this.x-=t,this.y-=e,this.width+=t+i,this.height+=e+n,this},e.copy=function(t){return this.setValues(t.x,t.y,t.width,t.height)},e.contains=function(t,e,i,n){return i=i||0,n=n||0,t>=this.x&&t+i<=this.x+this.width&&e>=this.y&&e+n<=this.y+this.height},e.union=function(t){return this.clone().extend(t.x,t.y,t.width,t.height)},e.intersection=function(e){var i=e.x,n=e.y,o=i+e.width,s=n+e.height;return this.x>i&&(i=this.x),this.y>n&&(n=this.y),this.x+this.width<o&&(o=this.x+this.width),this.y+this.height<s&&(s=this.y+this.height),i>=o||n>=s?null:new t(i,n,o-i,s-n)},e.intersects=function(t){return t.x<=this.x+this.width&&this.x<=t.x+t.width&&t.y<=this.y+this.height&&this.y<=t.y+t.height},e.isEmpty=function(){return this.width<=0||this.height<=0},e.clone=function(){return new t(this.x,this.y,this.width,this.height)},e.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,n,o,s,r){t.addEventListener&&(this.target=t,this.overLabel=null==i?"over":i,this.outLabel=null==e?"out":e,this.downLabel=null==n?"down":n,this.play=o,this._isPressed=!1,this._isOver=!1,this._enabled=!1,t.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),s&&(r&&(s.actionsEnabled=!1,s.gotoAndStop&&s.gotoAndStop(r)),t.hitArea=s))}var e=t.prototype;e.setEnabled=function(t){if(t!=this._enabled){var e=this.target;this._enabled=t,t?(e.cursor="pointer",e.addEventListener("rollover",this),e.addEventListener("rollout",this),e.addEventListener("mousedown",this),e.addEventListener("pressup",this)):(e.cursor=null,e.removeEventListener("rollover",this),e.removeEventListener("rollout",this),e.removeEventListener("mousedown",this),e.removeEventListener("pressup",this))}},e.getEnabled=function(){return this._enabled};try{Object.defineProperties(e,{enabled:{get:e.getEnabled,set:e.setEnabled}})}catch(i){}e.toString=function(){return"[ButtonHelper]"},e.handleEvent=function(t){var e,i=this.target,n=t.type;"mousedown"==n?(this._isPressed=!0,e=this.downLabel):"pressup"==n?(this._isPressed=!1,e=this._isOver?this.overLabel:this.outLabel):"rollover"==n?(this._isOver=!0,e=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,e=this._isPressed?this.overLabel:this.outLabel),this.play?i.gotoAndPlay&&i.gotoAndPlay(e):i.gotoAndStop&&i.gotoAndStop(e)},createjs.ButtonHelper=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,n){this.color=t||"black",this.offsetX=e||0,this.offsetY=i||0,this.blur=n||0}var e=t.prototype;t.identity=new t("transparent",0,0,0),e.toString=function(){return"[Shadow]"},e.clone=function(){return new t(this.color,this.offsetX,this.offsetY,this.blur)},createjs.Shadow=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(t)}var e=createjs.extend(t,createjs.EventDispatcher);e.getAnimations=function(){return this._animations.slice()};try{Object.defineProperties(e,{animations:{get:e.getAnimations}})}catch(i){}e.getNumFrames=function(t){if(null==t)return this._frames?this._frames.length:this._numFrames||0;var e=this._data[t];return null==e?0:e.frames.length},e.getAnimation=function(t){return this._data[t]},e.getFrame=function(t){var e;return this._frames&&(e=this._frames[t])?e:null},e.getFrameBounds=function(t,e){var i=this.getFrame(t);return i?(e||new createjs.Rectangle).setValues(-i.regX,-i.regY,i.rect.width,i.rect.height):null},e.toString=function(){return"[SpriteSheet]"},e.clone=function(){throw"SpriteSheet cannot be cloned."},e._parseData=function(t){var e,i,n,o;if(null!=t){if(this.framerate=t.framerate||0,t.images&&(i=t.images.length)>0)for(o=this._images=[],e=0;i>e;e++){var s=t.images[e];if("string"==typeof s){var r=s;s=document.createElement("img"),s.src=r}o.push(s),s.getContext||s.complete||(this._loadCount++,this.complete=!1,function(t){s.onload=function(){t._handleImageLoad()}}(this))}if(null==t.frames);else if(t.frames instanceof Array)for(this._frames=[],o=t.frames,e=0,i=o.length;i>e;e++){var a=o[e];this._frames.push({image:this._images[a[4]?a[4]:0],rect:new createjs.Rectangle(a[0],a[1],a[2],a[3]),regX:a[5]||0,regY:a[6]||0})}else n=t.frames,this._frameWidth=n.width,this._frameHeight=n.height,this._regX=n.regX||0,this._regY=n.regY||0,this._spacing=n.spacing||0,this._margin=n.margin||0,this._numFrames=n.count,0==this._loadCount&&this._calculateFrames();if(this._animations=[],null!=(n=t.animations)){this._data={};var l;for(l in n){var c={name:l},h=n[l];if("number"==typeof h)o=c.frames=[h];else if(h instanceof Array)if(1==h.length)c.frames=[h[0]];else for(c.speed=h[3],c.next=h[2],o=c.frames=[],e=h[0];e<=h[1];e++)o.push(e);else{c.speed=h.speed,c.next=h.next;var u=h.frames;o=c.frames="number"==typeof u?[u]:u.slice(0)}(c.next===!0||void 0===c.next)&&(c.next=l),(c.next===!1||o.length<2&&c.next==l)&&(c.next=null),c.speed||(c.speed=1),this._animations.push(l),this._data[l]=c}}}},e._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},e._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];var t=this._numFrames||1e5,e=0,i=this._frameWidth,n=this._frameHeight,o=this._spacing,s=this._margin;t:for(var r=0,a=this._images;r<a.length;r++)for(var l=a[r],c=l.width,h=l.height,u=s;h-s-n>=u;){for(var m=s;c-s-i>=m;){if(e>=t)break t;e++,this._frames.push({image:l,rect:new createjs.Rectangle(m,u,i,n),regX:this._regX,regY:this._regY}),m+=i+o}u+=n+o}this._numFrames=e}},createjs.SpriteSheet=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.command=null,this._stroke=null,this._strokeStyle=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var e=t.prototype,i=t;t.getRGB=function(t,e,i,n){return null!=t&&null==i&&(n=e,i=255&t,e=t>>8&255,t=t>>16&255),null==n?"rgb("+t+","+e+","+i+")":"rgba("+t+","+e+","+i+","+n+")"},t.getHSL=function(t,e,i,n){return null==n?"hsl("+t%360+","+e+"%,"+i+"%)":"hsla("+t%360+","+e+"%,"+i+"%,"+n+")"},t.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},t.STROKE_CAPS_MAP=["butt","round","square"],t.STROKE_JOINTS_MAP=["miter","round","bevel"];var n=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");n.getContext&&(t._ctx=n.getContext("2d"),n.width=n.height=1),e.getInstructions=function(){return this._updateInstructions(),this._instructions};try{Object.defineProperties(e,{instructions:{get:e.getInstructions}})}catch(o){}e.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},e.draw=function(t,e){this._updateInstructions();for(var i=this._instructions,n=this._storeIndex,o=i.length;o>n;n++)i[n].exec(t,e)},e.drawAsPath=function(t){this._updateInstructions();for(var e,i=this._instructions,n=this._storeIndex,o=i.length;o>n;n++)(e=i[n]).path!==!1&&e.exec(t)},e.moveTo=function(t,e){return this.append(new i.MoveTo(t,e),!0)},e.lineTo=function(t,e){return this.append(new i.LineTo(t,e))},e.arcTo=function(t,e,n,o,s){return this.append(new i.ArcTo(t,e,n,o,s))},e.arc=function(t,e,n,o,s,r){return this.append(new i.Arc(t,e,n,o,s,r))},e.quadraticCurveTo=function(t,e,n,o){return this.append(new i.QuadraticCurveTo(t,e,n,o))},e.bezierCurveTo=function(t,e,n,o,s,r){return this.append(new i.BezierCurveTo(t,e,n,o,s,r))},e.rect=function(t,e,n,o){return this.append(new i.Rect(t,e,n,o))},e.closePath=function(){return this._activeInstructions.length?this.append(new i.ClosePath):this},e.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._stroke=this._fill=null,this._dirty=this._strokeIgnoreScale=!1,this},e.beginFill=function(t){return this._setFill(t?new i.Fill(t):null)},e.beginLinearGradientFill=function(t,e,n,o,s,r){return this._setFill((new i.Fill).linearGradient(t,e,n,o,s,r))},e.beginRadialGradientFill=function(t,e,n,o,s,r,a,l){return this._setFill((new i.Fill).radialGradient(t,e,n,o,s,r,a,l))},e.beginBitmapFill=function(t,e,n){return this._setFill(new i.Fill(null,n).bitmap(t,e))},e.endFill=function(){return this.beginFill()},e.setStrokeStyle=function(t,e,n,o,s){return this._updateInstructions(!0),this._strokeStyle=this.command=new i.StrokeStyle(t,e,n,o,s),this._stroke&&(this._stroke.ignoreScale=s),this._strokeIgnoreScale=s,this},e.beginStroke=function(t){return this._setStroke(t?new i.Stroke(t):null)},e.beginLinearGradientStroke=function(t,e,n,o,s,r){return this._setStroke((new i.Stroke).linearGradient(t,e,n,o,s,r))},e.beginRadialGradientStroke=function(t,e,n,o,s,r,a,l){return this._setStroke((new i.Stroke).radialGradient(t,e,n,o,s,r,a,l))},e.beginBitmapStroke=function(t,e){return this._setStroke((new i.Stroke).bitmap(t,e))},e.endStroke=function(){return this.beginStroke()},e.curveTo=e.quadraticCurveTo,e.drawRect=e.rect,e.drawRoundRect=function(t,e,i,n,o){return this.drawRoundRectComplex(t,e,i,n,o,o,o,o)},e.drawRoundRectComplex=function(t,e,n,o,s,r,a,l){return this.append(new i.RoundRect(t,e,n,o,s,r,a,l))},e.drawCircle=function(t,e,n){return this.append(new i.Circle(t,e,n))},e.drawEllipse=function(t,e,n,o){return this.append(new i.Ellipse(t,e,n,o))},e.drawPolyStar=function(t,e,n,o,s,r){return this.append(new i.PolyStar(t,e,n,o,s,r))},e.append=function(t,e){return this._activeInstructions.push(t),this.command=t,e||(this._dirty=!0),this},e.decodePath=function(e){for(var i=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],n=[2,2,4,6,0],o=0,s=e.length,r=[],a=0,l=0,c=t.BASE_64;s>o;){var h=e.charAt(o),u=c[h],m=u>>3,p=i[m];if(!p||3&u)throw"bad path data (@"+o+"): "+h;var _=n[m];m||(a=l=0),r.length=0,o++;for(var d=(u>>2&1)+2,f=0;_>f;f++){var y=c[e.charAt(o)],x=y>>5?-1:1;y=(31&y)<<6|c[e.charAt(o+1)],3==d&&(y=y<<6|c[e.charAt(o+2)]),y=x*y/10,f%2?a=y+=a:l=y+=l,r[f]=y,o+=d}p.apply(this,r)}return this},e.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},e.unstore=function(){return this._storeIndex=0,this},e.clone=function(){var e=new t;return e.command=this.command,e._stroke=this._stroke,e._strokeStyle=this._strokeStyle,e._strokeIgnoreScale=this._strokeIgnoreScale,e._fill=this._fill,e._instructions=this._instructions.slice(),e._commitIndex=this._commitIndex,e._activeInstructions=this._activeInstructions.slice(),e._dirty=this._dirty,e._storeIndex=this._storeIndex,e},e.toString=function(){return"[Graphics]"},e.mt=e.moveTo,e.lt=e.lineTo,e.at=e.arcTo,e.bt=e.bezierCurveTo,e.qt=e.quadraticCurveTo,e.a=e.arc,e.r=e.rect,e.cp=e.closePath,e.c=e.clear,e.f=e.beginFill,e.lf=e.beginLinearGradientFill,e.rf=e.beginRadialGradientFill,e.bf=e.beginBitmapFill,e.ef=e.endFill,e.ss=e.setStrokeStyle,e.s=e.beginStroke,e.ls=e.beginLinearGradientStroke,e.rs=e.beginRadialGradientStroke,e.bs=e.beginBitmapStroke,e.es=e.endStroke,e.dr=e.drawRect,e.rr=e.drawRoundRect,e.rc=e.drawRoundRectComplex,e.dc=e.drawCircle,e.de=e.drawEllipse,e.dp=e.drawPolyStar,e.p=e.decodePath,e._updateInstructions=function(e){var i=this._instructions,n=this._activeInstructions,o=this._commitIndex;if(this._dirty&&n.length){i.length=o,i.push(t.beginCmd);var s=n.length,r=i.length;i.length=r+s;for(var a=0;s>a;a++)i[a+r]=n[a];this._fill&&i.push(this._fill),this._stroke&&this._strokeStyle&&i.push(this._strokeStyle),this._stroke&&i.push(this._stroke),this._dirty=!1}e&&(n.length=0,this._commitIndex=i.length)},e._setFill=function(t){return this._updateInstructions(!0),(this._fill=t)&&(this.command=t),this},e._setStroke=function(t){return this._updateInstructions(!0),(this._stroke=t)&&(this.command=t,t.ignoreScale=this._strokeIgnoreScale),this},(i.LineTo=function(t,e){this.x=t,this.y=e}).prototype.exec=function(t){t.lineTo(this.x,this.y)},(i.MoveTo=function(t,e){this.x=t,this.y=e}).prototype.exec=function(t){t.moveTo(this.x,this.y)},(i.ArcTo=function(t,e,i,n,o){this.x1=t,this.y1=e,this.x2=i,this.y2=n,this.radius=o}).prototype.exec=function(t){t.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(i.Arc=function(t,e,i,n,o,s){this.x=t,this.y=e,this.radius=i,this.startAngle=n,this.endAngle=o,this.anticlockwise=!!s}).prototype.exec=function(t){t.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(i.QuadraticCurveTo=function(t,e,i,n){this.cpx=t,this.cpy=e,this.x=i,this.y=n}).prototype.exec=function(t){t.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(i.BezierCurveTo=function(t,e,i,n,o,s){this.cp1x=t,this.cp1y=e,this.cp2x=i,this.cp2y=n,this.x=o,this.y=s}).prototype.exec=function(t){t.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(i.Rect=function(t,e,i,n){this.x=t,this.y=e,this.w=i,this.h=n}).prototype.exec=function(t){t.rect(this.x,this.y,this.w,this.h)},(i.ClosePath=function(){}).prototype.exec=function(t){t.closePath()},(i.BeginPath=function(){}).prototype.exec=function(t){t.beginPath()},e=(i.Fill=function(t,e){this.style=t,this.matrix=e}).prototype,e.exec=function(t){if(this.style){t.fillStyle=this.style;var e=this.matrix;e&&(t.save(),t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)),t.fill(),e&&t.restore()}},e.linearGradient=function(e,i,n,o,s,r){for(var a=this.style=t._ctx.createLinearGradient(n,o,s,r),l=0,c=e.length;c>l;l++)a.addColorStop(i[l],e[l]);return a.props={colors:e,ratios:i,x0:n,y0:o,x1:s,y1:r,type:"linear"},this},e.radialGradient=function(e,i,n,o,s,r,a,l){for(var c=this.style=t._ctx.createRadialGradient(n,o,s,r,a,l),h=0,u=e.length;u>h;h++)c.addColorStop(i[h],e[h]);return c.props={colors:e,ratios:i,x0:n,y0:o,r0:s,x1:r,y1:a,r1:l,type:"radial"},this},e.bitmap=function(e,i){var n=this.style=t._ctx.createPattern(e,i||"");return n.props={image:e,repetition:i,type:"bitmap"},this},e.path=!1,e=(i.Stroke=function(t,e){this.style=t,this.ignoreScale=e}).prototype,e.exec=function(t){this.style&&(t.strokeStyle=this.style,this.ignoreScale&&(t.save(),t.setTransform(1,0,0,1,0,0)),t.stroke(),this.ignoreScale&&t.restore())},e.linearGradient=i.Fill.prototype.linearGradient,e.radialGradient=i.Fill.prototype.radialGradient,e.bitmap=i.Fill.prototype.bitmap,e.path=!1,e=(i.StrokeStyle=function(t,e,i,n){this.width=t,this.caps=e,this.joints=i,this.miterLimit=n}).prototype,e.exec=function(e){e.lineWidth=null==this.width?"1":this.width,e.lineCap=null==this.caps?"butt":isNaN(this.caps)?this.caps:t.STROKE_CAPS_MAP[this.caps],e.lineJoin=null==this.joints?"miter":isNaN(this.joints)?this.joints:t.STROKE_JOINTS_MAP[this.joints],e.miterLimit=null==this.miterLimit?"10":this.miterLimit},e.path=!1,(i.RoundRect=function(t,e,i,n,o,s,r,a){this.x=t,this.y=e,this.w=i,this.h=n,this.radiusTL=o,this.radiusTR=s,this.radiusBR=r,this.radiusBL=a}).prototype.exec=function(t){var e=(c>l?l:c)/2,i=0,n=0,o=0,s=0,r=this.x,a=this.y,l=this.w,c=this.h,h=this.radiusTL,u=this.radiusTR,m=this.radiusBR,p=this.radiusBL;0>h&&(h*=i=-1),h>e&&(h=e),0>u&&(u*=n=-1),u>e&&(u=e),0>m&&(m*=o=-1),m>e&&(m=e),0>p&&(p*=s=-1),p>e&&(p=e),t.moveTo(r+l-u,a),t.arcTo(r+l+u*n,a-u*n,r+l,a+u,u),t.lineTo(r+l,a+c-m),t.arcTo(r+l+m*o,a+c+m*o,r+l-m,a+c,m),t.lineTo(r+p,a+c),t.arcTo(r-p*s,a+c+p*s,r,a+c-p,p),t.lineTo(r,a+h),t.arcTo(r-h*i,a-h*i,r+h,a,h),t.closePath()},(i.Circle=function(t,e,i){this.x=t,this.y=e,this.radius=i}).prototype.exec=function(t){t.arc(this.x,this.y,this.radius,0,2*Math.PI)},(i.Ellipse=function(t,e,i,n){this.x=t,this.y=e,this.w=i,this.h=n}).prototype.exec=function(t){var e=this.x,i=this.y,n=this.w,o=this.h,s=.5522848,r=n/2*s,a=o/2*s,l=e+n,c=i+o,h=e+n/2,u=i+o/2;t.moveTo(e,u),t.bezierCurveTo(e,u-a,h-r,i,h,i),t.bezierCurveTo(h+r,i,l,u-a,l,u),t.bezierCurveTo(l,u+a,h+r,c,h,c),t.bezierCurveTo(h-r,c,e,u+a,e,u)},(i.PolyStar=function(t,e,i,n,o,s){this.x=t,this.y=e,this.radius=i,this.sides=n,this.pointSize=o,this.angle=s}).prototype.exec=function(t){var e=this.x,i=this.y,n=this.radius,o=(this.angle||0)/180*Math.PI,s=this.sides,r=1-(this.pointSize||0),a=Math.PI/s;t.moveTo(e+Math.cos(o)*n,i+Math.sin(o)*n);for(var l=0;s>l;l++)o+=a,1!=r&&t.lineTo(e+Math.cos(o)*n*r,i+Math.sin(o)*n*r),o+=a,t.lineTo(e+Math.cos(o)*n,i+Math.sin(o)*n);t.closePath()},t.beginCmd=new i.BeginPath,createjs.Graphics=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.cacheID=0,this.id=createjs.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._cacheOffsetX=0,this._cacheOffsetY=0,this._filterOffsetX=0,this._filterOffsetY=0,this._cacheScale=1,this._cacheDataURLID=0,this._cacheDataURL=null,this._props=new createjs.DisplayProps,this._rectangle=new createjs.Rectangle,this._bounds=null}var e=createjs.extend(t,createjs.EventDispatcher);t._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],t.suppressCrossDomainErrors=!1,t._snapToPixelEnabled=!1;var i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.getContext&&(t._hitTestCanvas=i,t._hitTestContext=i.getContext("2d"),i.width=i.height=1),t._nextCacheID=1,e.getStage=function(){for(var t=this,e=createjs.Stage;t.parent;)t=t.parent;return t instanceof e?t:null};try{Object.defineProperties(e,{stage:{get:e.getStage}})}catch(n){}e.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},e.draw=function(t,e){var i=this.cacheCanvas;if(e||!i)return!1;var n=this._cacheScale;return t.drawImage(i,this._cacheOffsetX+this._filterOffsetX,this._cacheOffsetY+this._filterOffsetY,i.width/n,i.height/n),!0},e.updateContext=function(e){var i=this,n=i.mask,o=i._props.matrix;n&&n.graphics&&!n.graphics.isEmpty()&&(n.getMatrix(o),e.transform(o.a,o.b,o.c,o.d,o.tx,o.ty),n.graphics.drawAsPath(e),e.clip(),o.invert(),e.transform(o.a,o.b,o.c,o.d,o.tx,o.ty)),this.getMatrix(o);var s=o.tx,r=o.ty;t._snapToPixelEnabled&&i.snapToPixel&&(s=s+(0>s?-.5:.5)|0,r=r+(0>r?-.5:.5)|0),e.transform(o.a,o.b,o.c,o.d,s,r),e.globalAlpha*=i.alpha,i.compositeOperation&&(e.globalCompositeOperation=i.compositeOperation),i.shadow&&this._applyShadow(e,i.shadow)},e.cache=function(t,e,i,n,o){o=o||1,this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),this._cacheWidth=i,this._cacheHeight=n,this._cacheOffsetX=t,this._cacheOffsetY=e,this._cacheScale=o,this.updateCache()},e.updateCache=function(e){
var i=this.cacheCanvas;if(!i)throw"cache() must be called before updateCache()";var n=this._cacheScale,o=this._cacheOffsetX*n,s=this._cacheOffsetY*n,r=this._cacheWidth,a=this._cacheHeight,l=i.getContext("2d"),c=this._getFilterBounds();o+=this._filterOffsetX=c.x,s+=this._filterOffsetY=c.y,r=Math.ceil(r*n)+c.width,a=Math.ceil(a*n)+c.height,r!=i.width||a!=i.height?(i.width=r,i.height=a):e||l.clearRect(0,0,r+1,a+1),l.save(),l.globalCompositeOperation=e,l.setTransform(n,0,0,n,-o,-s),this.draw(l,!0),this._applyFilters(),l.restore(),this.cacheID=t._nextCacheID++},e.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=this._filterOffsetX=this._filterOffsetY=0,this._cacheScale=1},e.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},e.localToGlobal=function(t,e,i){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(t,e,i||new createjs.Point)},e.globalToLocal=function(t,e,i){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(t,e,i||new createjs.Point)},e.localToLocal=function(t,e,i,n){return n=this.localToGlobal(t,e,n),i.globalToLocal(n.x,n.y,n)},e.setTransform=function(t,e,i,n,o,s,r,a,l){return this.x=t||0,this.y=e||0,this.scaleX=null==i?1:i,this.scaleY=null==n?1:n,this.rotation=o||0,this.skewX=s||0,this.skewY=r||0,this.regX=a||0,this.regY=l||0,this},e.getMatrix=function(t){var e=this,i=t&&t.identity()||new createjs.Matrix2D;return e.transformMatrix?i.copy(e.transformMatrix):i.appendTransform(e.x,e.y,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.regX,e.regY)},e.getConcatenatedMatrix=function(t){for(var e=this,i=this.getMatrix(t);e=e.parent;)i.prependMatrix(e.getMatrix(e._props.matrix));return i},e.getConcatenatedDisplayProps=function(t){t=t?t.identity():new createjs.DisplayProps;var e=this,i=e.getMatrix(t.matrix);do t.prepend(e.visible,e.alpha,e.shadow,e.compositeOperation),e!=this&&i.prependMatrix(e.getMatrix(e._props.matrix));while(e=e.parent);return t},e.hitTest=function(e,i){var n=t._hitTestContext;n.setTransform(1,0,0,1,-e,-i),this.draw(n);var o=this._testHit(n);return n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,2,2),o},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var t=this.cacheCanvas;if(t){var e=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,t.width/e,t.height/e)}return null},e.getTransformedBounds=function(){return this._getBounds()},e.setBounds=function(t,e,i,n){null==t&&(this._bounds=t),this._bounds=(this._bounds||new createjs.Rectangle).setValues(t,e,i,n)},e.clone=function(){return this._cloneProps(new t)},e.toString=function(){return"[DisplayObject (name="+this.name+")]"},e._cloneProps=function(t){return t.alpha=this.alpha,t.mouseEnabled=this.mouseEnabled,t.tickEnabled=this.tickEnabled,t.name=this.name,t.regX=this.regX,t.regY=this.regY,t.rotation=this.rotation,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.shadow=this.shadow,t.skewX=this.skewX,t.skewY=this.skewY,t.visible=this.visible,t.x=this.x,t.y=this.y,t.compositeOperation=this.compositeOperation,t.snapToPixel=this.snapToPixel,t.filters=null==this.filters?null:this.filters.slice(0),t.mask=this.mask,t.hitArea=this.hitArea,t.cursor=this.cursor,t._bounds=this._bounds,t},e._applyShadow=function(t,e){e=e||Shadow.identity,t.shadowColor=e.color,t.shadowOffsetX=e.offsetX,t.shadowOffsetY=e.offsetY,t.shadowBlur=e.blur},e._tick=function(t){var e=this._listeners;e&&e.tick&&(t.target=null,t.propagationStopped=t.immediatePropagationStopped=!1,this.dispatchEvent(t))},e._testHit=function(e){try{var i=e.getImageData(0,0,1,1).data[3]>1}catch(n){if(!t.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return i},e._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var t=this.filters.length,e=this.cacheCanvas.getContext("2d"),i=this.cacheCanvas.width,n=this.cacheCanvas.height,o=0;t>o;o++)this.filters[o].applyFilter(e,0,0,i,n)},e._getFilterBounds=function(){var t,e=this.filters,i=this._rectangle.setValues(0,0,0,0);if(!e||!(t=e.length))return i;for(var n=0;t>n;n++){var o=this.filters[n];o.getBounds&&o.getBounds(i)}return i},e._getBounds=function(t,e){return this._transformBounds(this.getBounds(),t,e)},e._transformBounds=function(t,e,i){if(!t)return t;var n=t.x,o=t.y,s=t.width,r=t.height,a=this._props.matrix;a=i?a.identity():this.getMatrix(a),(n||o)&&a.appendTransform(0,0,1,1,0,0,0,-n,-o),e&&a.prependMatrix(e);var l=s*a.a,c=s*a.b,h=r*a.c,u=r*a.d,m=a.tx,p=a.ty,_=m,d=m,f=p,y=p;return(n=l+m)<_?_=n:n>d&&(d=n),(n=l+h+m)<_?_=n:n>d&&(d=n),(n=h+m)<_?_=n:n>d&&(d=n),(o=c+p)<f?f=o:o>y&&(y=o),(o=c+u+p)<f?f=o:o>y&&(y=o),(o=u+p)<f?f=o:o>y&&(y=o),t.setValues(_,f,d-_,y-f)},e._hasMouseEventListener=function(){for(var e=t._MOUSE_EVENTS,i=0,n=e.length;n>i;i++)if(this.hasEventListener(e[i]))return!0;return!!this.cursor},createjs.DisplayObject=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var e=createjs.extend(t,createjs.DisplayObject);e.getNumChildren=function(){return this.children.length};try{Object.defineProperties(e,{numChildren:{get:e.getNumChildren}})}catch(i){}e.initialize=t,e.isVisible=function(){var t=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;for(var i=this.children.slice(),n=0,o=i.length;o>n;n++){var s=i[n];s.isVisible()&&(t.save(),s.updateContext(t),s.draw(t),t.restore())}return!0},e.addChild=function(t){if(null==t)return t;var e=arguments.length;if(e>1){for(var i=0;e>i;i++)this.addChild(arguments[i]);return arguments[e-1]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t),t.dispatchEvent("added"),t},e.addChildAt=function(t,e){var i=arguments.length,n=arguments[i-1];if(0>n||n>this.children.length)return arguments[i-2];if(i>2){for(var o=0;i-1>o;o++)this.addChildAt(arguments[o],n+o);return arguments[i-2]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),t.dispatchEvent("added"),t},e.removeChild=function(t){var e=arguments.length;if(e>1){for(var i=!0,n=0;e>n;n++)i=i&&this.removeChild(arguments[n]);return i}return this.removeChildAt(createjs.indexOf(this.children,t))},e.removeChildAt=function(t){var e=arguments.length;if(e>1){for(var i=[],n=0;e>n;n++)i[n]=arguments[n];i.sort(function(t,e){return e-t});for(var o=!0,n=0;e>n;n++)o=o&&this.removeChildAt(i[n]);return o}if(0>t||t>this.children.length-1)return!1;var s=this.children[t];return s&&(s.parent=null),this.children.splice(t,1),s.dispatchEvent("removed"),!0},e.removeAllChildren=function(){for(var t=this.children;t.length;)this.removeChildAt(0)},e.getChildAt=function(t){return this.children[t]},e.getChildByName=function(t){for(var e=this.children,i=0,n=e.length;n>i;i++)if(e[i].name==t)return e[i];return null},e.sortChildren=function(t){this.children.sort(t)},e.getChildIndex=function(t){return createjs.indexOf(this.children,t)},e.swapChildrenAt=function(t,e){var i=this.children,n=i[t],o=i[e];n&&o&&(i[t]=o,i[e]=n)},e.swapChildren=function(t,e){for(var i,n,o=this.children,s=0,r=o.length;r>s&&(o[s]==t&&(i=s),o[s]==e&&(n=s),null==i||null==n);s++);s!=r&&(o[i]=e,o[n]=t)},e.setChildIndex=function(t,e){var i=this.children,n=i.length;if(!(t.parent!=this||0>e||e>=n)){for(var o=0;n>o&&i[o]!=t;o++);o!=n&&o!=e&&(i.splice(o,1),i.splice(e,0,t))}},e.contains=function(t){for(;t;){if(t==this)return!0;t=t.parent}return!1},e.hitTest=function(t,e){return null!=this.getObjectUnderPoint(t,e)},e.getObjectsUnderPoint=function(t,e,i){var n=[],o=this.localToGlobal(t,e);return this._getObjectsUnderPoint(o.x,o.y,n,i>0,1==i),n},e.getObjectUnderPoint=function(t,e,i){var n=this.localToGlobal(t,e);return this._getObjectsUnderPoint(n.x,n.y,null,i>0,1==i)},e.getBounds=function(){return this._getBounds(null,!0)},e.getTransformedBounds=function(){return this._getBounds()},e.clone=function(e){var i=this._cloneProps(new t);return e&&this._cloneChildren(i),i},e.toString=function(){return"[Container (name="+this.name+")]"},e._tick=function(t){if(this.tickChildren)for(var e=this.children.length-1;e>=0;e--){var i=this.children[e];i.tickEnabled&&i._tick&&i._tick(t)}this.DisplayObject__tick(t)},e._cloneChildren=function(t){t.children.length&&t.removeAllChildren();for(var e=t.children,i=0,n=this.children.length;n>i;i++){var o=this.children[i].clone(!0);o.parent=t,e.push(o)}},e._getObjectsUnderPoint=function(e,i,n,o,s,r){if(r=r||0,!r&&!this._testMask(this,e,i))return null;var a,l=createjs.DisplayObject._hitTestContext;s=s||o&&this._hasMouseEventListener();for(var c=this.children,h=c.length,u=h-1;u>=0;u--){var m=c[u],p=m.hitArea;if(m.visible&&(p||m.isVisible())&&(!o||m.mouseEnabled)&&(p||this._testMask(m,e,i)))if(!p&&m instanceof t){var _=m._getObjectsUnderPoint(e,i,n,o,s,r+1);if(!n&&_)return o&&!this.mouseChildren?this:_}else{if(o&&!s&&!m._hasMouseEventListener())continue;var d=m.getConcatenatedDisplayProps(m._props);if(a=d.matrix,p&&(a.appendMatrix(p.getMatrix(p._props.matrix)),d.alpha=p.alpha),l.globalAlpha=d.alpha,l.setTransform(a.a,a.b,a.c,a.d,a.tx-e,a.ty-i),(p||m).draw(l),!this._testHit(l))continue;if(l.setTransform(1,0,0,1,0,0),l.clearRect(0,0,2,2),!n)return o&&!this.mouseChildren?this:m;n.push(m)}}return null},e._testMask=function(t,e,i){var n=t.mask;if(!n||!n.graphics||n.graphics.isEmpty())return!0;var o=this._props.matrix,s=t.parent;o=s?s.getConcatenatedMatrix(o):o.identity(),o=n.getMatrix(n._props.matrix).prependMatrix(o);var r=createjs.DisplayObject._hitTestContext;return r.setTransform(o.a,o.b,o.c,o.d,o.tx-e,o.ty-i),n.graphics.drawAsPath(r),r.fillStyle="#000",r.fill(),this._testHit(r)?(r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,2,2),!0):!1},e._getBounds=function(t,e){var i=this.DisplayObject_getBounds();if(i)return this._transformBounds(i,t,e);var n=this._props.matrix;n=e?n.identity():this.getMatrix(n),t&&n.prependMatrix(t);for(var o=this.children.length,s=null,r=0;o>r;r++){var a=this.children[r];a.visible&&(i=a._getBounds(n))&&(s?s.extend(i.x,i.y,i.width,i.height):s=i.clone())}return s},createjs.Container=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.Container_constructor(),this.autoClear=!0,this.canvas="string"==typeof t?document.getElementById(t):t,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var e=createjs.extend(t,createjs.Container);e._get_nextStage=function(){return this._nextStage},e._set_nextStage=function(t){this._nextStage&&(this._nextStage._prevStage=null),t&&(t._prevStage=this),this._nextStage=t};try{Object.defineProperties(e,{nextStage:{get:e._get_nextStage,set:e._set_nextStage}})}catch(i){}e.update=function(t){if(this.canvas&&(this.tickOnUpdate&&this.tick(t),!this.dispatchEvent("drawstart"))){createjs.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled;var e=this.drawRect,i=this.canvas.getContext("2d");i.setTransform(1,0,0,1,0,0),this.autoClear&&(e?i.clearRect(e.x,e.y,e.width,e.height):i.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),i.save(),this.drawRect&&(i.beginPath(),i.rect(e.x,e.y,e.width,e.height),i.clip()),this.updateContext(i),this.draw(i,!1),i.restore(),this.dispatchEvent("drawend")}},e.tick=function(t){if(this.tickEnabled&&!this.dispatchEvent("tickstart")){var e=new createjs.Event("tick");if(t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);this._tick(e),this.dispatchEvent("tickend")}},e.handleEvent=function(t){"tick"==t.type&&this.update(t)},e.clear=function(){if(this.canvas){var t=this.canvas.getContext("2d");t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},e.toDataURL=function(t,e){var i,n=this.canvas.getContext("2d"),o=this.canvas.width,s=this.canvas.height;if(t){i=n.getImageData(0,0,o,s);var r=n.globalCompositeOperation;n.globalCompositeOperation="destination-over",n.fillStyle=t,n.fillRect(0,0,o,s)}var a=this.canvas.toDataURL(e||"image/png");return t&&(n.putImageData(i,0,0),n.globalCompositeOperation=r),a},e.enableMouseOver=function(t){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==t&&this._testMouseOver(!0)),null==t)t=20;else if(0>=t)return;var e=this;this._mouseOverIntervalID=setInterval(function(){e._testMouseOver()},1e3/Math.min(50,t))},e.enableDOMEvents=function(t){null==t&&(t=!0);var e,i,n=this._eventListeners;if(!t&&n){for(e in n)i=n[e],i.t.removeEventListener(e,i.f,!1);this._eventListeners=null}else if(t&&!n&&this.canvas){var o=window.addEventListener?window:document,s=this;n=this._eventListeners={},n.mouseup={t:o,f:function(t){s._handleMouseUp(t)}},n.mousemove={t:o,f:function(t){s._handleMouseMove(t)}},n.dblclick={t:this.canvas,f:function(t){s._handleDoubleClick(t)}},n.mousedown={t:this.canvas,f:function(t){s._handleMouseDown(t)}};for(e in n)i=n[e],i.t.addEventListener(e,i.f,!1)}},e.clone=function(){throw"Stage cannot be cloned."},e.toString=function(){return"[Stage (name="+this.name+")]"},e._getElementRect=function(t){var e;try{e=t.getBoundingClientRect()}catch(i){e={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}var n=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),o=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),s=window.getComputedStyle?getComputedStyle(t,null):t.currentStyle,r=parseInt(s.paddingLeft)+parseInt(s.borderLeftWidth),a=parseInt(s.paddingTop)+parseInt(s.borderTopWidth),l=parseInt(s.paddingRight)+parseInt(s.borderRightWidth),c=parseInt(s.paddingBottom)+parseInt(s.borderBottomWidth);return{left:e.left+n+r,right:e.right+n-l,top:e.top+o+a,bottom:e.bottom+o-c}},e._getPointerData=function(t){var e=this._pointerData[t];return e||(e=this._pointerData[t]={x:0,y:0}),e},e._handleMouseMove=function(t){t||(t=window.event),this._handlePointerMove(-1,t,t.pageX,t.pageY)},e._handlePointerMove=function(t,e,i,n,o){if((!this._prevStage||void 0!==o)&&this.canvas){var s=this._nextStage,r=this._getPointerData(t),a=r.inBounds;this._updatePointerPosition(t,e,i,n),(a||r.inBounds||this.mouseMoveOutside)&&(-1===t&&r.inBounds==!a&&this._dispatchMouseEvent(this,a?"mouseleave":"mouseenter",!1,t,r,e),this._dispatchMouseEvent(this,"stagemousemove",!1,t,r,e),this._dispatchMouseEvent(r.target,"pressmove",!0,t,r,e)),s&&s._handlePointerMove(t,e,i,n,null)}},e._updatePointerPosition=function(t,e,i,n){var o=this._getElementRect(this.canvas);i-=o.left,n-=o.top;var s=this.canvas.width,r=this.canvas.height;i/=(o.right-o.left)/s,n/=(o.bottom-o.top)/r;var a=this._getPointerData(t);(a.inBounds=i>=0&&n>=0&&s-1>=i&&r-1>=n)?(a.x=i,a.y=n):this.mouseMoveOutside&&(a.x=0>i?0:i>s-1?s-1:i,a.y=0>n?0:n>r-1?r-1:n),a.posEvtObj=e,a.rawX=i,a.rawY=n,(t===this._primaryPointerID||-1===t)&&(this.mouseX=a.x,this.mouseY=a.y,this.mouseInBounds=a.inBounds)},e._handleMouseUp=function(t){this._handlePointerUp(-1,t,!1)},e._handlePointerUp=function(t,e,i,n){var o=this._nextStage,s=this._getPointerData(t);if(!this._prevStage||void 0!==n){s.down&&this._dispatchMouseEvent(this,"stagemouseup",!1,t,s,e),s.down=!1;var r=null,a=s.target;n||!a&&!o||(r=this._getObjectsUnderPoint(s.x,s.y,null,!0)),r==a&&this._dispatchMouseEvent(a,"click",!0,t,s,e),this._dispatchMouseEvent(a,"pressup",!0,t,s,e),i?(t==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[t]):s.target=null,o&&o._handlePointerUp(t,e,i,n||r&&this)}},e._handleMouseDown=function(t){this._handlePointerDown(-1,t,t.pageX,t.pageY)},e._handlePointerDown=function(t,e,i,n,o){this.preventSelection&&e.preventDefault(),(null==this._primaryPointerID||-1===t)&&(this._primaryPointerID=t),null!=n&&this._updatePointerPosition(t,e,i,n);var s=null,r=this._nextStage,a=this._getPointerData(t);a.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,t,a,e),a.down=!0),o||(s=a.target=this._getObjectsUnderPoint(a.x,a.y,null,!0),this._dispatchMouseEvent(a.target,"mousedown",!0,t,a,e)),r&&r._handlePointerDown(t,e,i,n,o||s&&this)},e._testMouseOver=function(t,e,i){if(!this._prevStage||void 0!==e){var n=this._nextStage;if(!this._mouseOverIntervalID)return void(n&&n._testMouseOver(t,e,i));var o=this._getPointerData(-1);if(o&&(t||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var s,r,a,l=o.posEvtObj,c=i||l&&l.target==this.canvas,h=null,u=-1,m="";!e&&(t||this.mouseInBounds&&c)&&(h=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var p=this._mouseOverTarget||[],_=p[p.length-1],d=this._mouseOverTarget=[];for(s=h;s;)d.unshift(s),null!=s.cursor&&(m=s.cursor),s=s.parent;for(this.canvas.style.cursor=m,!e&&i&&(i.canvas.style.cursor=m),r=0,a=d.length;a>r&&d[r]==p[r];r++)u=r;for(_!=h&&this._dispatchMouseEvent(_,"mouseout",!0,-1,o,l),r=p.length-1;r>u;r--)this._dispatchMouseEvent(p[r],"rollout",!1,-1,o,l);for(r=d.length-1;r>u;r--)this._dispatchMouseEvent(d[r],"rollover",!1,-1,o,l);_!=h&&this._dispatchMouseEvent(h,"mouseover",!0,-1,o,l),n&&n._testMouseOver(t,e||h&&this,i||c&&this)}}},e._handleDoubleClick=function(t,e){var i=null,n=this._nextStage,o=this._getPointerData(-1);e||(i=this._getObjectsUnderPoint(o.x,o.y,null,!0),this._dispatchMouseEvent(i,"dblclick",!0,-1,o,t)),n&&n._handleDoubleClick(t,e||i&&this)},e._dispatchMouseEvent=function(t,e,i,n,o,s){if(t&&(i||t.hasEventListener(e))){var r=new createjs.MouseEvent(e,i,!1,o.x,o.y,s,n,n===this._primaryPointerID||-1===n,o.rawX,o.rawY);t.dispatchEvent(r)}},createjs.Stage=createjs.promote(t,"Container")}(),this.createjs=this.createjs||{},function(){function t(t){this.DisplayObject_constructor(),"string"==typeof t?(this.image=document.createElement("img"),this.image.src=t):this.image=t,this.sourceRect=null}var e=createjs.extend(t,createjs.DisplayObject);e.initialize=t,e.isVisible=function(){var t=this.cacheCanvas||this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e)||!this.image)return!0;var i=this.image,n=this.sourceRect;if(n){var o=n.x,s=n.y,r=o+n.width,a=s+n.height,l=0,c=0,h=i.width,u=i.height;0>o&&(l-=o,o=0),r>h&&(r=h),0>s&&(c-=s,s=0),a>u&&(a=u),t.drawImage(i,o,s,r-o,a-s,l,c,r-o,a-s)}else t.drawImage(i,0,0);return!0},e.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;var e=this.sourceRect||this.image,i=this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2);return i?this._rectangle.setValues(0,0,e.width,e.height):null},e.clone=function(){var e=new t(this.image);return this.sourceRect&&(e.sourceRect=this.sourceRect.clone()),this._cloneProps(e),e},e.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=t,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,e&&this.gotoAndPlay(e)}var e=createjs.extend(t,createjs.DisplayObject);e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;this._normalizeFrame();var i=this.spriteSheet.getFrame(0|this._currentFrame);if(!i)return!1;var n=i.rect;return n.width&&n.height&&t.drawImage(i.image,n.x,n.y,n.width,n.height,-i.regX,-i.regY,n.width,n.height),!0},e.play=function(){this.paused=!1},e.stop=function(){this.paused=!0},e.gotoAndPlay=function(t){this.paused=!1,this._skipAdvance=!0,this._goto(t)},e.gotoAndStop=function(t){this.paused=!0,this._goto(t)},e.advance=function(t){var e=this.framerate||this.spriteSheet.framerate,i=e&&null!=t?t/(1e3/e):1;this._normalizeFrame(i)},e.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},e.clone=function(){return this._cloneProps(new t(this.spriteSheet))},e.toString=function(){return"[Sprite (name="+this.name+")]"},e._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.currentFrame=this.currentFrame,t.currentAnimation=this.currentAnimation,t.paused=this.paused,t.currentAnimationFrame=this.currentAnimationFrame,t.framerate=this.framerate,t._animation=this._animation,t._currentFrame=this._currentFrame,t._skipAdvance=this._skipAdvance,t},e._tick=function(t){this.paused||(this._skipAdvance||this.advance(t&&t.delta),this._skipAdvance=!1),this.DisplayObject__tick(t)},e._normalizeFrame=function(t){t=t||0;var e,i=this._animation,n=this.paused,o=this._currentFrame;if(i){var s=i.speed||1,r=this.currentAnimationFrame;if(e=i.frames.length,r+t*s>=e){var a=i.next;if(this._dispatchAnimationEnd(i,o,n,a,e-1))return;if(a)return this._goto(a,t-(e-r)/s);this.paused=!0,r=i.frames.length-1}else r+=t*s;this.currentAnimationFrame=r,this._currentFrame=i.frames[0|r]}else if(o=this._currentFrame+=t,e=this.spriteSheet.getNumFrames(),o>=e&&e>0&&!this._dispatchAnimationEnd(i,o,n,e-1)&&(this._currentFrame-=e)>=e)return this._normalizeFrame();o=0|this._currentFrame,this.currentFrame!=o&&(this.currentFrame=o,this.dispatchEvent("change"))},e._dispatchAnimationEnd=function(t,e,i,n,o){var s=t?t.name:null;if(this.hasEventListener("animationend")){var r=new createjs.Event("animationend");r.name=s,r.next=n,this.dispatchEvent(r)}var a=this._animation!=t||this._currentFrame!=e;return a||i||!this.paused||(this.currentAnimationFrame=o,a=!0),a},e._goto=function(t,e){if(this.currentAnimationFrame=0,isNaN(t)){var i=this.spriteSheet.getAnimation(t);i&&(this._animation=i,this.currentAnimation=t,this._normalizeFrame(e))}else this.currentAnimation=this._animation=null,this._currentFrame=t,this._normalizeFrame()},createjs.Sprite=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.DisplayObject_constructor(),this.graphics=t?t:new createjs.Graphics}var e=createjs.extend(t,createjs.DisplayObject);e.isVisible=function(){var t=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){return this.DisplayObject_draw(t,e)?!0:(this.graphics.draw(t,this),!0)},e.clone=function(e){var i=e&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new t(i))},e.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.DisplayObject_constructor(),this.text=t,this.font=e,this.color=i,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var e=createjs.extend(t,createjs.DisplayObject),i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.getContext&&(t._workingContext=i.getContext("2d"),i.width=i.height=1),t.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},t.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},e.isVisible=function(){var t=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;var i=this.color||"#000";return this.outline?(t.strokeStyle=i,t.lineWidth=1*this.outline):t.fillStyle=i,this._drawText(this._prepContext(t)),!0},e.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},e.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},e.getMeasuredHeight=function(){return this._drawText(null,{}).height},e.getBounds=function(){var e=this.DisplayObject_getBounds();if(e)return e;if(null==this.text||""==this.text)return null;var i=this._drawText(null,{}),n=this.maxWidth&&this.maxWidth<i.width?this.maxWidth:i.width,o=n*t.H_OFFSETS[this.textAlign||"left"],s=this.lineHeight||this.getMeasuredLineHeight(),r=s*t.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(o,r,n,i.height)},e.getMetrics=function(){var e={lines:[]};return e.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),e.vOffset=e.lineHeight*t.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,e,e.lines)},e.clone=function(){return this._cloneProps(new t(this.text,this.font,this.color))},e.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},e._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.maxWidth=this.maxWidth,t.outline=this.outline,t.lineHeight=this.lineHeight,t.lineWidth=this.lineWidth,t},e._prepContext=function(t){return t.font=this.font||"10px sans-serif",t.textAlign=this.textAlign||"left",t.textBaseline=this.textBaseline||"top",t},e._drawText=function(e,i,n){var o=!!e;o||(e=t._workingContext,e.save(),this._prepContext(e));for(var s=this.lineHeight||this.getMeasuredLineHeight(),r=0,a=0,l=String(this.text).split(/(?:\r\n|\r|\n)/),c=0,h=l.length;h>c;c++){var u=l[c],m=null;if(null!=this.lineWidth&&(m=e.measureText(u).width)>this.lineWidth){var p=u.split(/(\s)/);u=p[0],m=e.measureText(u).width;for(var _=1,d=p.length;d>_;_+=2){var f=e.measureText(p[_]+p[_+1]).width;m+f>this.lineWidth?(o&&this._drawTextLine(e,u,a*s),n&&n.push(u),m>r&&(r=m),u=p[_+1],m=e.measureText(u).width,a++):(u+=p[_]+p[_+1],m+=f)}}o&&this._drawTextLine(e,u,a*s),n&&n.push(u),i&&null==m&&(m=e.measureText(u).width),m>r&&(r=m),a++}return i&&(i.width=r,i.height=a*s),o||e.restore(),i},e._drawTextLine=function(t,e,i){this.outline?t.strokeText(e,0,i,this.maxWidth||65535):t.fillText(e,0,i,this.maxWidth||65535)},e._getMeasuredWidth=function(e){var i=t._workingContext;i.save();var n=this._prepContext(i).measureText(e).width;return i.restore(),n},createjs.Text=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.Container_constructor(),this.text=t||"",this.spriteSheet=e,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0}}var e=createjs.extend(t,createjs.Container);t.maxPoolSize=100,t._spritePool=[],e.draw=function(t,e){this.DisplayObject_draw(t,e)||(this._updateText(),this.Container_draw(t,e))},e.getBounds=function(){return this._updateText(),this.Container_getBounds()},e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY&&t)},e.clone=function(){return this._cloneProps(new t(this.text,this.spriteSheet))},e.addChild=e.addChildAt=e.removeChild=e.removeChildAt=e.removeAllChildren=function(){},e._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.lineHeight=this.lineHeight,t.letterSpacing=this.letterSpacing,t.spaceWidth=this.spaceWidth,t},e._getFrameIndex=function(t,e){var i,n=e.getAnimation(t);return n||(t!=(i=t.toUpperCase())||t!=(i=t.toLowerCase())||(i=null),i&&(n=e.getAnimation(i))),n&&n.frames[0]},e._getFrame=function(t,e){var i=this._getFrameIndex(t,e);return null==i?i:e.getFrame(i)},e._getLineHeight=function(t){var e=this._getFrame("1",t)||this._getFrame("T",t)||this._getFrame("L",t)||t.getFrame(0);return e?e.rect.height:1},e._getSpaceWidth=function(t){var e=this._getFrame("1",t)||this._getFrame("l",t)||this._getFrame("e",t)||this._getFrame("a",t)||t.getFrame(0);return e?e.rect.width:1},e._updateText=function(){var e,i=0,n=0,o=this._oldProps,s=!1,r=this.spaceWidth,a=this.lineHeight,l=this.spriteSheet,c=t._spritePool,h=this.children,u=0,m=h.length;for(var p in o)o[p]!=this[p]&&(o[p]=this[p],s=!0);if(s){var _=!!this._getFrame(" ",l);_||r||(r=this._getSpaceWidth(l)),a||(a=this._getLineHeight(l));for(var d=0,f=this.text.length;f>d;d++){var y=this.text.charAt(d);if(" "!=y||_)if("\n"!=y&&"\r"!=y){var x=this._getFrameIndex(y,l);null!=x&&(m>u?e=h[u]:(h.push(e=c.length?c.pop():new createjs.Sprite),e.parent=this,m++),e.spriteSheet=l,e.gotoAndStop(x),e.x=i,e.y=n,u++,i+=e.getBounds().width+this.letterSpacing)}else"\r"==y&&"\n"==this.text.charAt(d+1)&&d++,i=0,n+=a;else i+=r}for(;m>u;)c.push(e=h.pop()),e.parent=null,m--;c.length>t.maxPoolSize&&(c.length=t.maxPoolSize)}},createjs.BitmapText=createjs.promote(t,"Container")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"SpriteSheetUtils cannot be instantiated"}var e=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");e.getContext&&(t._workingCanvas=e,t._workingContext=e.getContext("2d"),e.width=e.height=1),t.addFlippedFrames=function(e,i,n,o){if(i||n||o){var s=0;i&&t._flip(e,++s,!0,!1),n&&t._flip(e,++s,!1,!0),o&&t._flip(e,++s,!0,!0)}},t.extractFrame=function(e,i){isNaN(i)&&(i=e.getAnimation(i).frames[0]);var n=e.getFrame(i);if(!n)return null;var o=n.rect,s=t._workingCanvas;s.width=o.width,s.height=o.height,t._workingContext.drawImage(n.image,o.x,o.y,o.width,o.height,0,0,o.width,o.height);var r=document.createElement("img");return r.src=s.toDataURL("image/png"),r},t.mergeAlpha=function(t,e,i){i||(i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),i.width=Math.max(e.width,t.width),i.height=Math.max(e.height,t.height);var n=i.getContext("2d");return n.save(),n.drawImage(t,0,0),n.globalCompositeOperation="destination-in",n.drawImage(e,0,0),n.restore(),i},t._flip=function(e,i,n,o){for(var s=e._images,r=t._workingCanvas,a=t._workingContext,l=s.length/i,c=0;l>c;c++){var h=s[c];h.__tmp=c,a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,r.width+1,r.height+1),r.width=h.width,r.height=h.height,a.setTransform(n?-1:1,0,0,o?-1:1,n?h.width:0,o?h.height:0),a.drawImage(h,0,0);var u=document.createElement("img");u.src=r.toDataURL("image/png"),u.width=h.width,u.height=h.height,s.push(u)}var m=e._frames,p=m.length/i;for(c=0;p>c;c++){h=m[c];var _=h.rect.clone();u=s[h.image.__tmp+l*i];var d={image:u,rect:_,regX:h.regX,regY:h.regY};n&&(_.x=u.width-_.x-_.width,d.regX=_.width-h.regX),o&&(_.y=u.height-_.y-_.height,d.regY=_.height-h.regY),m.push(d)}var f="_"+(n?"h":"")+(o?"v":""),y=e._animations,x=e._data,g=y.length/i;for(c=0;g>c;c++){var v=y[c];h=x[v];var b={name:v+f,speed:h.speed,next:h.next,frames:[]};h.next&&(b.next+=f),m=h.frames;for(var w=0,C=m.length;C>w;w++)b.frames.push(m[w]+p*i);x[b.name]=b,y.push(b.name)}},createjs.SpriteSheetUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var e=createjs.extend(t,createjs.EventDispatcher);t.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",t.ERR_RUNNING="a build is already running",e.addFrame=function(e,i,n,o,s){if(this._data)throw t.ERR_RUNNING;var r=i||e.bounds||e.nominalBounds;return!r&&e.getBounds&&(r=e.getBounds()),r?(n=n||1,this._frames.push({source:e,sourceRect:r,scale:n,funct:o,data:s,index:this._frames.length,height:r.height*n})-1):null},e.addAnimation=function(e,i,n,o){if(this._data)throw t.ERR_RUNNING;this._animations[e]={frames:i,next:n,frequency:o}},e.addMovieClip=function(e,i,n,o,s,r){if(this._data)throw t.ERR_RUNNING;var a=e.frameBounds,l=i||e.bounds||e.nominalBounds;if(!l&&e.getBounds&&(l=e.getBounds()),l||a){var c,h,u=this._frames.length,m=e.timeline.duration;for(c=0;m>c;c++){var p=a&&a[c]?a[c]:l;this.addFrame(e,p,n,this._setupMovieClipFrame,{i:c,f:o,d:s})}var _=e.timeline._labels,d=[];for(var f in _)d.push({index:_[f],label:f});if(d.length)for(d.sort(function(t,e){return t.index-e.index}),c=0,h=d.length;h>c;c++){for(var y=d[c].label,x=u+d[c].index,g=u+(c==h-1?m:d[c+1].index),v=[],b=x;g>b;b++)v.push(b);(!r||(y=r(y,e,x,g)))&&this.addAnimation(y,v,!0)}}},e.build=function(){if(this._data)throw t.ERR_RUNNING;for(this._startBuild();this._drawNext(););
return this._endBuild(),this.spriteSheet},e.buildAsync=function(e){if(this._data)throw t.ERR_RUNNING;this.timeSlice=e,this._startBuild();var i=this;this._timerID=setTimeout(function(){i._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},e.stopAsync=function(){clearTimeout(this._timerID),this._data=null},e.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},e.toString=function(){return"[SpriteSheetBuilder]"},e._startBuild=function(){var e=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var i=[];this._data={images:[],frames:i,animations:this._animations};var n=this._frames.slice();if(n.sort(function(t,e){return t.height<=e.height?-1:1}),n[n.length-1].height+2*e>this.maxHeight)throw t.ERR_DIMENSIONS;for(var o=0,s=0,r=0;n.length;){var a=this._fillRow(n,o,r,i,e);if(a.w>s&&(s=a.w),o+=a.h,!a.h||!n.length){var l=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");l.width=this._getSize(s,this.maxWidth),l.height=this._getSize(o,this.maxHeight),this._data.images[r]=l,a.h||(s=o=0,r++)}}},e._setupMovieClipFrame=function(t,e){var i=t.actionsEnabled;t.actionsEnabled=!1,t.gotoAndStop(e.i),t.actionsEnabled=i,e.f&&e.f(t,e.d,e.i)},e._getSize=function(t,e){for(var i=4;Math.pow(2,++i)<t;);return Math.min(e,Math.pow(2,i))},e._fillRow=function(e,i,n,o,s){var r=this.maxWidth,a=this.maxHeight;i+=s;for(var l=a-i,c=s,h=0,u=e.length-1;u>=0;u--){var m=e[u],p=this._scale*m.scale,_=m.sourceRect,d=m.source,f=Math.floor(p*_.x-s),y=Math.floor(p*_.y-s),x=Math.ceil(p*_.height+2*s),g=Math.ceil(p*_.width+2*s);if(g>r)throw t.ERR_DIMENSIONS;x>l||c+g>r||(m.img=n,m.rect=new createjs.Rectangle(c,i,g,x),h=h||x,e.splice(u,1),o[m.index]=[c,i,g,x,n,Math.round(-f+p*d.regX-s),Math.round(-y+p*d.regY-s)],c+=g)}return{w:c,h:h}},e._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},e._run=function(){for(var t=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),e=(new Date).getTime()+t,i=!1;e>(new Date).getTime();)if(!this._drawNext()){i=!0;break}if(i)this._endBuild();else{var n=this;this._timerID=setTimeout(function(){n._run()},50-t)}var o=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var s=new createjs.Event("progress");s.progress=o,this.dispatchEvent(s)}},e._drawNext=function(){var t=this._frames[this._index],e=t.scale*this._scale,i=t.rect,n=t.sourceRect,o=this._data.images[t.img],s=o.getContext("2d");return t.funct&&t.funct(t.source,t.data),s.save(),s.beginPath(),s.rect(i.x,i.y,i.width,i.height),s.clip(),s.translate(Math.ceil(i.x-n.x*e),Math.ceil(i.y-n.y*e)),s.scale(e,e),t.source.draw(s),s.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.DisplayObject_constructor(),"string"==typeof t&&(t=document.getElementById(t)),this.mouseEnabled=!1;var e=t.style;e.position="absolute",e.transformOrigin=e.WebkitTransformOrigin=e.msTransformOrigin=e.MozTransformOrigin=e.OTransformOrigin="0% 0%",this.htmlElement=t,this._oldProps=null}var e=createjs.extend(t,createjs.DisplayObject);e.isVisible=function(){return null!=this.htmlElement},e.draw=function(){return!0},e.cache=function(){},e.uncache=function(){},e.updateCache=function(){},e.hitTest=function(){},e.localToGlobal=function(){},e.globalToLocal=function(){},e.localToLocal=function(){},e.clone=function(){throw"DOMElement cannot be cloned."},e.toString=function(){return"[DOMElement (name="+this.name+")]"},e._tick=function(t){var e=this.getStage();e&&e.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(t)},e._handleDrawEnd=function(){var t=this.htmlElement;if(t){var e=t.style,i=this.getConcatenatedDisplayProps(this._props),n=i.matrix,o=i.visible?"visible":"hidden";if(o!=e.visibility&&(e.visibility=o),i.visible){var s=this._oldProps,r=s&&s.matrix,a=1e4;if(!r||!r.equals(n)){var l="matrix("+(n.a*a|0)/a+","+(n.b*a|0)/a+","+(n.c*a|0)/a+","+(n.d*a|0)/a+","+(n.tx+.5|0);e.transform=e.WebkitTransform=e.OTransform=e.msTransform=l+","+(n.ty+.5|0)+")",e.MozTransform=l+"px,"+(n.ty+.5|0)+"px)",s||(s=this._oldProps=new createjs.DisplayProps(!0,NaN)),s.matrix.copy(n)}s.alpha!=i.alpha&&(e.opacity=""+(i.alpha*a|0)/a,s.alpha=i.alpha)}}},createjs.DOMElement=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){}var e=t.prototype;e.getBounds=function(t){return t},e.applyFilter=function(t,e,i,n,o,s,r,a){s=s||t,null==r&&(r=e),null==a&&(a=i);try{var l=t.getImageData(e,i,n,o)}catch(c){return!1}return this._applyFilter(l)?(s.putImageData(l,r,a),!0):!1},e.toString=function(){return"[Filter]"},e.clone=function(){return new t},e._applyFilter=function(){return!0},createjs.Filter=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){(isNaN(t)||0>t)&&(t=0),(isNaN(e)||0>e)&&(e=0),(isNaN(i)||1>i)&&(i=1),this.blurX=0|t,this.blurY=0|e,this.quality=0|i}var e=createjs.extend(t,createjs.Filter);t.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],t.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],e.getBounds=function(t){var e=0|this.blurX,i=0|this.blurY;if(0>=e&&0>=i)return t;var n=Math.pow(this.quality,.2);return(t||new createjs.Rectangle).pad(e*n+1,i*n+1,e*n+1,i*n+1)},e.clone=function(){return new t(this.blurX,this.blurY,this.quality)},e.toString=function(){return"[BlurFilter]"},e._applyFilter=function(e){var i=this.blurX>>1;if(isNaN(i)||0>i)return!1;var n=this.blurY>>1;if(isNaN(n)||0>n)return!1;if(0==i&&0==n)return!1;var o=this.quality;(isNaN(o)||1>o)&&(o=1),o|=0,o>3&&(o=3),1>o&&(o=1);var s=e.data,r=0,a=0,l=0,c=0,h=0,u=0,m=0,p=0,_=0,d=0,f=0,y=0,x=0,g=0,v=0,b=i+i+1|0,w=n+n+1|0,C=0|e.width,D=0|e.height,S=C-1|0,B=D-1|0,A=i+1|0,M=n+1|0,T={r:0,b:0,g:0,a:0},I=T;for(l=1;b>l;l++)I=I.n={r:0,b:0,g:0,a:0};I.n=T;var V={r:0,b:0,g:0,a:0},L=V;for(l=1;w>l;l++)L=L.n={r:0,b:0,g:0,a:0};L.n=V;for(var E=null,P=0|t.MUL_TABLE[i],k=0|t.SHG_TABLE[i],F=0|t.MUL_TABLE[n],j=0|t.SHG_TABLE[n];o-->0;){m=u=0;var R=P,G=k;for(a=D;--a>-1;){for(p=A*(y=s[0|u]),_=A*(x=s[u+1|0]),d=A*(g=s[u+2|0]),f=A*(v=s[u+3|0]),I=T,l=A;--l>-1;)I.r=y,I.g=x,I.b=g,I.a=v,I=I.n;for(l=1;A>l;l++)c=u+((l>S?S:l)<<2)|0,p+=I.r=s[c],_+=I.g=s[c+1],d+=I.b=s[c+2],f+=I.a=s[c+3],I=I.n;for(E=T,r=0;C>r;r++)s[u++]=p*R>>>G,s[u++]=_*R>>>G,s[u++]=d*R>>>G,s[u++]=f*R>>>G,c=m+((c=r+i+1)<S?c:S)<<2,p-=E.r-(E.r=s[c]),_-=E.g-(E.g=s[c+1]),d-=E.b-(E.b=s[c+2]),f-=E.a-(E.a=s[c+3]),E=E.n;m+=C}for(R=F,G=j,r=0;C>r;r++){for(u=r<<2|0,p=M*(y=s[u])|0,_=M*(x=s[u+1|0])|0,d=M*(g=s[u+2|0])|0,f=M*(v=s[u+3|0])|0,L=V,l=0;M>l;l++)L.r=y,L.g=x,L.b=g,L.a=v,L=L.n;for(h=C,l=1;n>=l;l++)u=h+r<<2,p+=L.r=s[u],_+=L.g=s[u+1],d+=L.b=s[u+2],f+=L.a=s[u+3],L=L.n,B>l&&(h+=C);if(u=r,E=V,o>0)for(a=0;D>a;a++)c=u<<2,s[c+3]=v=f*R>>>G,v>0?(s[c]=p*R>>>G,s[c+1]=_*R>>>G,s[c+2]=d*R>>>G):s[c]=s[c+1]=s[c+2]=0,c=r+((c=a+M)<B?c:B)*C<<2,p-=E.r-(E.r=s[c]),_-=E.g-(E.g=s[c+1]),d-=E.b-(E.b=s[c+2]),f-=E.a-(E.a=s[c+3]),E=E.n,u+=C;else for(a=0;D>a;a++)c=u<<2,s[c+3]=v=f*R>>>G,v>0?(v=255/v,s[c]=(p*R>>>G)*v,s[c+1]=(_*R>>>G)*v,s[c+2]=(d*R>>>G)*v):s[c]=s[c+1]=s[c+2]=0,c=r+((c=a+M)<B?c:B)*C<<2,p-=E.r-(E.r=s[c]),_-=E.g-(E.g=s[c+1]),d-=E.b-(E.b=s[c+2]),f-=E.a-(E.a=s[c+3]),E=E.n,u+=C}}return!0},createjs.BlurFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.alphaMap=t,this._alphaMap=null,this._mapData=null}var e=createjs.extend(t,createjs.Filter);e.clone=function(){var e=new t(this.alphaMap);return e._alphaMap=this._alphaMap,e._mapData=this._mapData,e},e.toString=function(){return"[AlphaMapFilter]"},e._applyFilter=function(t){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var e=t.data,i=this._mapData,n=0,o=e.length;o>n;n+=4)e[n+3]=i[n]||0;return!0},e._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var t,e=this._alphaMap=this.alphaMap,i=e;e instanceof HTMLCanvasElement?t=i.getContext("2d"):(i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),i.width=e.width,i.height=e.height,t=i.getContext("2d"),t.drawImage(e,0,0));try{var n=t.getImageData(0,0,e.width,e.height)}catch(o){return!1}return this._mapData=n.data,!0},createjs.AlphaMapFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.mask=t}var e=createjs.extend(t,createjs.Filter);e.applyFilter=function(t,e,i,n,o,s,r,a){return this.mask?(s=s||t,null==r&&(r=e),null==a&&(a=i),s.save(),t!=s?!1:(s.globalCompositeOperation="destination-in",s.drawImage(this.mask,r,a),s.restore(),!0)):!0},e.clone=function(){return new t(this.mask)},e.toString=function(){return"[AlphaMaskFilter]"},createjs.AlphaMaskFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,n,o,s,r,a){this.redMultiplier=null!=t?t:1,this.greenMultiplier=null!=e?e:1,this.blueMultiplier=null!=i?i:1,this.alphaMultiplier=null!=n?n:1,this.redOffset=o||0,this.greenOffset=s||0,this.blueOffset=r||0,this.alphaOffset=a||0}var e=createjs.extend(t,createjs.Filter);e.toString=function(){return"[ColorFilter]"},e.clone=function(){return new t(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},e._applyFilter=function(t){for(var e=t.data,i=e.length,n=0;i>n;n+=4)e[n]=e[n]*this.redMultiplier+this.redOffset,e[n+1]=e[n+1]*this.greenMultiplier+this.greenOffset,e[n+2]=e[n+2]*this.blueMultiplier+this.blueOffset,e[n+3]=e[n+3]*this.alphaMultiplier+this.alphaOffset;return!0},createjs.ColorFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,n){this.setColor(t,e,i,n)}var e=t.prototype;t.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],t.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],t.LENGTH=t.IDENTITY_MATRIX.length,e.setColor=function(t,e,i,n){return this.reset().adjustColor(t,e,i,n)},e.reset=function(){return this.copy(t.IDENTITY_MATRIX)},e.adjustColor=function(t,e,i,n){return this.adjustHue(n),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i)},e.adjustBrightness=function(t){return 0==t||isNaN(t)?this:(t=this._cleanValue(t,255),this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1]),this)},e.adjustContrast=function(e){if(0==e||isNaN(e))return this;e=this._cleanValue(e,100);var i;return 0>e?i=127+e/100*127:(i=e%1,i=0==i?t.DELTA_INDEX[e]:t.DELTA_INDEX[e<<0]*(1-i)+t.DELTA_INDEX[(e<<0)+1]*i,i=127*i+127),this._multiplyMatrix([i/127,0,0,0,.5*(127-i),0,i/127,0,0,.5*(127-i),0,0,i/127,0,.5*(127-i),0,0,0,1,0,0,0,0,0,1]),this},e.adjustSaturation=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,100);var e=1+(t>0?3*t/100:t/100),i=.3086,n=.6094,o=.082;return this._multiplyMatrix([i*(1-e)+e,n*(1-e),o*(1-e),0,0,i*(1-e),n*(1-e)+e,o*(1-e),0,0,i*(1-e),n*(1-e),o*(1-e)+e,0,0,0,0,0,1,0,0,0,0,0,1]),this},e.adjustHue=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,180)/180*Math.PI;var e=Math.cos(t),i=Math.sin(t),n=.213,o=.715,s=.072;return this._multiplyMatrix([n+e*(1-n)+i*-n,o+e*-o+i*-o,s+e*-s+i*(1-s),0,0,n+e*-n+.143*i,o+e*(1-o)+.14*i,s+e*-s+i*-.283,0,0,n+e*-n+i*-(1-n),o+e*-o+i*o,s+e*(1-s)+i*s,0,0,0,0,0,1,0,0,0,0,0,1]),this},e.concat=function(e){return e=this._fixMatrix(e),e.length!=t.LENGTH?this:(this._multiplyMatrix(e),this)},e.clone=function(){return(new t).copy(this)},e.toArray=function(){for(var e=[],i=0,n=t.LENGTH;n>i;i++)e[i]=this[i];return e},e.copy=function(e){for(var i=t.LENGTH,n=0;i>n;n++)this[n]=e[n];return this},e.toString=function(){return"[ColorMatrix]"},e._multiplyMatrix=function(t){var e,i,n,o=[];for(e=0;5>e;e++){for(i=0;5>i;i++)o[i]=this[i+5*e];for(i=0;5>i;i++){var s=0;for(n=0;5>n;n++)s+=t[i+5*n]*o[n];this[i+5*e]=s}}},e._cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},e._fixMatrix=function(e){return e instanceof t&&(e=e.toArray()),e.length<t.LENGTH?e=e.slice(0,e.length).concat(t.IDENTITY_MATRIX.slice(e.length,t.LENGTH)):e.length>t.LENGTH&&(e=e.slice(0,t.LENGTH)),e},createjs.ColorMatrix=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.matrix=t}var e=createjs.extend(t,createjs.Filter);e.toString=function(){return"[ColorMatrixFilter]"},e.clone=function(){return new t(this.matrix)},e._applyFilter=function(t){for(var e,i,n,o,s=t.data,r=s.length,a=this.matrix,l=a[0],c=a[1],h=a[2],u=a[3],m=a[4],p=a[5],_=a[6],d=a[7],f=a[8],y=a[9],x=a[10],g=a[11],v=a[12],b=a[13],w=a[14],C=a[15],D=a[16],S=a[17],B=a[18],A=a[19],M=0;r>M;M+=4)e=s[M],i=s[M+1],n=s[M+2],o=s[M+3],s[M]=e*l+i*c+n*h+o*u+m,s[M+1]=e*p+i*_+n*d+o*f+y,s[M+2]=e*x+i*g+n*v+o*b+w,s[M+3]=e*C+i*D+n*S+o*B+A;return!0},createjs.ColorMatrixFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Touch cannot be instantiated"}t.isSupported=function(){return!!("ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)},t.enable=function(e,i,n){return e&&e.canvas&&t.isSupported()?e.__touch?!0:(e.__touch={pointers:{},multitouch:!i,preventDefault:!n,count:0},"ontouchstart"in window?t._IOS_enable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&t._IE_enable(e),!0):!1},t.disable=function(e){e&&("ontouchstart"in window?t._IOS_disable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&t._IE_disable(e),delete e.__touch)},t._IOS_enable=function(e){var i=e.canvas,n=e.__touch.f=function(i){t._IOS_handleEvent(e,i)};i.addEventListener("touchstart",n,!1),i.addEventListener("touchmove",n,!1),i.addEventListener("touchend",n,!1),i.addEventListener("touchcancel",n,!1)},t._IOS_disable=function(t){var e=t.canvas;if(e){var i=t.__touch.f;e.removeEventListener("touchstart",i,!1),e.removeEventListener("touchmove",i,!1),e.removeEventListener("touchend",i,!1),e.removeEventListener("touchcancel",i,!1)}},t._IOS_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();for(var i=e.changedTouches,n=e.type,o=0,s=i.length;s>o;o++){var r=i[o],a=r.identifier;r.target==t.canvas&&("touchstart"==n?this._handleStart(t,a,e,r.pageX,r.pageY):"touchmove"==n?this._handleMove(t,a,e,r.pageX,r.pageY):("touchend"==n||"touchcancel"==n)&&this._handleEnd(t,a,e))}}},t._IE_enable=function(e){var i=e.canvas,n=e.__touch.f=function(i){t._IE_handleEvent(e,i)};void 0===window.navigator.pointerEnabled?(i.addEventListener("MSPointerDown",n,!1),window.addEventListener("MSPointerMove",n,!1),window.addEventListener("MSPointerUp",n,!1),window.addEventListener("MSPointerCancel",n,!1),e.__touch.preventDefault&&(i.style.msTouchAction="none")):(i.addEventListener("pointerdown",n,!1),window.addEventListener("pointermove",n,!1),window.addEventListener("pointerup",n,!1),window.addEventListener("pointercancel",n,!1),e.__touch.preventDefault&&(i.style.touchAction="none")),e.__touch.activeIDs={}},t._IE_disable=function(t){var e=t.__touch.f;void 0===window.navigator.pointerEnabled?(window.removeEventListener("MSPointerMove",e,!1),window.removeEventListener("MSPointerUp",e,!1),window.removeEventListener("MSPointerCancel",e,!1),t.canvas&&t.canvas.removeEventListener("MSPointerDown",e,!1)):(window.removeEventListener("pointermove",e,!1),window.removeEventListener("pointerup",e,!1),window.removeEventListener("pointercancel",e,!1),t.canvas&&t.canvas.removeEventListener("pointerdown",e,!1))},t._IE_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();var i=e.type,n=e.pointerId,o=t.__touch.activeIDs;if("MSPointerDown"==i||"pointerdown"==i){if(e.srcElement!=t.canvas)return;o[n]=!0,this._handleStart(t,n,e,e.pageX,e.pageY)}else o[n]&&("MSPointerMove"==i||"pointermove"==i?this._handleMove(t,n,e,e.pageX,e.pageY):("MSPointerUp"==i||"MSPointerCancel"==i||"pointerup"==i||"pointercancel"==i)&&(delete o[n],this._handleEnd(t,n,e)))}},t._handleStart=function(t,e,i,n,o){var s=t.__touch;if(s.multitouch||!s.count){var r=s.pointers;r[e]||(r[e]=!0,s.count++,t._handlePointerDown(e,i,n,o))}},t._handleMove=function(t,e,i,n,o){t.__touch.pointers[e]&&t._handlePointerMove(e,i,n,o)},t._handleEnd=function(t,e,i){var n=t.__touch,o=n.pointers;o[e]&&(n.count--,t._handlePointerUp(e,i,!0),delete o[e])},createjs.Touch=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=createjs.EaselJS=createjs.EaselJS||{};t.version="0.8.0",t.buildDate="Thu, 11 Dec 2014 23:32:09 GMT"}(),function(){createjs.Point.prototype.add=function(t){return new createjs.Point(this.x+t.x,this.y+t.y)},createjs.Point.prototype.subtract=function(t){return new createjs.Point(this.x-t.x,this.y-t.y)},createjs.Point.prototype.scale=function(t){return new createjs.Point(this.x*t,this.y*t)},createjs.Point.prototype.apply=function(t){return t=t.clone(),t.append(1,0,0,1,this.x,this.y),new createjs.Point(t.tx,t.ty)},createjs.Point.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(t.x-this.x,2)+Math.pow(t.y-this.y,2))},createjs.Point.prototype.isZero=function(){return 0===this.x&&0===this.y},createjs.Point.prototype.length=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},createjs.Point.prototype.regularize=function(){return this.scale(1/this.length())},createjs.Rectangle.createEmpty=function(){var t;return t=new createjs.Rectangle,t.empty=!0,t},createjs.Rectangle.prototype.clear=function(){return this.empty=!0,this},createjs.Rectangle.prototype.isEmpty=function(){return null!=this.empty},createjs.Rectangle.prototype.addPoint=function(t){return null!=this.empty?(this.x=t.x,this.y=t.y,this.width=0,this.height=0,this.empty=null,this.points=[t]):(this.points.push(t),t.x<this.x?(this.width+=this.x-t.x,this.x=t.x):t.x>this.x+this.width&&(this.width=t.x-this.x),t.y<this.y?(this.height+=this.y-t.y,this.y=t.y):t.y>this.y+this.height&&(this.height=t.y-this.y)),this},createjs.Rectangle.prototype.addRectangle=function(t){var e,i,n,o;for(o=t.getCornerPoints(),e=0,i=o.length;i>e;e++)n=o[e],this.addPoint(n);return this},createjs.Rectangle.prototype.getTopLeft=function(){return new createjs.Point(this.x,this.y)},createjs.Rectangle.prototype.getTopRight=function(){return new createjs.Point(this.x+this.width,this.y)},createjs.Rectangle.prototype.getBottomLeft=function(){return new createjs.Point(this.x,this.y+this.height)},createjs.Rectangle.prototype.getBottomRight=function(){return new createjs.Point(this.x+this.width,this.y+this.height)},createjs.Rectangle.prototype.getCornerPoints=function(){return[this.getTopLeft(),this.getTopRight(),this.getBottomLeft(),this.getBottomRight()]},createjs.Rectangle.prototype.getCenter=function(){return new createjs.Point(this.x+this.width/2,this.y+this.height/2)},createjs.Rectangle.prototype.getRight=function(){return this.x+this.width},createjs.Rectangle.prototype.getBottom=function(){return this.y+this.height},createjs.Rectangle.prototype.inflate=function(t){return this.x-=t,this.y-=t,this.width+=2*t,this.height+=2*t,this},createjs.Point.boundary=function(t){var e,i,n,o;for(o=createjs.Rectangle.createEmpty(),e=0,i=t.length;i>e;e++)n=t[e],o.addPoint(n);return o},createjs.Point.prototype.toArray=function(){return[this.x,this.y]},createjs.Point.prototype.from=function(t){var e;return e=this.clone(),e.on=t,e},createjs.Point.prototype.to=function(t){var e;return null!=this.on?this.on.getStage()===t.getStage()?e=null!=this.on_global?t.globalToLocal(this.x,this.y):this.on.localToLocal(this.x,this.y,t):null!=this.on_global?(e=this.on.globalToWindow(this.x,this.y),e=t.windowToLocal(e.x,e.y)):(e=this.on.localToWindow(this.x,this.y),e=t.windowToLocal(e.x,e.y)):e=null!=this.on_window?t.windowToLocal(this.x,this.y):t.globalToLocal(this.x,this.y),e.on=t,e.on_global=null,e.on_window=null,e},createjs.Point.prototype.toGlobal=function(){var t;return null!=this.on&&null==this.on_window&&null==this.on_global?(t=this.on.localToGlobal(this.x,this.y),t.on_global=!0):t=this.clone(),t.on_window=null,t},createjs.Point.prototype.fromWindow=function(){var t;return t=this.clone(),t.on_global=null,t.on_window=!0,t},createjs.Point.prototype.toWindow=function(){var t;return t=null!=this.on?null!=this.on_global?this.on.globalToWindow(this.x,this.y):this.on.localToWindow(this.x,this.y):this.clone(),t.on=null,t.on_global=null,t.on_window=!0,t},createjs.DisplayObject.prototype.remove=function(){var t;return null!=(t=this.parent)?t.removeChild(this):void 0},createjs.DisplayObject.prototype.position=function(){return new createjs.Point(this.x,this.y)},createjs.DisplayObject.prototype.localToParent=function(t,e){return this.localToLocal(t,e,this.parent)},createjs.DisplayObject.prototype.copyTransform=function(t){return this.x=t.x,this.y=t.y,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.rotation=t.rotation,t},createjs.DisplayObject.prototype.clearTransform=function(){return this.setTransform()},createjs.DisplayObject.prototype.projectTo=function(t){var e,i;return e=this.localToWindow(0,0),i=t.windowToLocal(e.x,e.y),this.x=i.x,this.y=i.y,t.addChild(this)},createjs.DisplayObject.prototype.localToWindow=function(t,e){var i,n;return n=$(this.getStage().canvas).position(),i=this.localToGlobal(t,e),i.x+=n.left,i.y+=n.top,i},createjs.DisplayObject.prototype.windowToLocal=function(t,e){var i,n;return n=$(this.getStage().canvas).position(),i=this.globalToLocal(t-n.left,e-n.top)},createjs.DisplayObject.prototype.globalToWindow=function(t,e){var i;return i=$(this.getStage().canvas).position(),new createjs.Point(t+i.left,e+i.top)},createjs.DisplayObject.prototype.windowToGlobal=function(t,e){var i;return i=$(this.getStage().canvas).position(),new createjs.Point(t-i.left,e-i.top)},createjs.Stage.prototype.invalidate=function(){return this.invalidated=!0}}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t,i){var o,s,r;this.radius=t,this.markAs=e(this.markAs,this),this.markAsSelected=e(this.markAsSelected,this),this.markAsCaptured=e(this.markAsCaptured,this),this.markAsStatic=e(this.markAsStatic,this),this.markAsDynamic=e(this.markAsDynamic,this),this.updateIndex=e(this.updateIndex,this),n.__super__.constructor.call(this),s=ArtImages[ArtImages.length*Math.random()|0],o=new createjs.Rectangle(0,0,150,150),this.index=i,this.bitmap=new createjs.Bitmap(s),this.bitmap.regX=o.width/2,this.bitmap.regY=o.height/2,this.bitmap.scaleX=2*this.radius/o.width,this.bitmap.scaleY=2*this.radius/o.height,this.textOutline=new createjs.Text(i,"20px Arial",null),this.textOutline.outline=4,r=this.textOutline.getBounds(),this.textOutline.x-=r.width/2,this.textOutline.y-=r.height/2,this.text=this.textOutline.clone(),this.text.outline=!1,this.addChild(this.bitmap,this.textOutline,this.text)}var o,s,r;return i(n,t),r={dynamic:"#000","static":"#fff",captured:"#66f"},s={dynamic:"#fff","static":"#f00",selected:"#0ff"},o={dynamic:1,"static":.5,captured:1},n.prototype.updateIndex=function(t){var e;return this.index=t,this.textOutline.text=this.index,e=this.textOutline.getBounds(),this.textOutline.x=-e.width/2,this.textOutline.y=-e.height/2,this.text.text=this.index,this.text.x=this.textOutline.x,this.text.y=this.textOutline.y},n.prototype.markAsDynamic=function(){return this.markAs("dynamic")},n.prototype.markAsStatic=function(){return this.markAs("static")},n.prototype.markAsCaptured=function(){return this.markAs("captured")},n.prototype.markAsSelected=function(){return this.markAs("selected")},n.prototype.markAs=function(t){return null!=s[t]&&(this.text.color=s[t]),null!=r[t]&&(this.textOutline.color=r[t]),null!=o[t]?this.bitmap.alpha=o[t]:void 0},n}(createjs.Container),this.ArtImage=t}.call(this),function(){var t,e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;t=function(t){function i(t){var e,n,o,s;for(this.radius=t,e=["#828b20","#b0ac31","#cbc53d","#fad779","#f9e4ad","#faf2db","#563512","#9b4a0b","#d36600","#fe8a00","#f9a71f"],i.__super__.constructor.call(this),o=n=s=this.rings_count;0>=s?0>=n:n>=0;o=0>=s?++n:--n)this.graphics.beginFill(e[Math.random()*e.length|0]).drawCircle(0,0,this.radius*o/this.rings_count);this.snapToPixel=!0,this.cache(-this.radius,-this.radius,2*this.radius,2*this.radius)}return e(i,t),i.prototype.radius=10,i.prototype.rings_count=50,i}(createjs.Shape),this.Baumkuchen=t}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){this.handleMouseLongPress=e(this.handleMouseLongPress,this),this.handleMouseUp=e(this.handleMouseUp,this),this.handleMouseMove=e(this.handleMouseMove,this),this.handleMouseDown=e(this.handleMouseDown,this),this.on=e(this.on,this),this.attach=e(this.attach,this),this.setScale=e(this.setScale,this),this.altKey=e(this.altKey,this),this.shiftKey=e(this.shiftKey,this),n.__super__.constructor.call(this),this.mousePoint=new o,this.mouseDownPoint=new o,this.scale=1,this.listeners={},this.isMoved=!1,this.isLongPressed=!1,this.event=null}var o;return i(n,t),o=Box2D.Common.Math.b2Vec2,n.prototype.shiftKey=function(){var t,e;return null!=(t=this.event)&&null!=(e=t.nativeEvent)?e.shiftKey:void 0},n.prototype.altKey=function(){var t,e;return null!=(t=this.event)&&null!=(e=t.nativeEvent)?e.altKey:void 0},n.prototype.setScale=function(t){return this.scale=t},n.prototype.attach=function(t){return t.addEventListener("mousedown",this.handleMouseDown),t.addEventListener("pressmove",this.handleMouseMove),t.addEventListener("pressup",this.handleMouseUp)},n.prototype.on=function(t,e){var i;return null==(i=this.listeners)[t]&&(i[t]=[]),this.listeners[t].push(e)},n.prototype.handleMouseDown=function(t){var e,i,n,o,s;for(this.event=t,this.mousePoint.Set(t.stageX/this.scale,t.stageY/this.scale),this.mouseDownPoint.Set(this.mousePoint.x,this.mousePoint.y),this.isMoved=!1,this.isLongPressed=!1,s=null!=(o=this.listeners.mousedown)?o:[],i=0,n=s.length;n>i;i++)(e=s[i])();setTimeout(function(t){return function(){return t.isMoved?void 0:t.handleMouseLongPress()}}(this),500)},n.prototype.handleMouseMove=function(t){var e,i,n,o,s;for(this.event=t,this.mousePoint.Set(t.stageX/this.scale,t.stageY/this.scale),this.isMoved=!0,s=null!=(o=this.listeners.pressmove)?o:[],i=0,n=s.length;n>i;i++)(e=s[i])()},n.prototype.handleMouseUp=function(t){var e,i,n,o,s;for(this.event=t,s=null!=(o=this.listeners.pressup)?o:[],i=0,n=s.length;n>i;i++)(e=s[i])()},n.prototype.handleMouseLongPress=function(){var t,e,i,n,o;for(this.isLongPressed=!0,o=null!=(n=this.listeners.longpress)?n:[],e=0,i=o.length;i>e;e++)(t=o[e])()},n}(Object),this.Gesture=t}.call(this),function(){$(function(){return $("[data-action]").on("click",function(t){var e,i,n,o,s,r;for(e=$(this).data("action"),s=$("canvas"),r=[],n=0,o=s.length;o>n;n++)i=s[n],r.push(i[e]($("form")));return r}),$("#add-art").on("click",function(t){var e;return(e=$("canvas")[0])&&"function"==typeof e.addArt?e.addArt():void 0}),$("#toggle-images").on("click",function(t){var e;return(e=$("canvas")[0])?("function"==typeof e.toggleImages?e.toggleImages():void 0)?$(this).addClass("active"):$(this).removeClass("active"):void 0}),$("#toggle-debug").on("click",function(t){var e;return(e=$("canvas")[0])?("function"==typeof e.toggleDebug?e.toggleDebug():void 0)?$(this).addClass("active"):$(this).removeClass("active"):void 0}),$("#reset").on("click",function(t){var e;return(e=$("canvas")[0])&&"function"==typeof e.reset?e.reset():void 0})}),this.ArtImages=[],$(function(t){return function(){var e;return t.ArtImages=function(){var t,i,n,o;for(n=$("#art-images img"),o=[],t=0,i=n.length;i>t;t++)e=n[t],o.push(e.src);return o}()}}(this))}.call(this),function(){$(function(){var t,e,i,n,o,s,r,a,l,c,h,u,m,p,_,d,f,y,x,g,v,b,w;if(l=$("canvas#spring")[0]){for(e=6,s=3,o=1.2,n=.05,v=0,u=.9,x=40,y=80,_=!1,c=!1,h=$(l),m=new createjs.Point(h.data("gravity-x"),h.data("gravity-y")),w=new createjs.Stage(l),i=new createjs.Container,d=new createjs.Container,a=new createjs.Container,w.addChild(i),t=[],r=[],l.addActors=function(e){var n,o;return o=t.slice().sort(function(t,e){return-(t.radius-e.radius)}),n=o.indexOf(e),i.addChildAt(e.actors[0],n),d.addChildAt(e.actors[1],n)},l.addArt=function(){var e,i,n,o,r,a,c,h;for(r=Math.floor(Math.random()*(y-x)+x),e={radius:r,x:l.width*(.5+.4*Math.random()-.2),y:(null!=(a=null!=(c=t[t.length-1])?c.y:void 0)?a:0)+r,mass:Math.max(1,s-t.length),velocity:new createjs.Point(0,0),force:new createjs.Point(0,0),actors:[new Baumkuchen(r),new ArtImage(r)],position:function(){return new createjs.Point(this.x,this.y)}},h=t.slice(Math.max(0,t.length-s)),n=0,o=h.length;o>n;n++)i=h[n],l.addBondFor(e,i);return t.push(e),l.addActors(e),e},l.toggleImages=function(){return _=!_,_?(i.remove(),w.addChildAt(d,0)):(w.addChildAt(i,0),d.remove()),_},l.toggleDebug=function(){return c=!c,c?w.addChild(a):a.remove(),c},l.addBondFor=function(t,e){var i;return i=new createjs.Shape,r.push({arts:[t,e],length:(t.radius+e.radius)*o,shape:i}),a.addChild(i)},createjs.Ticker.timingMode=createjs.Ticker.RAF,createjs.Ticker.addEventListener("tick",function(e){var i,o,s,a,l,h,p,_,d,f,y,x,g,b,C,D,S,B,A,M,T;for(_=0,x=r.length;x>_;_++)l=r[_],s=l.arts[0],a=l.arts[1],T=a.position().subtract(s.position()),y=T.length(),h=T.scale(1/y),p=h.scale(-v/y*y+(y-l.length)*n),s.force=s.force.add(p),a.force=a.force.add(p.scale(-1));for(d=0,g=t.length;g>d;d++)o=t[d],o.force=o.force.add(m),o.velocity=o.velocity.add(o.force).scale(1/o.mass*u),o.force=new createjs.Point(0,0);for(f=0,b=t.length;b>f;f++)for(o=t[f],A=o.position().add(o.velocity),o.x=A.x,o.y=A.y,M=o.actors,S=0,C=M.length;C>S;S++)i=M[S],i.x=o.x,i.y=o.y;if(c)for(B=0,D=r.length;D>B;B++)l=r[B],l.shape.graphics.clear().beginStroke("#333").moveTo(l.arts[0].x,l.arts[0].y).lineTo(l.arts[1].x,l.arts[1].y).endStroke();return w.update(e)}),b=[],p=f=0,g=e;g>=0?g>f:f>g;p=g>=0?++f:--f)b.push(l.addArt());return b}})}.call(this),function(){$(function(){var t,e,i,n,o,s,r,a,l,c,h,u,m,p,_,d,f,y,x,g,v,b,w,C,D,S,B,A,M,T,I,V,L,E,P,k,F,j,R,G,N,O,J,z,q;if(f=$("canvas#tumtum")[0]){for(i=10,T=!1,x=!1,G=new createjs.Stage(f),n=new createjs.Container,I=new createjs.Container,G.addChild(n),_=[],m=Box2D.Common.Math.b2Vec2,r=Box2D.Dynamics.b2BodyDef,s=Box2D.Dynamics.b2Body,c=Box2D.Dynamics.b2FixtureDef,
p=Box2D.Dynamics.b2World,u=Box2D.Collision.Shapes.b2PolygonShape,a=Box2D.Collision.Shapes.b2CircleShape,l=Box2D.Dynamics.b2DebugDraw,o=Box2D.Collision.b2AABB,h=Box2D.Dynamics.Joints.b2MouseJointDef,g=$(f),B=new m(g.data("gravity-x"),g.data("gravity-y")),q=new p(B,!0),e=f.width,z=f.width/e,A=f.height/e,v=new c,v.density=1,t=$("#arts-count"),L=null,j=null,S=function(){return parseFloat($("#radius-min").val())},D=function(){return parseFloat($("#radius-max").val())},C=function(){return parseFloat($("#body-ratio").val())},d=function(){var t,e,i,n,o,a;return t=new r,t.type=s.b2_staticBody,d=q.CreateBody(t),n=.1,a=100*A,o=new c,o.shape=new u,o.shape.SetAsOrientedBox(z/2,n,new m(z/2,-n),0),e=new c,e.shape=new u,e.shape.SetAsOrientedBox(n,a,new m(-n,0),0),i=new c,i.shape=new u,i.shape.SetAsOrientedBox(n,a,new m(z+n,0),0),d.CreateFixture(o),d.CreateFixture(e),d.CreateFixture(i),d}(),b=new Gesture,b.setScale(e),b.on("mousedown",function(){var t,e;e=w(!0,b.mousePoint),e&&(b.shiftKey()&&null!=j&&j!==e?(N(j,e),F(e)):b.altKey()&&null!=j&&j!==e?O(j,e):(y(e),F(e),t=new h,t.bodyA=d,t.bodyB=e,t.target=b.mousePoint,t.collideConnected=!0,t.maxForce=1e3*e.GetMass(),t.dampingRatio=0,L=q.CreateJoint(t),e.SetAwake(!0)))}),b.on("pressmove",function(){L&&L.SetTarget(b.mousePoint)}),b.on("pressup",function(){var t;L&&(t=L.GetBodyB(),P(t),q.DestroyJoint(L),L=null)}),b.on("longpress",function(){var t;L&&(t=L.GetBodyB(),J(t))}),O=function(t,e){var i;return i=new m(t.GetPosition().x,t.GetPosition().y),t.SetPosition(e.GetPosition()),e.SetPosition(i),t.SetAwake(!0),e.SetAwake(!0)},N=function(t,e){var i,n;i=_.indexOf(t),n=_.indexOf(e),_[n]=t,t.actors[0].updateIndex(n+1),_[i]=e,e.actors[0].updateIndex(i+1)},y=function(t){return t.SetType(s.b2_dynamicBody),t.actors[0].markAsCaptured()},P=function(t){return t.frozen?(t.SetType(s.b2_staticBody),t.actors[0].markAsStatic()):t.actors[0].markAsDynamic(),j===t?t.actors[0].markAsSelected():void 0},F=function(t){var e;return e=j,j=t,null!=e&&e!==j&&P(e),null!=j?j.actors[0].markAsSelected():void 0},J=function(t){return R(t,!t.frozen)},R=function(t,e){var i;return t.frozen=e,i=t.actors[0],e?i.markAsStatic():i.markAsDynamic()},w=function(t,e){var i,n,r;return n=null,i=new o,r=function(i){var o,r,a;return r=i.GetShape(),a=i.GetBody(),(a.GetType()!==s.b2_staticBody||t)&&a!==d&&(o=r.TestPoint(a.GetTransform(),e))?(n=a,!1):!0},i.lowerBound.Set(e.x-.001,e.y-.001),i.upperBound.Set(e.x+.001,e.y+.001),q.QueryAABB(r,i),n},f.showArtsCount=function(){return t.text(_.length)},f.addActors=function(t){return n.addChild(t.actors[0]),I.addChild(t.actors[1])},f.addArt=function(){var t,i,n,o,l,c,h,u;return c=Math.random()*(D()-S())+S(),o=new r,o.type=s.b2_dynamicBody,v.shape=new a(C()*c),u=function(){var t,e,i;for(i=[],t=0,e=_.length;e>t;t++)n=_[t],NaN!==n.GetPosition().y&&i.push(n.GetPosition().y+n.radius);return i}(),h=u.length>0?Math.max.apply(null,u):c,o.position.Set(z*(.1+.8*Math.random()),h),n=q.CreateBody(o),n.CreateFixture(v),l=_.push(n),n.radius=c,t=new ArtImage(c*e,l),t.markAsDynamic(),b.attach(t),i=new Baumkuchen(c*e),n.actors=[t,i],R(n,!1),f.addActors(n),f.showArtsCount()},f.addArt10=function(){var t,e,i;for(i=[],t=e=1;10>=e;t=++e)i.push(f.addArt());return i},f.toggleImages=function(){return T=!T,T?(n.remove(),G.addChildAt(I,0)):(G.addChildAt(n,0),I.remove()),T},f.toggleDebug=function(){return x=!x,x&&!this.debugDraw&&(this.debugDraw=new l,this.debugDraw.SetSprite(f.getContext("2d")),this.debugDraw.SetDrawScale(e),this.debugDraw.SetFillAlpha(.3),this.debugDraw.SetLineThickness(1),this.debugDraw.SetFlags(l.e_shapeBit|l.e_jointBit),q.SetDebugDraw(this.debugDraw)),x},f.reset=function(){var t,e,i;for(e=0,i=_.length;i>e;e++)t=_[e],q.DestroyBody(t),n.removeChild(t.actors[0]),I.removeChild(t.actors[1]);return _=[],f.showArtsCount(),!1},f.dump=function(){var t,e,i;return i=function(){var e,i,n;for(n=[],e=0,i=_.length;i>e;e++)t=_[e],n.push({x:t.GetPosition().x,y:t.GetPosition().y,radius:t.radius});return n}(),e={count:i.length,elements:i},$("#output").text(JSON.stringify(e))},createjs.Ticker.timingMode=createjs.Ticker.RAF,createjs.Ticker.addEventListener("tick",function(t){var i,n,o,s,r,a,l,c;if(q.Step(1/60,3,3),q.ClearForces(),x)return q.DrawDebugData();for(o=0,r=_.length;r>o;o++)if(n=_[o],l=n.GetPosition(),l&&null!=l.x&&null!=l.y)for(c=n.actors,s=0,a=c.length;a>s;s++)i=c[s],i.x=l.x*e,i.y=l.y*e;return G.update(t)}),k=[],M=V=0,E=i;E>=0?E>V:V>E;M=E>=0?++V:--V)k.push(f.addArt());return k}})}.call(this);